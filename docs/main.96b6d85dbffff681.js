"use strict";(self.webpackChunktodo_ngrx=self.webpackChunktodo_ngrx||[]).push([[792],{76:(Us,kr,pt)=>{pt.d(kr,{Am:()=>ja,Bd:()=>pe,FA:()=>Ae,Fy:()=>ii,I9:()=>oi,Im:()=>Qo,Ku:()=>ea,Ll:()=>_n,T9:()=>dn,Uj:()=>jt,XA:()=>Ft,ZQ:()=>tt,bD:()=>Bs,cY:()=>Lt,eX:()=>oe,g:()=>ue,gR:()=>nr,hp:()=>vl,jZ:()=>Nn,lT:()=>Cr,lV:()=>si,mS:()=>Rt,nr:()=>Q,p7:()=>yn,sr:()=>$n,tD:()=>Yi,u:()=>fe,zW:()=>ee,zw:()=>Ue});const ne=function(N){const M=[];let R=0;for(let ce=0;ce<N.length;ce++){let $=N.charCodeAt(ce);$<128?M[R++]=$:$<2048?(M[R++]=$>>6|192,M[R++]=63&$|128):55296==(64512&$)&&ce+1<N.length&&56320==(64512&N.charCodeAt(ce+1))?($=65536+((1023&$)<<10)+(1023&N.charCodeAt(++ce)),M[R++]=$>>18|240,M[R++]=$>>12&63|128,M[R++]=$>>6&63|128,M[R++]=63&$|128):(M[R++]=$>>12|224,M[R++]=$>>6&63|128,M[R++]=63&$|128)}return M},Be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(N,M){if(!Array.isArray(N))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let $=0;$<N.length;$+=3){const Pe=N[$],Ne=$+1<N.length,Le=Ne?N[$+1]:0,ci=$+2<N.length,Ce=ci?N[$+2]:0;let Br=(15&Le)<<2|Ce>>6,Es=63&Ce;ci||(Es=64,Ne||(Br=64)),ce.push(R[Pe>>2],R[(3&Pe)<<4|Le>>4],R[Br],R[Es])}return ce.join("")},encodeString(N,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(N):this.encodeByteArray(ne(N),M)},decodeString(N,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(N):function(N){const M=[];let R=0,ce=0;for(;R<N.length;){const $=N[R++];if($<128)M[ce++]=String.fromCharCode($);else if($>191&&$<224){const Pe=N[R++];M[ce++]=String.fromCharCode((31&$)<<6|63&Pe)}else if($>239&&$<365){const ci=((7&$)<<18|(63&N[R++])<<12|(63&N[R++])<<6|63&N[R++])-65536;M[ce++]=String.fromCharCode(55296+(ci>>10)),M[ce++]=String.fromCharCode(56320+(1023&ci))}else{const Pe=N[R++],Ne=N[R++];M[ce++]=String.fromCharCode((15&$)<<12|(63&Pe)<<6|63&Ne)}}return M.join("")}(this.decodeStringToByteArray(N,M))},decodeStringToByteArray(N,M){this.init_();const R=M?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let $=0;$<N.length;){const Pe=R[N.charAt($++)],Le=$<N.length?R[N.charAt($)]:0;++$;const Ce=$<N.length?R[N.charAt($)]:64;++$;const lt=$<N.length?R[N.charAt($)]:64;if(++$,null==Pe||null==Le||null==Ce||null==lt)throw new An;ce.push(Pe<<2|Le>>4),64!==Ce&&(ce.push(Le<<4&240|Ce>>2),64!==lt&&ce.push(Ce<<6&192|lt))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let N=0;N<this.ENCODED_VALS.length;N++)this.byteToCharMap_[N]=this.ENCODED_VALS.charAt(N),this.charToByteMap_[this.byteToCharMap_[N]]=N,this.byteToCharMapWebSafe_[N]=this.ENCODED_VALS_WEBSAFE.charAt(N),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[N]]=N,N>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(N)]=N,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(N)]=N)}}};class An extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jt=function(N){return function(N){const M=ne(N);return Be.encodeByteArray(M,!0)}(N).replace(/\./g,"")},fe=function(N){try{return Be.decodeString(N,!0)}catch(M){console.error("base64Decode failed: ",M)}return null};function Ue(N,M){if(!(M instanceof Object))return M;switch(M.constructor){case Date:return new Date(M.getTime());case Object:void 0===N&&(N={});break;case Array:N=[];break;default:return M}for(const R in M)!M.hasOwnProperty(R)||!Et(R)||(N[R]=Ue(N[R],M[R]));return N}function Et(N){return"__proto__"!==N}function Rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const It=()=>{try{return Rt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const N=process.env.__FIREBASE_DEFAULTS__;return N?JSON.parse(N):void 0})()||(()=>{if(typeof document>"u")return;let N;try{N=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const M=N&&fe(N[1]);return M&&JSON.parse(M)})()}catch(N){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${N}`)}},dn=()=>{var N;return null===(N=It())||void 0===N?void 0:N.config},Ft=N=>{var M;return null===(M=It())||void 0===M?void 0:M[`_${N}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((M,R)=>{this.resolve=M,this.reject=R})}wrapCallback(M){return(R,ce)=>{R?this.reject(R):this.resolve(ce),"function"==typeof M&&(this.promise.catch(()=>{}),1===M.length?M(R):M(R,ce))}}}function ii(N,M){if(N.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=M||"demo-project",$=N.iat||0,Pe=N.sub||N.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:$,exp:$+3600,auth_time:$,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},N);return[jt(JSON.stringify({alg:"none",type:"JWT"})),jt(JSON.stringify(Ne)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Nn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function _n(){var N;const M=null===(N=It())||void 0===N?void 0:N.forceEnvironment;if("node"===M)return!0;if("browser"===M)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pe(){return typeof window<"u"||yn()}function yn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $n(){const N="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof N&&void 0!==N.id}function si(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Cr(){const N=tt();return N.indexOf("MSIE ")>=0||N.indexOf("Trident/")>=0}function Q(){return!_n()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){try{return"object"==typeof indexedDB}catch{return!1}}function oe(){return new Promise((N,M)=>{try{let R=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(ce);$.onsuccess=()=>{$.result.close(),R||self.indexedDB.deleteDatabase(ce),N(!0)},$.onupgradeneeded=()=>{R=!1},$.onerror=()=>{var Pe;M((null===(Pe=$.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(R){M(R)}})}class ue extends Error{constructor(M,R,ce){super(R),this.code=M,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(M,R,ce){this.service=M,this.serviceName=R,this.errors=ce}create(M,...R){const ce=R[0]||{},$=`${this.service}/${M}`,Pe=this.errors[M],Ne=Pe?function Dt(N,M){return N.replace(On,(R,ce)=>{const $=M[ce];return null!=$?String($):`<${ce}?>`})}(Pe,ce):"Error";return new ue($,`${this.serviceName}: ${Ne} (${$}).`,ce)}}const On=/\{\$([^}]+)}/g;function nr(N,M){return Object.prototype.hasOwnProperty.call(N,M)}function Qo(N){for(const M in N)if(Object.prototype.hasOwnProperty.call(N,M))return!1;return!0}function Bs(N,M){if(N===M)return!0;const R=Object.keys(N),ce=Object.keys(M);for(const $ of R){if(!ce.includes($))return!1;const Pe=N[$],Ne=M[$];if(Ci(Pe)&&Ci(Ne)){if(!Bs(Pe,Ne))return!1}else if(Pe!==Ne)return!1}for(const $ of ce)if(!R.includes($))return!1;return!0}function Ci(N){return null!==N&&"object"==typeof N}function ja(N){const M=[];for(const[R,ce]of Object.entries(N))Array.isArray(ce)?ce.forEach($=>{M.push(encodeURIComponent(R)+"="+encodeURIComponent($))}):M.push(encodeURIComponent(R)+"="+encodeURIComponent(ce));return M.length?"&"+M.join("&"):""}function oi(N){const M={};return N.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[$,Pe]=ce.split("=");M[decodeURIComponent($)]=decodeURIComponent(Pe)}}),M}function vl(N){const M=N.indexOf("?");if(!M)return"";const R=N.indexOf("#",M);return N.substring(M,R>0?R:void 0)}function Yi(N,M){const R=new ai(N,M);return R.subscribe.bind(R)}class ai{constructor(M,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{M(this)}).catch(ce=>{this.error(ce)})}next(M){this.forEachObserver(R=>{R.next(M)})}error(M){this.forEachObserver(R=>{R.error(M)}),this.close(M)}complete(){this.forEachObserver(M=>{M.complete()}),this.close()}subscribe(M,R,ce){let $;if(void 0===M&&void 0===R&&void 0===ce)throw new Error("Missing Observer.");$=function Yo(N,M){if("object"!=typeof N||null===N)return!1;for(const R of M)if(R in N&&"function"==typeof N[R])return!0;return!1}(M,["next","error","complete"])?M:{next:M,error:R,complete:ce},void 0===$.next&&($.next=ys),void 0===$.error&&($.error=ys),void 0===$.complete&&($.complete=ys);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch{}}),this.observers.push($),Pe}unsubscribeOne(M){void 0===this.observers||void 0===this.observers[M]||(delete this.observers[M],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(M){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,M)}sendOne(M,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[M])try{R(this.observers[M])}catch(ce){typeof console<"u"&&console.error&&console.error(ce)}})}close(M){this.finalized||(this.finalized=!0,void 0!==M&&(this.finalError=M),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ys(){}function ea(N){return N&&N._delegate?N._delegate:N}},1:(Us,kr,pt)=>{function A(n,e){return Object.is(n,e)}let Fe=null,xe=!1,ne=1;const Bt=Symbol("SIGNAL");function Be(n){const e=Fe;return Fe=n,e}const fe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ve(n){if(xe)throw new Error("");if(null===Fe)return;Fe.consumerOnSignalRead(n);const e=Fe.nextProducerIndex++;ii(Fe),e<Fe.producerNode.length&&Fe.producerNode[e]!==n&&Lt(Fe)&&Ft(Fe.producerNode[e],Fe.producerIndexOfThis[e]),Fe.producerNode[e]!==n&&(Fe.producerNode[e]=n,Fe.producerIndexOfThis[e]=Lt(Fe)?dn(n,Fe,e):0),Fe.producerLastReadVersion[e]=n.version}function Et(n){if((!Lt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ne)){if(!n.producerMustRecompute(n)&&!tr(n))return n.dirty=!1,void(n.lastCleanEpoch=ne);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ne}}function Rt(n){if(void 0===n.liveConsumerNode)return;const e=xe;xe=!0;try{for(const t of n.liveConsumerNode)t.dirty||Ut(t)}finally{xe=e}}function hr(){return!1!==Fe?.consumerAllowSignalWrites}function Ut(n){n.dirty=!0,Rt(n),n.consumerMarkedDirty?.(n)}function it(n){return n&&(n.nextProducerIndex=0),Be(n)}function It(n,e){if(Be(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Lt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ft(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function tr(n){ii(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Et(t),r!==t.version))return!0}return!1}function wr(n){if(ii(n),Lt(n))for(let e=0;e<n.producerNode.length;e++)Ft(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function dn(n,e,t){if(tt(n),0===n.liveConsumerNode.length&&Nn(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=dn(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ft(n,e){if(tt(n),1===n.liveConsumerNode.length&&Nn(n))for(let r=0;r<n.producerNode.length;r++)Ft(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ii(i),i.producerIndexOfThis[r]=e}}function Lt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ii(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tt(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Nn(n){return void 0!==n.producerNode}const pe=Symbol("UNSET"),yn=Symbol("COMPUTING"),$n=Symbol("ERRORED"),si={...fe,value:pe,dirty:!0,error:null,equal:A,producerMustRecompute:n=>n.value===pe||n.value===yn,producerRecomputeValue(n){if(n.value===yn)throw new Error("Detected cycle in computations.");const e=n.value;n.value=yn;const t=it(n);let r;try{r=n.computation()}catch(i){r=$n,n.error=i}finally{It(n,t)}e!==pe&&e!==$n&&r!==$n&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let Cr=function ms(){throw new Error};function Ko(){Cr()}let Q=null;function we(n,e){hr()||Ko(),n.equal(n.value,e)||(n.value=e,function On(n){n.version++,function Ue(){ne++}(),Rt(n),Q?.()}(n))}const Dt={...fe,equal:A,value:void 0};const At=()=>{},Jt={...fe,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:At};function je(n){return"function"==typeof n}function Hn(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const kn=Hn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function nr(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class gt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(je(r))try{r()}catch(s){e=s instanceof kn?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Bs(s)}catch(o){e=e??[],o instanceof kn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new kn(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Bs(e);else{if(e instanceof gt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&nr(t,e)}remove(e){const{_finalizers:t}=this;t&&nr(t,e),e instanceof gt&&e._removeParent(this)}}gt.EMPTY=(()=>{const n=new gt;return n.closed=!0,n})();const Qo=gt.EMPTY;function yl(n){return n instanceof gt||n&&"closed"in n&&je(n.remove)&&je(n.add)&&je(n.unsubscribe)}function Bs(n){je(n)?n():n.unsubscribe()}const Ci={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},js={setTimeout(n,e,...t){const{delegate:r}=js;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=js;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ja(n){js.setTimeout(()=>{const{onUnhandledError:e}=Ci;if(!e)throw n;e(n)})}function oi(){}const vl=ai("C",void 0,void 0);function ai(n,e,t){return{kind:n,value:e,error:t}}let Lr=null;function Yo(n){if(Ci.useDeprecatedSynchronousErrorHandling){const e=!Lr;if(e&&(Lr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Lr;if(Lr=null,t)throw r}}else n()}class $s extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yl(e)&&e.add(this)):this.destination=Xo}static create(e,t,r){return new Vr(e,t,r)}next(e){this.isStopped?Zo(function Yi(n){return ai("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Zo(function bi(n){return ai("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zo(vl,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Hs=Function.prototype.bind;function vs(n,e){return Hs.call(n,e)}class El{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zs(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zs(r)}else zs(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zs(t)}}}class Vr extends $s{constructor(e,t,r){let i;if(super(),je(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ci.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vs(e.next,s),error:e.error&&vs(e.error,s),complete:e.complete&&vs(e.complete,s)}):i=e}this.destination=new El(i)}}function zs(n){Ci.useDeprecatedSynchronousErrorHandling?function ys(n){Ci.useDeprecatedSynchronousErrorHandling&&Lr&&(Lr.errorThrown=!0,Lr.error=n)}(n):ja(n)}function Zo(n,e){const{onStoppedNotification:t}=Ci;t&&js.setTimeout(()=>t(n,e))}const Xo={closed:!0,next:oi,error:function qr(n){throw n},complete:oi},Zi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ur(n){return n}function Jo(n){return 0===n.length?Ur:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let St=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function N(n){return n&&n instanceof $s||function ea(n){return n&&je(n.next)&&je(n.error)&&je(n.complete)}(n)&&yl(n)}(t)?t:new Vr(t,r,i);return Yo(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=fo(r))((i,s)=>{const o=new Vr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Zi](){return this}pipe(...t){return Jo(t)(this)}toPromise(t){return new(t=fo(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function fo(n){var e;return null!==(e=n??Ci.Promise)&&void 0!==e?e:Promise}const M=Hn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let R=(()=>{class n extends St{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ce(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new M}next(t){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Qo:(this.currentObservers=null,s.push(t),new gt(()=>{this.currentObservers=null,nr(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new St;return t.source=this,t}}return n.create=(e,t)=>new ce(e,t),n})();class ce extends R{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Qo}}class $ extends R{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Pe(n){return je(n?.lift)}function Ne(n){return e=>{if(Pe(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(n,e,t,r,i){return new ci(n,e,t,r,i)}class ci extends $s{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ce(n,e){return Ne((t,r)=>{let i=0;t.subscribe(Le(r,s=>{r.next(n.call(e,s,i++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;class he extends Error{constructor(e,t){super(function go(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Pl=Symbol("InputSignalNode#UNSET"),Id={...Dt,transformFn:void 0,applyValueToInputSignal(n,e){we(n,e)}};function Wy(n,e){const t=Object.create(Id);function r(){if(ve(t),t.value===Pl)throw new he(-950,!1);return t.value}return t.value=n,t.transformFn=e?.transform,r[Bt]=t,r}function Ji(n){return{toString:n}.toString()}const mo="__parameters__";function Ws(n,e,t){return Ji(()=>{const r=function Ml(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,f){const m=c.hasOwnProperty(mo)?c[mo]:Object.defineProperty(c,mo,{value:[]})[mo];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const tn=globalThis;function Gt(n){for(let e in n)if(n[e]===Gt)return e;throw Error("Could not find renamed property on target object.")}function Cp(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ir(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ir).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function xl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bp=Gt({__forward_ref__:Gt});function on(n){return n.__forward_ref__=on,n.toString=function(){return ir(this())},n}function et(n){return Cd(n)?n():n}function Cd(n){return"function"==typeof n&&n.hasOwnProperty(bp)&&n.__forward_ref__===on}function ye(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function bd(n){return Tp(n,Dd)||Tp(n,rv)}function Tp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Td(n){return n&&(n.hasOwnProperty(Dp)||n.hasOwnProperty(sN))?n[Dp]:null}const Dd=Gt({\u0275prov:Gt}),Dp=Gt({\u0275inj:Gt}),rv=Gt({ngInjectableDef:Gt}),sN=Gt({ngInjectorDef:Gt});class Y{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ye({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ol(n){return n&&!!n.\u0275providers}const es=Gt({\u0275cmp:Gt}),kl=Gt({\u0275dir:Gt}),Sp=Gt({\u0275pipe:Gt}),av=Gt({\u0275mod:Gt}),Ks=Gt({\u0275fac:Gt}),Ad=Gt({__NG_ELEMENT_ID__:Gt}),cv=Gt({__NG_ENV_ID__:Gt});function at(n){return"string"==typeof n?n:null==n?"":String(n)}function Rp(n,e){throw new he(-201,!1)}var bt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(bt||{});let Qa;function jb(){return Qa}function zn(n){const e=Qa;return Qa=n,e}function uv(n,e,t){const r=bd(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&bt.Optional?null:void 0!==e?e:void Rp()}const Fl={},Fn="__NG_DI_FLAG__",Pd="ngTempTokenPath",$b=/\n/gm,dv="__source";let Ya;function yo(n){const e=Ya;return Ya=n,e}function Md(n,e=bt.Default){if(void 0===Ya)throw new he(-203,!1);return null===Ya?uv(n,void 0,e):Ya.get(n,e&bt.Optional?null:void 0,e)}function j(n,e=bt.Default){return(jb()||Md)(et(n),e)}function W(n,e=bt.Default){return j(n,xd(e))}function xd(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ll(n){const e=[];for(let t=0;t<n.length;t++){const r=et(n[t]);if(Array.isArray(r)){if(0===r.length)throw new he(900,!1);let i,s=bt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=xp(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(j(i,s))}else e.push(j(r))}return e}function Xa(n,e){return n[Fn]=e,n.prototype[Fn]=e,n}function xp(n){return n[Fn]}const Nd=Xa(Ws("Inject",n=>({token:n})),-1),Ja=Xa(Ws("Optional"),8),Od=Xa(Ws("SkipSelf"),4);function aa(n,e){return n.hasOwnProperty(Ks)?n[Ks]:null}function tc(n,e){n.forEach(t=>Array.isArray(t)?tc(t,e):e(t))}function fv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ca(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Di(n,e,t){let r=nc(n,e);return r>=0?n[1|r]=t:(r=~r,function Fd(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function kp(n,e){const t=nc(n,e);if(t>=0)return n[1|t]}function nc(n,e){return function pv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Cs={},Nt=[],Kr=new Y(""),gv=new Y("",-1),Vl=new Y("");class Ld{get(e,t=Fl){if(t===Fl){const r=new Error(`NullInjectorError: No provider for ${ir(e)}!`);throw r.name="NullInjectorError",r}return t}}var rc=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rc||{}),ts=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ts||{}),bs=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(bs||{});function Vd(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ul(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Ud(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function mv(n){return 3===n||4===n||6===n}function Ud(n){return 64===n.charCodeAt(0)}function Qs(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||vo(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function vo(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Bd="ng-template";function Wb(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==Vd(e[i+1].toLowerCase(),t,0))return!0}else if(Fp(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function Fp(n){return 4===n.type&&n.value!==Bd}function Kb(n,e,t){return e===(4!==n.type||t?n.value:Bd)}function Lp(n,e,t){let r=4;const i=n.attrs,s=null!==i?function Yb(n){for(let e=0;e<n.length;e++)if(mv(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Kb(n,c,t)||""===c&&1===e.length){if(ji(r))return!1;o=!0}}else if(8&r){if(null===i||!Wb(n,i,c,t)){if(ji(r))return!1;o=!0}}else{const u=e[++a],f=Qb(c,i,Fp(n),t);if(-1===f){if(ji(r))return!1;o=!0;continue}if(""!==u){let m;if(m=f>s?"":i[f+1].toLowerCase(),2&r&&u!==m){if(ji(r))return!1;o=!0}}}}else{if(!o&&!ji(r)&&!ji(c))return!1;if(o&&ji(c))continue;o=!1,r=c|1&r}}return ji(r)||o}function ji(n){return!(1&n)}function Qb(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Up(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function _v(n,e,t=!1){for(let r=0;r<e.length;r++)if(Lp(n,e[r],t))return!0;return!1}function Zb(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function jd(n,e){return n?":not("+e.trim()+")":e}function Bp(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ji(o)&&(e+=jd(s,i),i=""),r=o,s=s||!ji(r);t++}return""!==i&&(e+=jd(s,i)),e}function fr(n){return Ji(()=>{const e=yv(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ts.Emulated,styles:n.styles||Nt,_:null,schemas:n.schemas||null,tView:null,id:""};vv(t);const r=n.dependencies;return t.directiveDefs=ic(r,!1),t.pipeDefs=ic(r,!0),t.id=function tT(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function Jb(n){return _t(n)||Yn(n)}function jp(n){return null!==n}function qt(n){return Ji(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $d(n,e){if(null==n)return Cs;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=bs.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==bs.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Qe(n){return Ji(()=>{const e=yv(n);return vv(e),e})}function pr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function _t(n){return n[es]||null}function Yn(n){return n[kl]||null}function br(n){return n[Sp]||null}function gr(n,e){const t=n[av]||null;if(!t&&!0===e)throw new Error(`Type ${ir(n)} does not have '\u0275mod' property.`);return t}function yv(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Cs,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$d(n.inputs,e),outputs:$d(n.outputs),debugInfo:null}}function vv(n){n.features?.forEach(e=>e(n))}function ic(n,e){if(!n)return null;const t=e?br:Jb;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(jp)}function Io(n){return{\u0275providers:n}}function nT(...n){return{\u0275providers:jl(0,n),\u0275fromNgModule:!0}}function jl(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return tc(e,o=>{const a=o;sc(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&$l(i,s),t}function $l(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Hl(i,s=>{e(s,r)})}}function sc(n,e,t,r){if(!(n=et(n)))return!1;let i=null,s=Td(n);const o=!s&&_t(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Td(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)sc(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{tc(s.imports,f=>{sc(f,e,t,r)&&(u||=[],u.push(f))})}finally{}void 0!==u&&$l(u,e)}if(!a){const u=aa(i)||(()=>new i);e({provide:i,useFactory:u,deps:Nt},i),e({provide:Vl,useValue:i,multi:!0},i),e({provide:Kr,useValue:()=>j(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;Hl(c,f=>{e(f,u)})}}}return i!==n&&void 0!==n.providers}function Hl(n,e){for(let t of n)Ol(t)&&(t=t.\u0275providers),Array.isArray(t)?Hl(t,e):e(t)}const iT=Gt({provide:String,useValue:Gt});function Hd(n){return null!==n&&"object"==typeof n&&iT in n}function la(n){return"function"==typeof n}const zl=new Y(""),zd={},sT={};let zp;function oc(){return void 0===zp&&(zp=new Ld),zp}class Tr{}class ac extends Tr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gp(e,o=>this.processProvider(o)),this.records.set(gv,cc(void 0,this)),i.has("environment")&&this.records.set(Tr,cc(void 0,this));const s=this.records.get(zl);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Vl,Nt,bt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Be(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=yo(this),r=zn(void 0);try{return e()}finally{yo(t),zn(r)}}get(e,t=Fl,r=bt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(cv))return e[cv](this);r=xd(r);const s=yo(this),o=zn(void 0);try{if(!(r&bt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function lT(n){return"function"==typeof n||"object"==typeof n&&n instanceof Y}(e)&&bd(e);c=u&&this.injectableDefInScope(u)?cc(Gd(e),zd):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&bt.Self?oc():this.parent).get(e,t=r&bt.Optional&&t===Fl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Pd]=a[Pd]||[]).unshift(ir(e)),s)throw a;return function Hb(n,e,t,r){const i=n[Pd];throw e[dv]&&i.unshift(e[dv]),n.message=function Np(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ir(e);if(Array.isArray(e))i=e.map(ir).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ir(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($b,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Pd]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{zn(o),yo(s)}}resolveInjectorInitializers(){const e=Be(null),t=yo(this),r=zn(void 0);try{const s=this.get(Kr,Nt,bt.Self);for(const o of s)o()}finally{yo(t),zn(r),Be(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ir(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(e){let t=la(e=et(e))?e:et(e&&e.provide);const r=function qd(n){return Hd(n)?cc(void 0,n.useValue):cc(Iv(n),zd)}(e);if(!la(e)&&!0===e.multi){let i=this.records.get(t);i||(i=cc(void 0,zd,!0),i.factory=()=>Ll(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=Be(null);try{return t.value===zd&&(t.value=sT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function cT(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=et(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Gd(n){const e=bd(n),t=null!==e?e.factory:aa(n);if(null!==t)return t;if(n instanceof Y)throw new he(204,!1);if(n instanceof Function)return function oT(n){if(n.length>0)throw new he(204,!1);const t=function Lb(n){return n&&(n[Dd]||n[rv])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new he(204,!1)}function Iv(n,e,t){let r;if(la(n)){const i=et(n);return aa(i)||Gd(i)}if(Hd(n))r=()=>et(n.useValue);else if(function Hp(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ll(n.deps||[]));else if(function $p(n){return!(!n||!n.useExisting)}(n))r=()=>j(et(n.useExisting));else{const i=et(n&&(n.useClass||n.provide));if(!function aT(n){return!!n.deps}(n))return aa(i)||Gd(i);r=()=>new i(...Ll(n.deps))}return r}function cc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Gp(n,e){for(const t of n)Array.isArray(t)?Gp(t,e):t&&Ol(t)?Gp(t.\u0275providers,e):e(t)}function Ts(n,e){n instanceof ac&&n.assertNotDestroyed();const r=yo(n),i=zn(void 0);try{return e()}finally{yo(r),zn(i)}}function wv(){return void 0!==jb()||null!=function hv(){return Ya}()}function lc(n){if(!wv())throw new he(-203,!1)}const vn=0,Ie=1,We=2,Ln=3,ns=4,jr=5,Dr=6,ua=7,Wt=8,Gn=9,rs=10,rt=11,ql=12,Tv=13,hc=14,En=15,wo=16,fc=17,Co=18,pc=19,bo=20,To=21,Wd=22,ui=23,$e=25,Wl=1,Ds=7,mc=9,qn=10;var _c=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(_c||{});function or(n){return Array.isArray(n)&&"object"==typeof n[Wl]}function $r(n){return Array.isArray(n)&&!0===n[Wl]}function Qp(n){return!!(4&n.flags)}function da(n){return n.componentOffset>-1}function Kd(n){return!(1&~n.flags)}function $i(n){return!!n.template}function ha(n){return!!(512&n[We])}class Xp{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Jp(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Ar(){return Zd}function Zd(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ai),IT}function IT(){const n=eg(this),e=n?.current;if(e){const t=n.previous;if(t===Cs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ai(n,e,t,r,i){const s=this.declaredInputs[r],o=eg(n)||function wT(n,e){return n[yc]=e}(n,{previous:Cs,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Xp(u&&u.currentValue,t,c===Cs),Jp(n,e,i,t)}Ar.ngInherit=!0;const yc="__ngSimpleChanges__";function eg(n){return n[yc]||null}const As=function(n,e,t){};function yt(n){for(;Array.isArray(n);)n=n[vn];return n}function Zl(n,e){return yt(e[n])}function Qr(n,e){return yt(e[n.index])}function vc(n,e){return n.data[e]}function Zn(n,e){return n[e]}function Yr(n,e){const t=e[n];return or(t)?t:t[vn]}function ig(n){return!(128&~n[We])}function Hr(n,e){return null==e?null:n[e]}function sg(n){n[fc]=0}function og(n){1024&n[We]||(n[We]|=1024,ig(n)&&Jd(n))}function Ec(n){return!!(9216&n[We]||n[ui]?.dirty)}function ag(n){n[rs].changeDetectionScheduler?.notify(8),64&n[We]&&(n[We]|=1024),Ec(n)&&Jd(n)}function Jd(n){n[rs].changeDetectionScheduler?.notify(0);let e=p(n);for(;null!==e&&!(8192&e[We])&&(e[We]|=8192,ig(e));)e=p(e)}function eh(n,e){if(!(256&~n[We]))throw new he(911,!1);null===n[To]&&(n[To]=[]),n[To].push(e)}function p(n){const e=n[Ln];return $r(e)?e[Ln]:e}const l={lFrame:AN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let v=!1;function be(){return l.bindingsEnabled}function Me(){return null!==l.skipHydrationRootTNode}function re(){return l.lFrame.lView}function mt(){return l.lFrame.tView}function fn(n){return l.lFrame.contextLView=n,n[Wt]}function an(n){return l.lFrame.contextLView=null,n}function Ht(){let n=lg();for(;null!==n&&64===n.type;)n=n.parent;return n}function lg(){return l.lFrame.currentTNode}function Hi(n,e){const t=l.lFrame;t.currentTNode=n,t.isParent=e}function ug(){return l.lFrame.isParent}function Xl(){l.lFrame.isParent=!1}function IN(){return v}function wN(n){v=n}function Si(){const n=l.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Zs(){return l.lFrame.bindingIndex++}function ga(n){const e=l.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function p8(n,e){const t=l.lFrame;t.bindingIndex=t.bindingRootIndex=n,bT(e)}function bT(n){l.lFrame.currentDirectiveIndex=n}function DT(){return l.lFrame.currentQueryIndex}function Ov(n){l.lFrame.currentQueryIndex=n}function m8(n){const e=n[Ie];return 2===e.type?e.declTNode:1===e.type?n[jr]:null}function TN(n,e,t){if(t&bt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&bt.Host||(i=m8(s),null===i||(s=s[hc],10&i.type))););if(null===i)return!1;e=i,n=s}const r=l.lFrame=DN();return r.currentTNode=e,r.lView=n,!0}function AT(n){const e=DN(),t=n[Ie];l.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function DN(){const n=l.lFrame,e=null===n?null:n.child;return null===e?AN(n):e}function AN(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function SN(){const n=l.lFrame;return l.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const RN=SN;function ST(){const n=SN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Zr(){return l.lFrame.selectedIndex}function Jl(n){l.lFrame.selectedIndex=n}function In(){const n=l.lFrame;return vc(n.tView,n.selectedIndex)}let MN=!0;function dg(){return MN}function Do(n){MN=n}function kv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Fv(n,e,t){xN(n,e,3,t)}function Lv(n,e,t,r){(3&n[We])===t&&xN(n,e,t,r)}function RT(n,e){let t=n[We];(3&t)===e&&(t&=16383,t+=1,n[We]=t)}function xN(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[fc]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[fc]+=65536),(a<s||-1==s)&&(C8(n,t,e,c),n[fc]=(4294901760&n[fc])+c+2),c++}function NN(n,e){As(4,n,e);const t=Be(null);try{e.call(n)}finally{Be(t),As(5,n,e)}}function C8(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[We]>>14<n[fc]>>16&&(3&n[We])===e&&(n[We]+=16384,NN(a,s)):NN(a,s)}const nh=-1;class hg{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const MT={};class eu{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=xd(r);const i=this.injector.get(e,MT,r);return i!==MT||t===MT?i:this.parentInjector.get(e,t,r)}}function xT(n){return n!==nh}function fg(n){return 32767&n}function pg(n,e){let t=function A8(n){return n>>16}(n),r=e;for(;t>0;)r=r[hc],t--;return r}let NT=!0;function Vv(n){const e=NT;return NT=n,e}const kN=255,FN=5;let R8=0;const Ao={};function Uv(n,e){const t=LN(n,e);if(-1!==t)return t;const r=e[Ie];r.firstCreatePass&&(n.injectorIndex=e.length,OT(r.data,n),OT(e,null),OT(r.blueprint,null));const i=Bv(n,e),s=n.injectorIndex;if(xT(i)){const o=fg(i),a=pg(i,e),c=a[Ie].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function OT(n,e){n.push(0,0,0,0,0,0,0,0,e)}function LN(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Bv(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=zN(i),null===r)return nh;if(t++,i=i[hc],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return nh}function kT(n,e,t){!function P8(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ad)&&(r=t[Ad]),null==r&&(r=t[Ad]=R8++);const i=r&kN;e.data[n+(i>>FN)]|=1<<i}(n,e,t)}function VN(n,e,t){if(t&bt.Optional||void 0!==n)return n;Rp()}function UN(n,e,t,r){if(t&bt.Optional&&void 0===r&&(r=null),!(t&(bt.Self|bt.Host))){const i=n[Gn],s=zn(void 0);try{return i?i.get(e,r,t&bt.Optional):uv(e,r,t&bt.Optional)}finally{zn(s)}}return VN(r,0,t)}function BN(n,e,t,r=bt.Default,i){if(null!==n){if(2048&e[We]&&!(r&bt.Self)){const o=function k8(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[We]&&!(512&o[We]);){const a=jN(s,o,t,r|bt.Self,Ao);if(a!==Ao)return a;let c=s.parent;if(!c){const u=o[bo];if(u){const f=u.get(t,Ao,r);if(f!==Ao)return f}c=zN(o),o=o[hc]}s=c}return i}(n,e,t,r,Ao);if(o!==Ao)return o}const s=jN(n,e,t,r,Ao);if(s!==Ao)return s}return UN(e,t,r,i)}function jN(n,e,t,r,i){const s=function N8(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ad)?n[Ad]:void 0;return"number"==typeof e?e>=0?e&kN:O8:e}(t);if("function"==typeof s){if(!TN(e,n,r))return r&bt.Host?VN(i,0,r):UN(e,t,r,i);try{let o;if(o=s(r),null!=o||r&bt.Optional)return o;Rp()}finally{RN()}}else if("number"==typeof s){let o=null,a=LN(n,e),c=nh,u=r&bt.Host?e[En][jr]:null;for((-1===a||r&bt.SkipSelf)&&(c=-1===a?Bv(n,e):e[a+8],c!==nh&&HN(r,!1)?(o=e[Ie],a=fg(c),e=pg(c,e)):a=-1);-1!==a;){const f=e[Ie];if($N(s,a,f.data)){const m=x8(a,e,t,o,r,u);if(m!==Ao)return m}c=e[a+8],c!==nh&&HN(r,e[Ie].data[a+8]===u)&&$N(s,a,e)?(o=f,a=fg(c),e=pg(c,e)):a=-1}}return i}function x8(n,e,t,r,i,s){const o=e[Ie],a=o.data[n+8],f=jv(a,o,t,null==r?da(a)&&NT:r!=o&&!!(3&a.type),i&bt.Host&&s===a);return null!==f?tu(e,o,f,a):Ao}function jv(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,_=i?a+f:n.directiveEnd;for(let E=r?a:a+f;E<_;E++){const w=o[E];if(E<c&&t===w||E>=c&&w.type===t)return E}if(i){const E=o[c];if(E&&$i(E)&&E.type===t)return c}return null}function tu(n,e,t,r){let i=n[t];const s=e.data;if(function b8(n){return n instanceof hg}(i)){const o=i;o.resolving&&function Sd(n,e){throw e&&e.join(" > "),new he(-200,n)}(function xt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():at(n)}(s[t]));const a=Vv(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?zn(o.injectImpl):null;TN(n,r,bt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function w8(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Zd(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&zn(u),Vv(a),o.resolving=!1,RN()}}return i}function $N(n,e,t){return!!(t[e+(n>>FN)]&1<<n)}function HN(n,e){return!(n&bt.Self||n&bt.Host&&e)}class Sr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return BN(this._tNode,this._lView,e,xd(r),t)}}function O8(){return new Sr(Ht(),re())}function mr(n){return Ji(()=>{const e=n.prototype.constructor,t=e[Ks]||FT(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ks]||FT(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function FT(n){return Cd(n)?()=>{const e=FT(et(n));return e&&e()}:aa(n)}function zN(n){const e=n[Ie],t=e.type;return 2===t?e.declTNode:1===t?n[jr]:null}function QN(n,e=null,t=null,r){const i=YN(n,e,t,r);return i.resolveInjectorInitializers(),i}function YN(n,e=null,t=null,r,i=new Set){const s=[t||Nt,nT(n)];return r=r||("object"==typeof n?void 0:ir(n)),new ac(s,e||oc(),r||null,i)}class Wn{static#e=this.THROW_IF_NOT_FOUND=Fl;static#t=this.NULL=new Ld;static create(e,t){if(Array.isArray(e))return QN({name:""},t,e,"");{const r=e.name??"";return QN({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=ye({token:Wn,providedIn:"any",factory:()=>j(gv)});static#r=this.__NG_ELEMENT_ID__=-1}new Y("").__NG_ELEMENT_ID__=n=>{const e=Ht();if(null===e)throw new he(204,!1);if(2&e.type)return e.value;if(n&bt.Optional)return null;throw new he(204,!1)};function VT(n){return n.ngOriginalError}const XN=!0;let nu=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=G8;static#t=this.__NG_ENV_ID__=t=>t}return n})();class z8 extends nu{constructor(e){super(),this._lView=e}onDestroy(e){return eh(this._lView,e),()=>function cg(n,e){if(null===n[To])return;const t=n[To].indexOf(e);-1!==t&&n[To].splice(t,1)}(this._lView,e)}}function G8(){return new z8(re())}let ma=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();const Ze=class q8 extends R{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,wv()&&(this.destroyRef=W(nu,{optional:!0})??void 0,this.pendingTasks=W(ma,{optional:!0})??void 0)}emit(e){const t=Be(null);try{super.next(e)}finally{Be(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof gt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function Hv(...n){}function JN(n){let e,t;function r(){n=Hv;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function eO(n){return queueMicrotask(()=>n()),()=>{n=Hv}}const UT="isAngularZone",zv=UT+"_ID";let W8=0;class st{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=XN}=e;if(typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function Y8(n){const e=()=>{!function Q8(n){function e(){JN(()=>{n.callbackScheduled=!1,jT(n),n.isCheckStableRunning=!0,BT(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),jT(n))}(n)},t=W8++;n._inner=n._inner.fork({name:"angular",properties:{[UT]:!0,[zv]:t,[zv+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(function Z8(n){return rO(n,"__ignore_ng_zone__")}(c))return r.invokeTask(s,o,a,c);try{return tO(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),nO(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return tO(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function X8(n){return rO(n,"__scheduler_tick__")}(c)&&e(),nO(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,jT(n),BT(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(UT)}static assertInAngularZone(){if(!st.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(st.isInAngularZone())throw new he(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,K8,Hv,Hv);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const K8={};function BT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function tO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nO(n){n._nesting--,BT(n)}class $T{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function rO(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Xs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&VT(e);for(;t&&VT(t);)t=VT(t);return t||null}}const e6=new Y("",{providedIn:"root",factory:()=>{const n=W(st),e=W(Xs);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function sO(n,e){return Wy(n,e)}const _a=(sO.required=function t6(n){return Wy(Pl,n)},sO);function n6(){return sh(Ht(),re())}function sh(n,e){return new Kn(Qr(n,e))}let Kn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=n6}return n})();function oO(n){return n instanceof Kn?n.nativeElement:n}function r6(){return this._results[Symbol.iterator]()}class oh{static#e=Symbol.iterator;get changes(){return this._changes??=new Ze}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=oh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=r6)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function li(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Gb(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function _g(n){return!(128&~n.flags)}const zT=new Map;let s6=0;function GT(n){zT.delete(n[pc])}const Gv="__ngContext__";function di(n,e){or(e)?(n[Gv]=e[pc],function a6(n){zT.set(n[pc],n)}(e)):n[Gv]=e}function mO(n){return yO(n[ql])}function _O(n){return yO(n[ns])}function yO(n){for(;null!==n&&!$r(n);)n=n[ns];return n}let WT;const ch=new Y("",{providedIn:"root",factory:()=>b6}),b6="ng",DO=new Y(""),ss=new Y("",{providedIn:"platform",factory:()=>"unknown"}),T6=new Y(""),AO=new Y("",{providedIn:"root",factory:()=>function Ic(){if(void 0!==WT)return WT;if(typeof document<"u")return document;throw new he(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let SO=()=>null;function eD(n,e,t=!1){return SO(n,e,t)}const FO=new Y("",{providedIn:"root",factory:()=>!1});class $O{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wc(n){return n instanceof $O?n.changingThisBreaksApplicationSecurity:n}const u5=/^>|^->|<!--|-->|--!>|<!-$/g,d5=/(<|>)/g,h5="\u200b$1\u200b";function ik(n){return n.ownerDocument}function os(n){return n instanceof Function?n():n}function as(n){return"browser"===(n??W(Wn)).get(ss)}var Cc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cc||{});let fD;function pD(n,e){return fD(n,e)}function ph(n,e,t,r,i){if(null!=r){let s,o=!1;$r(r)?s=r:or(r)&&(o=!0,r=r[vn]);const a=yt(r);0===n&&null!==t?null==i?fk(e,t,a):iu(e,t,a,i||null,!0):1===n&&null!==t?iu(e,t,a,i||null,!0):2===n?function Sg(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function M5(n,e,t,r,i){const s=t[Ds];s!==yt(t)&&ph(e,n,r,s,i);for(let a=qn;a<t.length;a++){const c=t[a];cE(c[Ie],c,n,e,r,s)}}(e,n,s,t,i)}}function mD(n,e){return n.createComment(function ek(n){return n.replace(u5,e=>e.replace(d5,h5))}(e))}function sE(n,e,t){return n.createElement(e,t)}function uk(n,e){e[rs].changeDetectionScheduler?.notify(9),cE(n,e,e[rt],2,null,null)}function dk(n,e){const t=n[mc],r=e[Ln];(or(r)||e[En]!==r[Ln][En])&&(n[We]|=_c.HasTransplantedViews),null===t?n[mc]=[e]:t.push(e)}function _D(n,e){const t=n[mc],r=t.indexOf(e);t.splice(r,1)}function Ag(n,e){if(n.length<=qn)return;const t=qn+e,r=n[t];if(r){const i=r[wo];null!==i&&i!==n&&_D(i,r),e>0&&(n[t-1][ns]=r[ns]);const s=ca(n,qn+e);!function C5(n,e){uk(n,e),e[vn]=null,e[jr]=null}(r[Ie],r);const o=s[Co];null!==o&&o.detachView(s[Ie]),r[Ln]=null,r[ns]=null,r[We]&=-129}return r}function oE(n,e){if(!(256&e[We])){const t=e[rt];t.destroyNode&&cE(n,e,t,3,null,null),function T5(n){let e=n[ql];if(!e)return yD(n[Ie],n);for(;e;){let t=null;if(or(e))t=e[ql];else{const r=e[qn];r&&(t=r)}if(!t){for(;e&&!e[ns]&&e!==n;)or(e)&&yD(e[Ie],e),e=e[Ln];null===e&&(e=n),or(e)&&yD(e[Ie],e),t=e&&e[ns]}e=t}}(e)}}function yD(n,e){if(256&e[We])return;const t=Be(null);try{e[We]&=-129,e[We]|=256,e[ui]&&wr(e[ui]),function S5(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof hg)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];As(4,a,c);try{c.call(a)}finally{As(5,a,c)}}else{As(4,i,s);try{s.call(i)}finally{As(5,i,s)}}}}}(n,e),function A5(n,e){const t=n.cleanup,r=e[ua];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ua]=null);const i=e[To];if(null!==i){e[To]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ie].type&&e[rt].destroy();const r=e[wo];if(null!==r&&$r(e[Ln])){r!==e[Ln]&&_D(r,e);const i=e[Co];null!==i&&i.detachView(n)}GT(e)}finally{Be(t)}}function vD(n,e,t){return function hk(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[vn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===ts.None||s===ts.Emulated)return null}return Qr(r,t)}}(n,e.parent,t)}function iu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function fk(n,e,t){n.appendChild(e,t)}function pk(n,e,t,r,i){null!==r?iu(n,e,t,r,i):fk(n,e,t)}function ED(n,e){return n.parentNode(e)}function gk(n,e,t){return _k(n,e,t)}let ID,_k=function mk(n,e,t){return 40&n.type?Qr(n,t):null};function aE(n,e,t,r){const i=vD(n,r,e),s=e[rt],a=gk(r.parent||e[jr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)pk(s,i,t[c],a,!1);else pk(s,i,t,a,!1);void 0!==ID&&ID(s,r,e,t,i)}function su(n,e){if(null!==e){const t=e.type;if(3&t)return Qr(e,n);if(4&t)return wD(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return su(n,r);{const i=n[e.index];return $r(i)?wD(-1,i):yt(i)}}if(128&t)return su(n,e.next);if(32&t)return pD(e,n)()||yt(n[e.index]);{const r=vk(n,e);return null!==r?Array.isArray(r)?r[0]:su(p(n[En]),r):su(n,e.next)}}return null}function vk(n,e){return null!==e?n[En][jr].projection[e.projection]:null}function wD(n,e){const t=qn+n+1;if(t<e.length){const r=e[t],i=r[Ie].firstChild;if(null!==i)return su(r,i)}return e[Ds]}function CD(n,e,t,r,i,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],c=t.type;if(o&&0===e&&(a&&di(yt(a),r),t.flags|=2),32&~t.flags)if(8&c)CD(n,e,t.child,r,i,s,!1),ph(e,n,i,a,s);else if(32&c){const u=pD(t,r);let f;for(;f=u();)ph(e,n,i,f,s);ph(e,n,i,a,s)}else 16&c?Ik(n,e,r,t,i,s):ph(e,n,i,a,s);t=o?t.projectionNext:t.next}}function cE(n,e,t,r,i,s){CD(t,r,n.firstChild,e,i,s,!1)}function Ik(n,e,t,r,i,s){const o=t[En],c=o[jr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)ph(e,n,i,c[u],s);else{let u=c;const f=o[Ln];_g(r)&&(u.flags|=128),CD(n,e,u,f,i,s,!0)}}function wk(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Ck(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Ul(n,e,r),null!==i&&wk(n,e,i),null!==s&&function N5(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const ht={};function Ve(n=1){bk(mt(),re(),Zr()+n,!1)}function bk(n,e,t,r){if(!r)if(3&~e[We]){const s=n.preOrderHooks;null!==s&&Lv(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Fv(e,s,t)}Jl(t)}function ie(n,e=bt.Default){const t=re();return null===t?j(n,e):BN(Ht(),t,et(n),e)}function Dk(n,e,t,r,i,s){const o=Be(null);try{let a=null;i&bs.SignalBased&&(a=e[r][Bt]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&bs.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):Jp(e,a,r,s)}finally{Be(o)}}function lE(n,e,t,r,i,s,o,a,c,u,f){const m=e.blueprint.slice();return m[vn]=i,m[We]=204|r,(null!==u||n&&2048&n[We])&&(m[We]|=2048),sg(m),m[Ln]=m[hc]=n,m[Wt]=t,m[rs]=o||n&&n[rs],m[rt]=a||n&&n[rt],m[Gn]=c||n&&n[Gn]||null,m[jr]=s,m[pc]=function o6(){return s6++}(),m[Dr]=f,m[bo]=u,m[En]=2==e.type?n[En]:m,m}function ou(n,e,t,r,i){let s=n.data[e];if(null===s)s=function bD(n,e,t,r,i){const s=lg(),o=ug(),c=n.data[e]=function j5(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Me()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function f8(){return l.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function fa(){const n=l.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Hi(s,!0),s}function Rg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ak(n,e,t,r,i){const s=Zr(),o=2&r;try{Jl(-1),o&&e.length>$e&&bk(n,e,$e,!1),As(o?2:0,i),t(r,i)}finally{Jl(s),As(o?3:1,i)}}function TD(n,e,t){if(Qp(e)){const r=Be(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Be(r)}}}function DD(n,e,t){be()&&(function K5(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;da(t)&&function t9(n,e,t){const r=Qr(e,n),i=Sk(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=uE(n,lE(n,i,null,o,r,e,null,n[rs].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Uv(t,e),di(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=tu(e,n,a,t);di(u,e),null!==o&&n9(0,a-i,u,c,0,o),$i(c)&&(Yr(t.index,e)[Wt]=tu(e,n,a,t))}}(n,e,t,Qr(t,e)),!(64&~t.flags)&&Nk(n,e,t))}function AD(n,e,t=Qr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function Sk(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=SD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function SD(n,e,t,r,i,s,o,a,c,u,f){const m=$e+r,_=m+i,E=function k5(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ht);return t}(m,_),w="function"==typeof u?u():u;return E[Ie]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:f}}let Rk=()=>null;function Pk(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,c=bs.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(null!==i){if(!i.hasOwnProperty(s))continue;u=i[s]}0===n?Mk(r,t,u,a,c):Mk(r,t,u,a)}return r}function Mk(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function Gi(n,e,t,r,i,s,o,a){const c=Qr(e,t);let f,u=e.inputs;!a&&null!=u&&(f=u[r])?(ND(n,t,f,r,i),da(e)&&function z5(n,e){const t=Yr(e,n);16&t[We]||(t[We]|=64)}(t,e.index)):3&e.type&&(r=function H5(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function RD(n,e,t,r){if(be()){const i=null===r?null:{"":-1},s=function Y5(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(_v(e,o.selectors,!1))if(r||(r=[]),$i(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),PD(n,e,a.length)}else r.unshift(o),PD(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&xk(n,e,t,o,i,a),i&&function Z5(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new he(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Qs(t.mergedAttrs,t.attrs)}function xk(n,e,t,r,i,s){for(let u=0;u<r.length;u++)kT(Uv(t,e),n,r[u].type);!function J5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,c=Rg(n,e,r.length,null);for(let u=0;u<r.length;u++){const f=r[u];t.mergedAttrs=Qs(t.mergedAttrs,f.hostAttrs),e9(n,t,e,c,f),X5(c,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function $5(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],_=t?t.get(m):null,w=_?_.outputs:null;c=Pk(0,m.inputs,f,c,_?_.inputs:null),u=Pk(1,m.outputs,f,u,w);const b=null===c||null===o||Fp(e)?null:r9(c,f,o);a.push(b)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function Nk(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function g8(){return l.lFrame.currentDirectiveIndex}();try{Jl(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];bT(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Q5(c,u)}}finally{Jl(-1),bT(o)}}function Q5(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function PD(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function X5(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;$i(e)&&(t[""]=n)}}function e9(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=aa(i.type)),o=new hg(s,$i(i),ie);n.blueprint[r]=o,t[r]=o,function q5(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function W5(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Rg(n,t,i.hostVars,ht),i)}function So(n,e,t,r,i,s){const o=Qr(n,e);!function MD(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?at(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[rt],o,s,n.value,t,r,i)}function n9(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Dk(r,t,o[a++],o[a++],o[a++],o[a++])}function r9(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Ok(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function kk(n,e){const t=n.contentQueries;if(null!==t){const r=Be(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];Ov(t[i]),a.contentQueries(2,e[o],o)}}}finally{Be(r)}}}function uE(n,e){return n[ql]?n[Tv][ns]=e:n[ql]=e,n[Tv]=e,e}function xD(n,e,t){Ov(0);const r=Be(null);try{e(n,t)}finally{Be(r)}}function Fk(n){return n[ua]??=[]}function Lk(n){return n.cleanup??=[]}function dE(n,e){const t=n[Gn],r=t?t.get(Xs,null):null;r&&r.handleError(e)}function ND(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=t[s++];Dk(n.data[o],e[o],r,a,c,i)}}function i9(n,e){const t=Yr(e,n),r=t[Ie];!function s9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[vn];null!==i&&null===t[Dr]&&(t[Dr]=eD(i,t[Gn])),OD(r,t,t[Wt])}function OD(n,e,t){AT(e);try{const r=n.viewQuery;null!==r&&xD(1,r,t);const i=n.template;null!==i&&Ak(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Co]?.finishViewCreation(n),n.staticContentQueries&&kk(n,e),n.staticViewQueries&&xD(2,n.viewQuery,t);const s=n.components;null!==s&&function o9(n,e){for(let t=0;t<e.length;t++)i9(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[We]&=-5,ST()}}function gh(n,e,t,r){const i=Be(null);try{const s=e.tView,c=lE(n,s,t,4096&n[We]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[wo]=n[e.index];const f=n[Co];return null!==f&&(c[Co]=f.createEmbeddedView(s)),OD(s,c,t),c}finally{Be(i)}}function Uk(n,e){const t=qn+e;if(t<n.length)return n[t]}function au(n,e){return!e||null===e.firstChild||_g(n)}function mh(n,e,t,r=!0){const i=e[Ie];if(function D5(n,e,t,r){const i=qn+r,s=t.length;r>0&&(t[i-1][ns]=e),r<s-qn?(e[ns]=t[i],fv(t,qn+r,e)):(t.push(e),e[ns]=null),e[Ln]=t;const o=e[wo];null!==o&&t!==o&&dk(o,e);const a=e[Co];null!==a&&a.insertView(n),ag(e),e[We]|=128}(i,e,n,t),r){const o=wD(t,n),a=e[rt],c=ED(a,n[Ds]);null!==c&&function b5(n,e,t,r,i,s){r[vn]=i,r[jr]=e,cE(n,r,t,1,i,s)}(i,n[jr],a,e,c,o)}const s=e[Dr];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function kD(n,e){const t=Ag(n,e);return void 0!==t&&oE(t[Ie],t),t}function Pg(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&r.push(yt(s)),$r(s)&&Bk(s,r);const o=t.type;if(8&o)Pg(n,e,t.child,r);else if(32&o){const a=pD(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=vk(e,t);if(Array.isArray(a))r.push(...a);else{const c=p(e[En]);Pg(c[Ie],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Bk(n,e){for(let t=qn;t<n.length;t++){const r=n[t],i=r[Ie].firstChild;null!==i&&Pg(r[Ie],r,i,e)}n[Ds]!==n[vn]&&e.push(n[Ds])}let jk=[];const u9={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Jd(n.lView)},consumerOnSignalRead(){this.lView[ui]=this}},h9={...fe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=p(n.lView);for(;e&&!$k(e[Ie]);)e=p(e);e&&og(e)},consumerOnSignalRead(){this.lView[ui]=this}};function $k(n){return 2!==n.type}const f9=100;function hE(n,e=!0,t=0){const r=n[rs],i=r.rendererFactory;i.begin?.();try{!function p9(n,e){const t=IN();try{wN(!0),FD(n,e);let r=0;for(;Ec(n);){if(r===f9)throw new he(103,!1);r++,FD(n,1)}}finally{wN(t)}}(n,t)}catch(o){throw e&&dE(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function g9(n,e,t,r){const i=e[We];if(!(256&~i))return;e[rs].inlineEffectRunner?.flush(),AT(e);let a=!0,c=null,u=null;$k(n)?(u=function a9(n){return n[ui]??function c9(n){const e=jk.pop()??Object.create(u9);return e.lView=n,e}(n)}(e),c=it(u)):null===function An(){return Fe}()?(a=!1,u=function d9(n){const e=n[ui]??Object.create(h9);return e.lView=n,e}(e),c=it(u)):e[ui]&&(wr(e[ui]),e[ui]=null);try{sg(e),function CN(n){return l.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Ak(n,e,t,2,r);const f=!(3&~i);if(f){const E=n.preOrderCheckHooks;null!==E&&Fv(e,E,null)}else{const E=n.preOrderHooks;null!==E&&Lv(e,E,0,null),RT(e,0)}if(function m9(n){for(let e=mO(n);null!==e;e=_O(e)){if(!(e[We]&_c.HasTransplantedViews))continue;const t=e[mc];for(let r=0;r<t.length;r++)og(t[r])}}(e),zk(e,0),null!==n.contentQueries&&kk(n,e),f){const E=n.contentCheckHooks;null!==E&&Fv(e,E)}else{const E=n.contentHooks;null!==E&&Lv(e,E,1),RT(e,1)}!function O5(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Jl(~i);else{const s=i,o=t[++r],a=t[++r];p8(o,s),a(2,e[s])}}}finally{Jl(-1)}}(n,e);const m=n.components;null!==m&&qk(e,m,0);const _=n.viewQuery;if(null!==_&&xD(2,_,r),f){const E=n.viewCheckHooks;null!==E&&Fv(e,E)}else{const E=n.viewHooks;null!==E&&Lv(e,E,2),RT(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Wd]){for(const E of e[Wd])E();e[Wd]=null}e[We]&=-73}catch(f){throw Jd(e),f}finally{null!==u&&(It(u,c),a&&function l9(n){n.lView[ui]!==n&&(n.lView=null,jk.push(n))}(u)),ST()}}function zk(n,e){for(let t=mO(n);null!==t;t=_O(t))for(let r=qn;r<t.length;r++)Gk(t[r],e)}function _9(n,e,t){Gk(Yr(e,n),t)}function Gk(n,e){ig(n)&&FD(n,e)}function FD(n,e){const r=n[Ie],i=n[We],s=n[ui];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!tr(s)),o||=!1,s&&(s.dirty=!1),n[We]&=-9217,o)g9(r,n,r.template,n[Wt]);else if(8192&i){zk(n,1);const a=r.components;null!==a&&qk(n,a,1)}}function qk(n,e,t){for(let r=0;r<e.length;r++)_9(n,e[r],t)}function Mg(n,e){const t=IN()?64:1088;for(n[rs].changeDetectionScheduler?.notify(e);n;){n[We]|=t;const r=p(n);if(ha(n)&&!r)return n;n=r}return null}class xg{get rootNodes(){const e=this._lView,t=e[Ie];return Pg(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wt]}set context(e){this._lView[Wt]=e}get destroyed(){return!(256&~this._lView[We])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ln];if($r(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Ag(e,r),ca(t,r))}this._attachedToViewContainer=!1}oE(this._lView[Ie],this._lView)}onDestroy(e){eh(this._lView,e)}markForCheck(){Mg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[We]&=-129}reattach(){ag(this._lView),this._lView[We]|=128}detectChanges(){this._lView[We]|=1024,hE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=ha(this._lView),t=this._lView[wo];null!==t&&!e&&_D(t,this._lView),uk(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=e;const t=ha(this._lView),r=this._lView[wo];null!==r&&!t&&dk(r,this._lView),ag(this._lView)}}let Ss=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=E9}return n})();const y9=Ss,v9=class extends y9{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=gh(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new xg(i)}};function E9(){return fE(Ht(),re())}function fE(n,e){return 4&n.type?new v9(e,n,sh(n,e)):null}let fF=()=>null;function lu(n,e){return fF(n,e)}class yh{}const Bg=new Y("",{providedIn:"root",factory:()=>!1}),pF=new Y(""),WD=new Y("");class hK{}class gF{}class pK{resolveComponentFactory(e){throw function fK(n){const e=Error(`No component factory found for ${ir(n)}.`);return e.ngComponent=n,e}(e)}}class vh{static#e=this.NULL=new pK}class KD{}let Ro=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function gK(){const n=re(),t=Yr(Ht().index,n);return(or(t)?t:n)[rt]}()}return n})(),mK=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>null})}return n})();function EE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=xl(i,a):2==s&&(r=xl(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class vF extends vh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=_t(e);return new Hg(t,this.ngModule)}}function EF(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;t.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:bs.None)&bs.SignalBased)}:{propName:o,templateName:r})}return t}class Hg extends gF{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=EF(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return EF(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Xb(n){return n.map(Bp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=Be(null);try{let o=(i=i||this.ngModule)instanceof Tr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new eu(e,o):e,c=a.get(KD,null);if(null===c)throw new he(407,!1);const m={rendererFactory:c,sanitizer:a.get(mK,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(yh,null)},_=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",w=r?function F5(n,e,t,r){const s=r.get(FO,!1)||t===ts.ShadowDom,o=n.selectRootElement(e,s);return function L5(n){Rk(n)}(o),o}(_,r,this.componentDef.encapsulation,a):sE(_,E,function vK(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E));let b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let D=null;null!==w&&(D=eD(w,a,!0));const k=SD(0,null,null,1,0,null,null,null,null,null,null),x=lE(null,k,null,b,null,null,m,_,a,null,D);AT(x);let V,J,me=null;try{const Ee=this.componentDef;let F,S=null;Ee.findHostDirectiveDefs?(F=[],S=new Map,Ee.findHostDirectiveDefs(Ee,F,S),F.push(Ee)):F=[Ee];const O=function IK(n,e){const t=n[Ie],r=$e;return n[r]=e,ou(t,r,2,"#host",null)}(x,w);me=function wK(n,e,t,r,i,s,o){const a=i[Ie];!function CK(n,e,t,r){for(const i of n)e.mergedAttrs=Qs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(EE(e,e.mergedAttrs,!0),null!==t&&Ck(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=eD(e,i[Gn]));const u=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=lE(i,Sk(t),null,f,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&PD(a,n,r.length-1),uE(i,m),i[n.index]=m}(O,w,Ee,F,x,m,_),J=vc(k,$e),w&&function TK(n,e,t,r){if(r)Ul(n,t,["ng-version","18.2.4"]);else{const{attrs:i,classes:s}=function Bl(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ji(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Ul(n,t,i),s&&s.length>0&&wk(n,t,s.join(" "))}}(_,Ee,w,r),void 0!==t&&function DK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(J,this.ngContentSelectors,t),V=function bK(n,e,t,r,i,s){const o=Ht(),a=i[Ie],c=Qr(o,i);xk(a,i,o,t,null,r);for(let f=0;f<t.length;f++)di(tu(i,a,o.directiveStart+f,o),i);Nk(a,i,o),c&&di(c,i);const u=tu(i,a,o.directiveStart+o.componentOffset,o);if(n[Wt]=i[Wt]=u,null!==s)for(const f of s)f(u,e);return TD(a,o,i),u}(me,Ee,F,S,x,[AK]),OD(k,x,null)}catch(Ee){throw null!==me&&GT(me),GT(x),Ee}finally{ST()}return new EK(this.componentType,V,sh(J,x),x,J)}finally{Be(s)}}}class EK extends hK{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new xg(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;ND(s[Ie],s,i,e,t),this.previousInputValues.set(e,t),Mg(Yr(this._tNode.index,s),1)}}get injector(){return new Sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function AK(){const n=Ht();kv(re()[Ie],n)}let cs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=SK}return n})();function SK(){return CF(Ht(),re())}const RK=cs,IF=class extends RK{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return sh(this._hostTNode,this._hostLView)}get injector(){return new Sr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Bv(this._hostTNode,this._hostLView);if(xT(e)){const t=pg(e,this._hostLView),r=fg(e);return new Sr(t[Ie].data[r+8],t)}return new Sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=wF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-qn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=lu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,au(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function Gl(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const c=o?e:new Hg(_t(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const b=(o?u:this.parentInjector).get(Tr,null);b&&(s=b)}const f=_t(c.componentType??{}),m=lu(this._lContainer,f?.id??null),E=c.create(u,i,m?.firstChild??null,s);return this.insertImpl(E.hostView,a,au(this._hostTNode,m)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function Ys(n){return $r(n[Ln])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[Ln],u=new IF(c,c[jr],c[Ln]);u.detach(u.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return mh(o,i,s,r),e.attachToViewContainerRef(),fv(ZD(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=wF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ag(this._lContainer,t);r&&(ca(ZD(this._lContainer),t),oE(r[Ie],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ag(this._lContainer,t);return r&&null!=ca(ZD(this._lContainer),t)?new xg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function wF(n){return n[8]}function ZD(n){return n[8]||(n[8]=[])}function CF(n,e){let t;const r=e[n.index];return $r(r)?t=r:(t=Ok(r,e,null,n),e[n.index]=t,uE(e,t)),bF(t,e,n,r),new IF(t,n,e)}let bF=function DF(n,e,t,r){if(n[Ds])return;let i;i=8&t.type?yt(r):function PK(n,e){const t=n[rt],r=t.createComment(""),i=Qr(e,n);return iu(t,ED(t,i),r,function R5(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ds]=i},XD=()=>!1;class JD{constructor(e){this.queryList=e,this.matches=null}clone(){return new JD(this.queryList)}setDirty(){this.queryList.setDirty()}}class eA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new eA(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==sA(e,t).matches&&this.queries[t].setDirty()}}class AF{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function VK(n){return n.split(",").map(e=>e.trim())}(e):e}}class tA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new tA(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class nA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new nA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,OK(t,s)),this.matchTNodeWithReadOption(e,t,jv(t,e,s,!1,!1))}else r===Ss?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jv(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Kn||i===cs||i===Ss&&4&t.type)this.addMatch(t.index,-2);else{const s=jv(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function OK(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function FK(n,e,t,r){return-1===t?function kK(n,e){return 11&n.type?sh(n,e):4&n.type?fE(n,e):null}(e,n):-2===t?function LK(n,e,t){return t===Kn?sh(e,n):t===Ss?fE(e,n):t===cs?CF(e,n):void 0}(n,e,r):tu(n,n[Ie],t,e)}function SF(n,e,t,r){const i=e[Co].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const u=o[c];a.push(u<0?null:FK(e,s[u],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function rA(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=SF(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const u=s[a+1],f=e[-c];for(let m=qn;m<f.length;m++){const _=f[m];_[wo]===_[Ln]&&rA(_[Ie],_,u,r)}if(null!==f[mc]){const m=f[mc];for(let _=0;_<m.length;_++){const E=m[_];rA(E[Ie],E,u,r)}}}}}return r}function PF(n,e,t){const r=mt();return r.firstCreatePass&&(function xF(n,e,t){null===n.queries&&(n.queries=new tA),n.queries.track(new nA(e,t))}(r,new AF(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),function RF(n,e,t){const r=new oh(!(4&~t));return function B5(n,e,t,r){const i=Fk(e);i.push(t),n.firstCreatePass&&Lk(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Co]??=new eA).queries.push(new JD(r))-1}(r,re(),e)}function sA(n,e){return n.queries.getByIndex(e)}function NF(n,e){const t=n[Ie],r=sA(t,e);return r.crossesNgTemplate?rA(t,n,e,[]):SF(t,n,r,e)}const OF=new Set;function Ri(n){OF.has(n)||(OF.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Js(n,e){Ri("NgSignals");const t=function ee(n){const e=Object.create(Dt);e.value=n;const t=()=>(ve(e),e.value);return t[Bt]=e,t}(n),r=t[Bt];return e?.equal&&(r.equal=e.equal),t.set=i=>we(r,i),t.update=i=>function ue(n,e){hr()||Ko(),we(n,e(n.value))}(r,i),t.asReadonly=kF.bind(t),t}function kF(){const n=this[Bt];if(void 0===n.readonlyFn){const e=()=>this();e[Bt]=n,n.readonlyFn=e}return n.readonlyFn}function nn(n){let e=function WF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if($i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new he(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=CE(n.inputs),o.inputTransforms=CE(n.inputTransforms),o.declaredInputs=CE(n.declaredInputs),o.outputs=CE(n.outputs);const a=i.hostBindings;a&&JK(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&ZK(n,c),u&&XK(n,u),QK(n,i),Cp(n.outputs,i.outputs),$i(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===nn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function YK(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qs(i.hostAttrs,t=Qs(t,i.hostAttrs))}}(r)}function QK(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function CE(n){return n===Cs?{}:n===Nt?[]:n}function ZK(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function XK(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function JK(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Dc(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class uu{}class ZF{}class aA extends uu{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vF(this);const s=gr(e);this._bootstrapComponents=os(s.bootstrap),this._r3Injector=YN(e,t,[{provide:uu,useValue:this},{provide:vh,useValue:this.componentFactoryResolver},...r],ir(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class cA extends ZF{constructor(e){super(),this.moduleType=e}create(e){return new aA(this.moduleType,e,[])}}class XF extends uu{constructor(e){super(),this.componentFactoryResolver=new vF(this),this.instance=null;const t=new ac([...e.providers,{provide:uu,useValue:this},{provide:vh,useValue:this.componentFactoryResolver}],e.parent||oc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function bE(n,e,t=null){return new XF({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function lA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Po(n,e,t){return n[e]=t}function ar(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function du(n,e,t,r){const i=ar(n,e,t);return ar(n,e+1,r)||i}function qg(n,e,t,r,i,s,o,a,c,u){const f=t+$e,m=e.firstCreatePass?function d7(n,e,t,r,i,s,o,a,c){const u=e.consts,f=ou(e,n,4,o||null,a||null);RD(e,t,f,Hr(u,c)),kv(e,f);const m=f.tView=SD(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,e,n,r,i,s,o,a,c):e.data[f];Hi(m,!1);const _=JF(e,n,m,t);dg()&&aE(e,n,_,m),di(_,n);const E=Ok(_,n,_,m);return n[f]=E,uE(n,E),function TF(n,e,t){return XD(n,e,t)}(E,m,n),Kd(m)&&DD(e,n,m),null!=c&&AD(n,m,u),m}function hi(n,e,t,r,i,s,o,a){const c=re(),u=mt();return qg(c,u,n,e,t,r,i,Hr(u.consts,s),o,a),hi}let JF=function e1(n,e,t,r){return Do(!0),e[rt].createComment("")};var Ch=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ch||{});let a1=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new n})}return n})();class Qg{constructor(){this.ngZone=W(st),this.scheduler=W(yh),this.errorHandler=W(Xs,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static#e=this.PHASES=[Ch.EarlyRead,Ch.Write,Ch.MixedReadWrite,Ch.Read];execute(){this.executing=!0;for(const e of Qg.PHASES)for(const t of this.sequences)if(!t.erroredOrDestroyed&&t.hooks[e])try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static#t=this.\u0275prov=ye({token:Qg,providedIn:"root",factory:()=>new Qg})}class g7{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}}function hu(n,e){!e?.injector&&lc();const t=e?.injector??W(Wn);return as(t)?(Ri("NgAfterNextRender"),l1(n,t,e,!0)):u1}function l1(n,e,t,r){const i=e.get(a1);i.impl??=e.get(Qg);const o=new g7(i.impl,function m7(n,e){if(n instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[e]=n,t}return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}(n,t?.phase??Ch.MixedReadWrite),r,e.get(nu));return i.impl.register(o),o}const u1={destroy(){}};function eo(n,e,t,r){const i=re();return ar(i,Zs(),e)&&(mt(),So(In(),i,n,e,t,r)),eo}function Ph(n,e,t,r){return ar(n,Zs(),t)?e+at(t)+r:ht}function xE(n,e){return n<<17|e<<2}function Sc(n){return n>>17&32767}function EA(n){return 2|n}function pu(n){return(131068&n)>>2}function IA(n,e){return-131069&n|e<<2}function wA(n){return 1|n}function F1(n,e,t,r){const i=n[t+1],s=null===e;let o=r?Sc(i):pu(i),a=!1;for(;0!==o&&(!1===a||s);){const u=n[o+1];X7(n[o],e)&&(a=!0,n[o+1]=r?wA(u):EA(u)),o=r?Sc(u):pu(u)}a&&(n[t+1]=r?EA(i):wA(i))}function X7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&nc(n,e)>=0}const Rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function L1(n){return n.substring(Rr.key,Rr.keyEnd)}function V1(n,e){const t=Rr.textEnd;return t===e?-1:(e=Rr.keyEnd=function nQ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Rr.key=e,t),Vh(n,e,t))}function Vh(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function ot(n,e,t){const r=re();return ar(r,Zs(),e)&&Gi(mt(),In(),r,n,e,r[rt],t,!1),ot}function CA(n,e,t,r,i){const o=i?"class":"style";ND(n,t,e.inputs[o],o,r)}function bA(n,e,t){return to(n,e,t,!1),bA}function Rc(n,e){return to(n,e,null,!0),Rc}function Zg(n){no(dQ,xo,n,!0)}function xo(n,e){for(let t=function eQ(n){return function B1(n){Rr.key=0,Rr.keyEnd=0,Rr.value=0,Rr.valueEnd=0,Rr.textEnd=n.length}(n),V1(n,Vh(n,0,Rr.textEnd))}(e);t>=0;t=V1(e,t))Di(n,L1(e),!0)}function to(n,e,t,r){const i=re(),s=mt(),o=ga(2);s.firstUpdatePass&&z1(s,n,o,r),e!==ht&&ar(i,o,e)&&q1(s,s.data[Zr()],i,i[rt],n,i[o+1]=function fQ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ir(wc(n)))),n}(e,t),r,o)}function no(n,e,t,r){const i=mt(),s=ga(2);i.firstUpdatePass&&z1(i,null,s,r);const o=re();if(t!==ht&&ar(o,s,t)){const a=i.data[Zr()];if(K1(a,r)&&!H1(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=xl(c,t||"")),CA(i,a,o,t,r)}else!function hQ(n,e,t,r,i,s,o,a){i===ht&&(i=Nt);let c=0,u=0,f=0<i.length?i[0]:null,m=0<s.length?s[0]:null;for(;null!==f||null!==m;){const _=c<i.length?i[c+1]:void 0,E=u<s.length?s[u+1]:void 0;let b,w=null;f===m?(c+=2,u+=2,_!==E&&(w=m,b=E)):null===m||null!==f&&f<m?(c+=2,w=f):(u+=2,w=m,b=E),null!==w&&q1(n,e,t,r,w,b,o,a),f=c<i.length?i[c]:null,m=u<s.length?s[u]:null}}(i,a,o,o[rt],o[s+1],o[s+1]=function uQ(n,e,t){if(null==t||""===t)return Nt;const r=[],i=wc(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}function H1(n,e){return e>=n.expandoStartIndex}function z1(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Zr()],o=H1(n,t);K1(s,r)&&null===e&&!o&&(e=!1),e=function oQ(n,e,t,r){const i=function TT(n){const e=l.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Xg(t=TA(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=TA(i,n,e,t,r),null===s){let c=function aQ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==pu(r))return n[Sc(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=TA(null,n,e,c[1],r),c=Xg(c,e.attrs,r),function cQ(n,e,t,r){n[Sc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function lQ(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Xg(r,n[s].hostAttrs,t);return Xg(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Y7(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Sc(o),c=pu(o);n[r]=t;let f,u=!1;if(Array.isArray(t)?(f=t[1],(null===f||nc(t,f)>0)&&(u=!0)):f=t,i)if(0!==c){const _=Sc(n[a+1]);n[r+1]=xE(_,a),0!==_&&(n[_+1]=IA(n[_+1],r)),n[a+1]=function K7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=xE(a,0),0!==a&&(n[a+1]=IA(n[a+1],r)),a=r;else n[r+1]=xE(c,0),0===a?a=r:n[c+1]=IA(n[c+1],r),c=r;u&&(n[r+1]=EA(n[r+1])),F1(n,f,r,!0),F1(n,f,r,!1),function Z7(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&nc(s,e)>=0&&(t[r+1]=wA(t[r+1]))}(e,f,n,r,s),o=xE(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function TA(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Xg(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Xg(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Di(n,o,!!t||e[++s]))}return void 0===n?null:n}function dQ(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Di(n,r,t)}function q1(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],f=function Q7(n){return!(1&~n)}(u)?W1(c,e,t,i,pu(u),o):void 0;NE(f)||(NE(s)||function W7(n){return!(2&~n)}(u)&&(s=W1(c,null,t,i,a,o)),function x5(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Cc.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cc.Important),n.setStyle(t,r,i,s))}}(r,o,Zl(Zr(),t),i,s))}function W1(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),f=u?c[1]:c,m=null===f;let _=t[i+1];_===ht&&(_=m?Nt:void 0);let E=m?kp(_,r):f===r?_:void 0;if(u&&!NE(E)&&(E=kp(c,r)),NE(E)&&(a=E,o))return a;const w=n[i+1];i=o?Sc(w):pu(w)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=kp(c,r))}return a}function NE(n){return void 0!==n}function K1(n,e){return!!(n.flags&(e?8:16))}class CQ{destroy(e){}updateValue(e,t){}swap(e,t){const r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){const o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}}function DA(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function AA(n,e,t,r){return!(void 0===e||!e.has(r)||(n.attach(t,e.get(r)),e.delete(r),0))}function Y1(n,e,t,r,i){if(AA(n,e,r,t(r,i)))n.updateValue(r,i);else{const s=n.create(r,i);n.attach(r,s)}}function Z1(n,e,t,r){const i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}class X1{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const t=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}}function Ps(n,e){Ri("NgControlFlow");const t=re(),r=Zs(),i=t[r]!==ht?t[r]:-1,s=-1!==i?OE(t,$e+i):void 0;if(ar(t,r,n)){const a=Be(null);try{if(void 0!==s&&kD(s,0),-1!==n){const c=$e+n,u=OE(t,c),f=SA(t[Ie],c),m=lu(u,f.tView.ssrId);mh(u,gh(t,f,e,{dehydratedView:m}),0,au(f,m))}}finally{Be(a)}}else if(void 0!==s){const a=Uk(s,0);void 0!==a&&(a[Wt]=e)}}class TQ{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-qn}}function J1(n,e){return e}class AQ{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}}function Pc(n,e,t,r,i,s,o,a,c,u,f,m,_){Ri("NgControlFlow");const E=re(),w=mt(),b=void 0!==c,D=re(),k=a?o.bind(D[En][Wt]):o,x=new AQ(b,k);D[$e+n]=x,qg(E,w,n+1,e,t,r,i,Hr(w.consts,s)),b&&qg(E,w,n+2,c,u,f,m,Hr(w.consts,_))}class SQ extends CQ{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-qn}at(e){return this.getLView(e)[Wt].$implicit}attach(e,t){const r=t[Dr];this.needsIndexUpdate||=e!==this.length,mh(this.lContainer,t,e,au(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function RQ(n,e){return Ag(n,e)}(this.lContainer,e)}create(e,t){const r=lu(this.lContainer,this.templateTNode.tView.ssrId),i=gh(this.hostLView,this.templateTNode,new TQ(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){oE(e[Ie],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Wt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Wt].$index=e}getLView(e){return function PQ(n,e){return Uk(n,e)}(this.lContainer,e)}}function Mc(n){const e=Be(null),t=Zr();try{const r=re(),i=r[Ie],s=r[t],o=t+1,a=OE(r,o);if(void 0===s.liveCollection){const u=SA(i,o);s.liveCollection=new SQ(a,r,u)}else s.liveCollection.reset();const c=s.liveCollection;if(function bQ(n,e,t){let r,i,s=0,o=n.length-1;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){const u=n.at(s),f=e[s],m=DA(s,u,s,f,t);if(0!==m){m<0&&n.updateValue(s,f),s++;continue}const _=n.at(o),E=e[c],w=DA(o,_,c,E,t);if(0!==w){w<0&&n.updateValue(o,E),o--,c--;continue}const b=t(s,u),D=t(o,_),k=t(s,f);if(Object.is(k,D)){const x=t(c,E);Object.is(x,b)?(n.swap(s,o),n.updateValue(o,E),c--,o--):n.move(o,s),n.updateValue(s,f),s++}else if(r??=new X1,i??=Z1(n,s,o,t),AA(n,r,s,k))n.updateValue(s,f),s++,o++;else if(i.has(k))r.set(b,n.detach(s)),o--;else{const x=n.create(s,e[s]);n.attach(s,x),s++,o++}}for(;s<=c;)Y1(n,r,t,s,e[s]),s++}else if(null!=e){const c=e[Symbol.iterator]();let u=c.next();for(;!u.done&&s<=o;){const f=n.at(s),m=u.value,_=DA(s,f,s,m,t);if(0!==_)_<0&&n.updateValue(s,m),s++,u=c.next();else{r??=new X1,i??=Z1(n,s,o,t);const E=t(s,m);if(AA(n,r,s,E))n.updateValue(s,m),s++,o++,u=c.next();else if(i.has(E)){const w=t(s,f);r.set(w,n.detach(s)),o--}else n.attach(s,n.create(s,m)),s++,o++,u=c.next()}}for(;!u.done;)Y1(n,r,t,n.length,u.value),u=c.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(c=>{n.destroy(c)})}(c,n,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){const u=Zs(),f=0===c.length;if(ar(r,u,f)){const m=t+2,_=OE(r,m);if(f){const E=SA(i,m),w=lu(_,E.tView.ssrId);mh(_,gh(r,E,void 0,{dehydratedView:w}),0,au(E,w))}else kD(_,0)}}}finally{Be(e)}}function OE(n,e){return n[e]}function SA(n,e){return vc(n,e)}function Ke(n,e,t,r){const i=re(),s=mt(),o=$e+n,a=i[rt],c=s.firstCreatePass?function MQ(n,e,t,r,i,s){const o=e.consts,c=ou(e,n,2,r,Hr(o,i));return RD(e,t,c,Hr(o,s)),null!==c.attrs&&EE(c,c.attrs,!1),null!==c.mergedAttrs&&EE(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=eL(s,i,c,a,e,n);i[o]=u;const f=Kd(c);return Hi(c,!0),Ck(a,u,c),!function Ih(n){return!(32&~n.flags)}(c)&&dg()&&aE(s,i,u,c),0===function P(){return l.lFrame.elementDepthCount}()&&di(u,i),function B(){l.lFrame.elementDepthCount++}(),f&&(DD(s,i,c),TD(s,c,i)),null!==r&&AD(i,c),Ke}function Ye(){let n=Ht();ug()?Xl():(n=n.parent,Hi(n,!1));const e=n;(function Oe(n){return l.skipHydrationRootTNode===n})(e)&&function xv(){l.skipHydrationRootTNode=null}(),function se(){l.lFrame.elementDepthCount--}();const t=mt();return t.firstCreatePass&&(kv(t,n),Qp(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function T8(n){return!!(8&n.flags)}(e)&&CA(t,e,re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function D8(n){return!!(16&n.flags)}(e)&&CA(t,e,re(),e.stylesWithoutHost,!1),Ye}function wn(n,e,t,r){return Ke(n,e,t,r),Ye(),wn}let eL=(n,e,t,r,i,s)=>(Do(!0),sE(r,i,function PN(){return l.lFrame.currentNamespace}()));function RA(n,e,t){const r=re(),i=mt(),s=n+$e,o=i.firstCreatePass?function OQ(n,e,t,r,i){const s=e.consts,o=Hr(s,r),a=ou(e,n,8,"ng-container",o);return null!==o&&EE(a,o,!0),RD(e,t,a,Hr(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Hi(o,!0);const a=tL(i,r,o,n);return r[s]=a,dg()&&aE(i,r,a,o),di(a,r),Kd(o)&&(DD(i,r,o),TD(i,o,r)),null!=t&&AD(r,o),RA}function PA(){let n=Ht();const e=mt();return ug()?Xl():(n=n.parent,Hi(n,!1)),e.firstCreatePass&&(kv(e,n),Qp(n)&&e.queries.elementEnd(n)),PA}function kE(n,e,t){return RA(n,e,t),PA(),kE}let tL=(n,e,t,r)=>(Do(!0),mD(e[rt],""));function fi(){return re()}const FE="en-US";let oL=FE,bL=(n,e,t)=>{};function ft(n,e,t,r){const i=re(),s=mt(),o=Ht();return function NA(n,e,t,r,i,s,o){const a=Kd(r),u=n.firstCreatePass&&Lk(n),f=e[Wt],m=Fk(e);let _=!0;if(3&r.type||o){const b=Qr(r,e),D=o?o(b):b,k=m.length,x=o?J=>o(yt(J[r.index])):r.index;let V=null;if(!o&&a&&(V=function AY(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ua],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,_=!1;else{s=SL(r,e,f,s),bL(b,i,s);const J=t.listen(D,i,s);m.push(s,J),u&&u.push(i,x,k,k+1)}}else s=SL(r,e,f,s);const E=r.outputs;let w;if(_&&null!==E&&(w=E[i])){const b=w.length;if(b)for(let D=0;D<b;D+=2){const me=e[w[D]][w[D+1]].subscribe(s),Ee=m.length;m.push(s,me),u&&u.push(i,r.index,Ee,-(Ee+1))}}}(s,i,i[rt],o,n,e,r),ft}function AL(n,e,t,r){const i=Be(null);try{return As(6,e,t),!1!==t(r)}catch(s){return dE(n,s),!1}finally{As(7,e,t),Be(i)}}function SL(n,e,t,r){return function i(s){if(s===Function)return r;Mg(n.componentOffset>-1?Yr(n.index,e):e,5);let a=AL(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=AL(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Ot(n=1){return function _8(n){return(l.lFrame.contextLView=function Mv(n,e){for(;n>0;)e=e[hc],n--;return e}(n,l.lFrame.contextLView))[Wt]}(n)}function SY(n,e){let t=null;const r=function Vp(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?_v(n,s,!0):Zb(r,s))return i}else t=i}return t}function OA(n){const e=re()[En][jr];if(!e.projection){const r=e.projection=function kd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?SY(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function kA(n,e=0,t,r,i,s){const o=re(),a=mt(),c=r?n+1:null;null!==c&&qg(o,a,c,r,i,s,null,t);const u=ou(a,$e+n,16,null,t||null);null===u.projection&&(u.projection=e),Xl();const m=!o[Dr]||Me();null===o[En][jr].projection[u.projection]&&null!==c?function RY(n,e,t){const r=$e+t,i=e.data[r],s=n[r],o=lu(s,i.tView.ssrId);mh(s,gh(n,i,void 0,{dehydratedView:o}),0,au(i,o))}(o,a,c):m&&32&~u.flags&&function P5(n,e,t){Ik(e[rt],0,e,t,vD(n,t,e),gk(t.parent||e[jr],t,e))}(a,o,u)}function FA(n,e,t){return LA(n,"",e,"",t),FA}function LA(n,e,t,r,i){const s=re(),o=Ph(s,e,t,r);return o!==ht&&Gi(mt(),In(),s,n,o,s[rt],i,!1),LA}function UA(){return function iA(n,e){return n[Co].queries[e].queryList}(re(),DT())}function BE(n){return Zn(function Nv(){return l.lFrame.contextLView}(),$e+n)}function _r(n,e=""){const t=re(),r=mt(),i=n+$e,s=r.firstCreatePass?ou(r,i,1,e,null):r.data[i],o=KL(r,t,s,e,n);t[i]=o,dg()&&aE(r,t,o,s),Hi(s,!1)}let KL=(n,e,t,r,i)=>(Do(!0),function gD(n,e){return n.createText(e)}(e[rt],r));function Bh(n){return xc("",n,""),Bh}function xc(n,e,t){const r=re(),i=Ph(r,n,e,t);return i!==ht&&function va(n,e,t){const r=Zl(e,n);!function lk(n,e,t){n.setValue(e,t)}(n[rt],r,t)}(r,Zr(),i),xc}function jA(n,e,t,r,i){if(n=et(n),Array.isArray(n))for(let s=0;s<n.length;s++)jA(n[s],e,t,r,i);else{const s=mt(),o=re(),a=Ht();let c=la(n)?n:et(n.provide);const u=Iv(n),f=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(la(n)||!n.multi){const E=new hg(u,i,ie),w=HA(c,e,i?f:f+_,m);-1===w?(kT(Uv(a,o),s,c),$A(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[w]=E,o[w]=E)}else{const E=HA(c,e,f+_,m),w=HA(c,e,f,f+_),D=w>=0&&t[w];if(i&&!D||!i&&!(E>=0&&t[E])){kT(Uv(a,o),s,c);const k=function YY(n,e,t,r,i){const s=new hg(n,t,ie);return s.multi=[],s.index=e,s.componentProviders=0,aV(s,i,r&&!t),s}(i?QY:KY,t.length,i,r,u);!i&&D&&(t[w].providerFactory=k),$A(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else $A(s,n,E>-1?E:w,aV(t[i?w:E],u,!i&&r));!i&&r&&D&&t[w].componentProviders++}}}function $A(n,e,t,r){const i=la(e),s=function Ev(n){return!!n.useClass}(e);if(i||s){const c=(s?et(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=u.indexOf(t);-1===f?u.push(t,[r,c]):u[f+1].push(r,c)}else u.push(t,c)}}}function aV(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function HA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function KY(n,e,t,r){return zA(this.multi,[])}function QY(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=tu(t,t[Ie],this.providerFactory.index,r);s=a.slice(0,o),zA(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],zA(i,s);return s}function zA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Zt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function WY(n,e,t){const r=mt();if(r.firstCreatePass){const i=$i(n);jA(t,r.data,r.blueprint,i,!0),jA(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let ZY=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=jl(0,t.type),i=r.length>0?bE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ye({token:n,providedIn:"environment",factory:()=>new n(j(Tr))})}return n})();function jE(n){Ri("NgStandalone"),n.getStandaloneInjector=e=>e.get(ZY).getOrCreateStandaloneInjector(n)}function ro(n,e,t){const r=Si()+n,i=re();return i[r]===ht?Po(i,r,t?e.call(t):e()):function Gg(n,e){return n[e]}(i,r)}function Ms(n,e,t,r){return dV(re(),Si(),n,e,t,r)}function zE(n,e,t,r,i){return hV(re(),Si(),n,e,t,r,i)}function uV(n,e,t,r,i,s,o){return function pV(n,e,t,r,i,s,o,a,c){const u=e+t;return function Rs(n,e,t,r,i,s){const o=du(n,e,t,r);return du(n,e+2,i,s)||o}(n,u,i,s,o,a)?Po(n,u+4,c?r.call(c,i,s,o,a):r(i,s,o,a)):im(n,u+4)}(re(),Si(),n,e,t,r,i,s,o)}function im(n,e){const t=n[e];return t===ht?void 0:t}function dV(n,e,t,r,i,s){const o=e+t;return ar(n,o,i)?Po(n,o+1,s?r.call(s,i):r(i)):im(n,o+1)}function hV(n,e,t,r,i,s,o){const a=e+t;return du(n,a,i,s)?Po(n,a+2,o?r.call(o,i,s):r(i,s)):im(n,a+2)}function io(n,e){const t=mt();let r;const i=n+$e;t.firstCreatePass?(r=function aZ(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=aa(r.type)),a=zn(ie);try{const c=Vv(!1),u=s();return Vv(c),function BA(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,re(),i,u),u}finally{zn(a)}}function mu(n,e,t){const r=n+$e,i=re(),s=Zn(i,r);return om(i,r)?dV(i,Si(),e,s.transform,t,s):s.transform(t)}function sm(n,e,t,r){const i=n+$e,s=re(),o=Zn(s,i);return om(s,i)?hV(s,Si(),e,o.transform,t,r,o):o.transform(t,r)}function om(n,e){return n[Ie].data[e].pure}function am(n,e){return fE(n,e)}class Hh{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const xZ=new Hh("18.2.4");let MV=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const FV=new Y(""),WE=new Y("");let XA,YA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,XA||(function iX(n){XA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{st.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(j(st),j(ZA),j(WE))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),ZA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return XA?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function um(n){return!!n&&"function"==typeof n.then}function LV(n){return!!n&&"function"==typeof n.subscribe}const JA=new Y("");let VV=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=W(JA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(um(s))t.push(s);else if(LV(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const KE=new Y("");function BV(n,e){return Array.isArray(e)?e.reduce(BV,n):{...n,...e}}let xs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(e6),this.afterRenderManager=W(a1),this.zonelessEnabled=W(Bg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new R,this.afterTick=new R,this.componentTypes=[],this.components=[],this.isStable=W(ma).hasPendingTasks.pipe(Ce(t=>!t)),this._injector=W(Tr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof gF;if(!this._injector.get(VV).done)throw!i&&function Eo(n){const e=_t(n)||Yn(n)||br(n);return null!==e&&e.standalone}(t),new he(405,!1);let o;o=i?t:this._injector.get(vh).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function sX(n){return n.isBoundToModule}(o)?void 0:this._injector.get(uu),u=o.create(Wn.NULL,[],r||o.selector,a),f=u.location.nativeElement,m=u.injector.get(FV,null);return m?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),QE(this.components,u),m?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new he(101,!1);const t=Be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Be(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(KD,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)cX(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else t?.begin?.(),t?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Ec(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;QE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(KE,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>QE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new he(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function cX(n,e,t,r){(t||Ec(n))&&hE(n,e,t&&!r?0:1)}class lX{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let $V=(()=>{class n{compileModuleSync(t){return new cA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=os(gr(t).declarations).reduce((o,a)=>{const c=_t(a);return c&&o.push(new Hg(c)),o},[]);return new lX(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hX=(()=>{class n{constructor(){this.zone=W(st),this.changeDetectionScheduler=W(yh),this.applicationRef=W(xs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new st({...tS(),scheduleInRootZone:t}),[{provide:st,useFactory:n},{provide:Kr,multi:!0,useFactory:()=>{const r=W(hX,{optional:!0});return()=>r.initialize()}},{provide:Kr,multi:!0,useFactory:()=>{const r=W(pX);return()=>{r.initialize()}}},!0===e?{provide:pF,useValue:!0}:[],{provide:WD,useValue:t??XN}]}function tS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let pX=(()=>{class n{constructor(){this.subscription=new gt,this.initialized=!1,this.zone=W(st),this.pendingTasks=W(ma)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{st.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{st.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dm=(()=>{class n{constructor(){this.appRef=W(xs),this.taskService=W(ma),this.ngZone=W(st),this.zonelessEnabled=W(Bg),this.disableScheduling=W(pF,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new gt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zv):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(W(WD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $T||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?eO:JN;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zv+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,eO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Nc=new Y("",{providedIn:"root",factory:()=>W(Nc,bt.Optional|bt.SkipSelf)||function gX(){return typeof $localize<"u"&&$localize.locale||FE}()}),rS=new Y("");function ZE(n){return!!n.platformInjector}let KV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[eS({ngZoneFactory:()=>function J8(n="zone.js",e){return"noop"===n?new $T:"zone.js"===n?new st(e):n}(r?.ngZone,{...tS({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:yh,useExisting:dm}],c=function o7(n,e,t){return new aA(n,e,t,!1)}(t.moduleType,this.injector,a);return function WV(n){const e=ZE(n)?n.r3Injector:n.moduleRef.injector,t=e.get(st);return t.run(()=>{ZE(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=e.get(Xs,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),ZE(n)){const s=()=>e.destroy(),o=n.platformInjector.get(rS);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{QE(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return function aX(n,e,t){try{const r=t();return um(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(r,t,()=>{const s=e.get(VV);return s.runInitializers(),s.donePromise.then(()=>{if(function HQ(n){"string"==typeof n&&(oL=n.toLowerCase().replace(/_/g,"-"))}(e.get(Nc,FE)||FE),ZE(n)){const a=e.get(xs);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function IX(n,e){const t=n.injector.get(xs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new he(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:c,allPlatformModules:this._modules})}bootstrapModule(t,r=[]){const i=BV({},r);return function dX(n,e,t){const r=new cA(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(rS,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(j(Wn))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Oc=null;const QV=new Y("");function YV(n,e,t=[]){const r=`Platform: ${e}`,i=new Y(r);return(s=[])=>{let o=iS();if(!o||o.injector.get(QV,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function wX(n){if(Oc&&!Oc.get(QV,!1))throw new he(400,!1);(function UV(){!function _l(n){Cr=n}(()=>{throw new he(600,!1)})})(),Oc=n;const e=n.get(KV);(function XV(n){n.get(DO,null)?.forEach(t=>t())})(n)}(function ZV(n=[],e){return Wn.create({name:e,providers:[{provide:zl,useValue:"platform"},{provide:rS,useValue:new Set([()=>Oc=null])},...n]})}(a,r))}return function CX(){const e=iS();if(!e)throw new he(401,!1);return e}()}}function iS(){return Oc?.get(KV)??null}let _u=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=TX}return n})();function TX(n){return function DX(n,e,t){if(da(n)&&!t){const r=Yr(n.index,e);return new xg(r,r)}return 175&n.type?new xg(e[En],e):null}(Ht(),re(),!(16&~n))}class a2{constructor(){}supports(e){return e instanceof Map||lA(e)}create(){return new OX}}class OX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||lA(e)))throw new he(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new kX(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class kX{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function l2(){return new fm([new a2])}let fm=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:l2});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||l2()),deps:[[n,new Od,new Ja]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new he(901,!1)}}return n})();const VX=YV(null,"core",[]);let UX=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(j(xs))};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();const T2=new Y("");function Mr(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function mJ(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function vu(n,e){Ri("NgSignals");const t=function _n(n){const e=Object.create(si);e.computation=n;const t=()=>{if(Et(e),ve(e),e.value===$n)throw e.error;return e.value};return t[Bt]=e,t}(n);return e?.equal&&(t[Bt].equal=e.equal),t}function so(n){const e=Be(null);try{return n()}finally{Be(e)}}const yJ=new Y("",{providedIn:"root",factory:()=>W(vJ)});let vJ=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>new EJ})}return n})();class EJ{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=W(ma),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class IJ{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=function Je(n,e,t){const r=Object.create(Jt);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=c=>{r.cleanupFn=c};return r.ref={notify:()=>Ut(r),run:()=>{if(null===r.fn)return;if(function Fr(){return xe}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!tr(r))return;r.hasRun=!0;const c=it(r);try{r.cleanupFn(),r.cleanupFn=At,r.fn(i)}finally{It(r,c)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(c){(function s(c){return null===c.fn&&null===c.schedule})(c)||(wr(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=At)}(r),[Bt]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Xs,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function No(n,e){Ri("NgSignals"),!e?.injector&&lc();const t=e?.injector??W(Wn),r=!0!==e?.manualCleanup?t.get(nu):null,i=new IJ(t.get(yJ),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(_u,null,{optional:!0});return s&&8&s._lView[We]?(s._lView[Wd]??=[]).push(i.watcher.notify):i.watcher.notify(),i}let k2=null;function kc(){return k2}class TJ{}const Xt=new Y("");let fS=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>W(AJ),providedIn:"platform"})}return n})();const DJ=new Y("");let AJ=(()=>{class n extends fS{constructor(){super(),this._doc=W(Xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kc().getBaseHref(this._doc)}onPopState(t){const r=kc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=kc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function pS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function F2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ea(n){return n&&"?"!==n[0]?"?"+n:n}let Eu=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>W(V2),providedIn:"root"})}return n})();const L2=new Y("");let V2=(()=>{class n extends Eu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(Xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return pS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ea(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Ea(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Ea(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(j(fS),j(L2,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SJ=(()=>{class n extends Eu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=pS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ea(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ea(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(j(fS),j(L2,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),zh=(()=>{class n{constructor(t){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function MJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(F2(U2(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ea(r))}normalize(t){return n.stripTrailingSlash(function PJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,U2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Ea;static#t=this.joinWithSlash=pS;static#n=this.stripTrailingSlash=F2;static#r=this.\u0275fac=function(r){return new(r||n)(j(Eu))};static#i=this.\u0275prov=ye({token:n,factory:()=>function RJ(){return new zh(j(Eu))}(),providedIn:"root"})}return n})();function U2(n){return n.replace(/\/index.html$/,"")}function K2(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const bS=/\s+/,Q2=[];let ym=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Q2,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(bS):Q2}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(bS):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(bS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Kn),ie(Ro))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return n})(),eU=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static#e=this.\u0275fac=function(r){return new(r||n)(ie(cs))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ar]})}return n})();class bee{createSubscription(e,t){return so(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){so(()=>e.unsubscribe())}}class Tee{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Dee=new Tee,Aee=new bee;let _I=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(um(t))return Dee;if(LV(t))return Aee;throw function ao(n,e){return new he(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(ie(_u,16))};static#t=this.\u0275pipe=pr({name:"async",type:n,pure:!1,standalone:!0})}return n})(),vm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();const nU="browser";function rU(n){return n===nU}function yI(n){return"server"===n}let qee=(()=>{class n{static#e=this.\u0275prov=ye({token:n,providedIn:"root",factory:()=>rU(W(ss))?new Wee(W(Xt),window):new Qee})}return n})();class Wee{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Kee(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class Qee{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class iU{}class Cte extends TJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xS extends Cte{static makeCurrent(){!function bJ(n){k2??=n}(new xS)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bte(){return wm=wm||document.querySelector("base"),wm?wm.getAttribute("href"):null}();return null==t?null:function Tte(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){wm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return K2(document.cookie,e)}}let wm=null,Ate=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const wI=new Y("");let pU=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(j(wI),j(st))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class NS{constructor(e){this._doc=e}}const OS="ng-app-id";let gU=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yI(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${OS}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(OS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(OS,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt),j(ch),j(AO,8),j(ss))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const kS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},FS=/%COMP%/g,Mte=new Y("",{providedIn:"root",factory:()=>!0});function _U(n,e){return e.map(t=>t.replace(FS,n))}let yU=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=yI(a),this.defaultRenderer=new LS(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ts.ShadowDom&&(r={...r,encapsulation:ts.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof EU?i.applyToHost(t):i instanceof VS&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case ts.Emulated:s=new EU(c,u,r,this.appId,f,o,a,m);break;case ts.ShadowDom:return new kte(c,u,t,r,o,a,this.nonce,m);default:s=new VS(c,u,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(j(pU),j(gU),j(ch),j(Mte),j(Xt),j(ss),j(st),j(AO))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class LS{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(kS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(vU(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vU(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=kS[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=kS[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cc.DashCase|Cc.Important)?e.style.setProperty(t,r,i&Cc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=kc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function vU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class kte extends LS{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=_U(i.id,i.styles);for(const f of u){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class VS extends LS{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?_U(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class EU extends VS{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function xte(n){return"_ngcontent-%COMP%".replace(FS,n)}(u),this.hostAttr=function Nte(n){return"_nghost-%COMP%".replace(FS,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Fte=(()=>{class n extends NS{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})(),Lte=(()=>{class n extends NS{constructor(t){super(t),this.delegate=W(T2,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const IU=["alt","control","meta","shift"],Vte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ute={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Bte=(()=>{class n extends NS{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),IU.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Vte[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),IU.forEach(o=>{o!==i&&(0,Ute[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const zte=YV(VX,"browser",[{provide:ss,useValue:nU},{provide:DO,useValue:function jte(){xS.makeCurrent()},multi:!0},{provide:Xt,useFactory:function Hte(){return function C6(n){WT=n}(document),document},deps:[]}]),Gte=new Y(""),bU=[{provide:WE,useClass:class Dte{addToWindow(e){tn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new he(5103,!1);return s},tn.getAllAngularTestabilities=()=>e.getAllTestabilities(),tn.getAllAngularRootElements=()=>e.getAllRootElements(),tn.frameworkStabilizers||(tn.frameworkStabilizers=[]),tn.frameworkStabilizers.push(r=>{const i=tn.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?kc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:FV,useClass:YA,deps:[st,ZA,WE]},{provide:YA,useClass:YA,deps:[st,ZA,WE]}],TU=[{provide:zl,useValue:"root"},{provide:Xs,useFactory:function $te(){return new Xs},deps:[]},{provide:wI,useClass:Fte,multi:!0,deps:[Xt,st,ss]},{provide:wI,useClass:Bte,multi:!0,deps:[Xt]},{provide:wI,useClass:Lte,multi:!0},yU,gU,pU,{provide:KD,useExisting:yU},{provide:iU,useClass:Ate,deps:[]},[]];let qte=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ch,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(j(Gte,12))};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({providers:[...TU,...bU],imports:[vm,UX]})}return n})(),Wte=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wh=pt(635);const BS=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function SU(n){return je(n?.then)}function RU(n){return je(n[Zi])}function PU(n){return Symbol.asyncIterator&&je(n?.[Symbol.asyncIterator])}function MU(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const xU=function Zte(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function NU(n){return je(n?.[xU])}function OU(n){return(0,Wh.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Wh.N3)(t.read());if(i)return yield(0,Wh.N3)(void 0);yield yield(0,Wh.N3)(r)}}finally{t.releaseLock()}})}function kU(n){return je(n?.getReader)}function Xr(n){if(n instanceof St)return n;if(null!=n){if(RU(n))return function Xte(n){return new St(e=>{const t=n[Zi]();if(je(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(BS(n))return function Jte(n){return new St(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(SU(n))return function ene(n){return new St(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ja)})}(n);if(PU(n))return FU(n);if(NU(n))return function tne(n){return new St(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(kU(n))return function nne(n){return FU(OU(n))}(n)}throw MU(n)}function FU(n){return new St(e=>{(function rne(n,e){var t,r,i,s;return(0,Wh.sH)(this,void 0,void 0,function*(){try{for(t=(0,Wh.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Oo(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ca(n,e=0){return Ne((t,r)=>{t.subscribe(Le(r,i=>Oo(r,n,()=>r.next(i),e),()=>Oo(r,n,()=>r.complete(),e),i=>Oo(r,n,()=>r.error(i),e)))})}function Kh(n,e=0){return Ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function LU(n,e){if(!n)throw new Error("Iterable cannot be null");return new St(t=>{Oo(t,e,()=>{const r=n[Symbol.asyncIterator]();Oo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Tn(n,e){return e?function lne(n,e){if(null!=n){if(RU(n))return function ine(n,e){return Xr(n).pipe(Kh(e),Ca(e))}(n,e);if(BS(n))return function one(n,e){return new St(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(SU(n))return function sne(n,e){return Xr(n).pipe(Kh(e),Ca(e))}(n,e);if(PU(n))return LU(n,e);if(NU(n))return function ane(n,e){return new St(t=>{let r;return Oo(t,e,()=>{r=n[xU](),Oo(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>je(r?.return)&&r.return()})}(n,e);if(kU(n))return function cne(n,e){return LU(OU(n),e)}(n,e)}throw MU(n)}(n,e):Xr(n)}function VU(n){return n&&je(n.schedule)}function jS(n){return n[n.length-1]}function $S(n){return je(jS(n))?n.pop():void 0}function Cm(n){return VU(jS(n))?n.pop():void 0}function ze(...n){return Tn(n,Cm(n))}const{isArray:dne}=Array,{getPrototypeOf:hne,prototype:fne,keys:pne}=Object;function UU(n){if(1===n.length){const e=n[0];if(dne(e))return{args:e,keys:null};if(function gne(n){return n&&"object"==typeof n&&hne(n)===fne}(e)){const t=pne(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:mne}=Array;function HS(n){return Ce(e=>function _ne(n,e){return mne(e)?n(...e):n(e)}(n,e))}function BU(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function zS(...n){const e=Cm(n),t=$S(n),{args:r,keys:i}=UU(n);if(0===r.length)return Tn([],e);const s=new St(function yne(n,e,t=Ur){return r=>{jU(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)jU(e,()=>{const u=Tn(n[c],e);let f=!1;u.subscribe(Le(r,m=>{s[c]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>BU(i,o):Ur));return t?s.pipe(HS(t)):s}function jU(n,e,t){n?Oo(t,n,e):e()}const bI=Hn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Jr(n,e,t=1/0){return je(e)?Jr((r,i)=>Ce((s,o)=>e(r,s,i,o))(Xr(n(r,i))),t):("number"==typeof e&&(t=e),Ne((r,i)=>function vne(n,e,t,r,i,s,o,a){const c=[];let u=0,f=0,m=!1;const _=()=>{m&&!c.length&&!u&&e.complete()},E=b=>u<r?w(b):c.push(b),w=b=>{s&&e.next(b),u++;let D=!1;Xr(t(b,f++)).subscribe(Le(e,k=>{i?.(k),s?E(k):e.next(k)},()=>{D=!0},void 0,()=>{if(D)try{for(u--;c.length&&u<r;){const k=c.shift();o?Oo(e,o,()=>w(k)):w(k)}_()}catch(k){e.error(k)}}))};return n.subscribe(Le(e,E,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Qh(n=1/0){return Jr(Ur,n)}function GS(...n){return function Ene(){return Qh(1)}()(Tn(n,Cm(n)))}function $U(n){return new St(e=>{Xr(n()).subscribe(e)})}function Yh(n,e){const t=je(n)?n:()=>n,r=i=>i.error(t());return new St(e?i=>e.schedule(r,0,i):r)}const ks=new St(n=>n.complete());function qS(){return Ne((n,e)=>{let t=null;n._refCount++;const r=Le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class HU extends St{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Pe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gt;const t=this.getSubject();e.add(this.source.subscribe(Le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gt.EMPTY)}return e}refCount(){return qS()(this)}}function Xn(n,e){return Ne((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Le(r,c=>{i?.unsubscribe();let u=0;const f=s++;Xr(n(c,f)).subscribe(i=Le(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ko(n){return n<=0?()=>ks:Ne((e,t)=>{let r=0;e.subscribe(Le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zh(...n){const e=Cm(n);return Ne((t,r)=>{(e?GS(n,t,e):GS(n,t)).subscribe(r)})}function Qn(n,e){return Ne((t,r)=>{let i=0;t.subscribe(Le(r,s=>n.call(e,s,i++)&&r.next(s)))})}function TI(n){return Ne((e,t)=>{let r=!1;e.subscribe(Le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function zU(n=wne){return Ne((e,t)=>{let r=!1;e.subscribe(Le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wne(){return new bI}function Fc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((i,s)=>n(i,s,r)):Ur,ko(1),t?TI(e):zU(()=>new bI))}function wu(n,e){return je(e)?Jr(n,e,1):Jr(n,1)}function xr(n,e,t){const r=je(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ne((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Le(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ur}function Lc(n){return Ne((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Le(t,void 0,void 0,o=>{s=Xr(n(o,Lc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Xh(n,e){return Ne(function Cne(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Le(o,f=>{const m=u++;c=a?n(c,f,m):(a=!0,f),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function WS(n){return n<=0?()=>ks:Ne((e,t)=>{let r=[];e.subscribe(Le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Jh(n){return Ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ba(n){return Ne((e,t)=>{Xr(n).subscribe(Le(t,()=>t.complete(),oi)),!t.closed&&e.subscribe(t)})}const wt="primary",bm=Symbol("RouteTitle");class Dne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ef(n){return new Dne(n)}function Ane(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Fo(n,e){const t=n?KS(n):void 0,r=e?KS(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!GU(n[i],e[i]))return!1;return!0}function KS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function GU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function qU(n){return n.length>0?n[n.length-1]:null}function Vc(n){return function US(n){return!!n&&(n instanceof St||je(n.lift)&&je(n.subscribe))}(n)?n:um(n)?Tn(Promise.resolve(n)):ze(n)}const Rne={exact:function QU(n,e,t){if(!bu(n.segments,e.segments)||!DI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!QU(n.children[r],e.children[r],t))return!1;return!0},subset:YU},WU={exact:function Pne(n,e){return Fo(n,e)},subset:function Mne(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GU(n[t],e[t]))},ignored:()=>!0};function KU(n,e,t){return Rne[t.paths](n.root,e.root,t.matrixParams)&&WU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function YU(n,e,t){return ZU(n,e,e.segments,t)}function ZU(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!bu(i,t)||e.hasChildren()||!DI(i,t,r))}if(n.segments.length===t.length){if(!bu(n.segments,t)||!DI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!YU(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(bu(n.segments,i)&&DI(n.segments,i,r)&&n.children[wt])&&ZU(n.children[wt],e,s,r)}}function DI(n,e,t){return e.every((r,i)=>WU[t](n[i].parameters,r.parameters))}class Cu{constructor(e=new cn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ef(this.queryParams),this._queryParamMap}toString(){return One.serialize(this)}}class cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return SI(this)}}class Tm{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ef(this.parameters),this._parameterMap}toString(){return eB(this)}}function bu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tf=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>new AI,providedIn:"root"})}return n})();class AI{parse(e){const t=new Gne(e);return new Cu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Dm(e.root,!0)}`,r=function Lne(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${RI(t)}=${RI(i)}`).join("&"):`${RI(t)}=${RI(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function kne(n){return encodeURI(n)}(e.fragment)}`:""}`}}const One=new AI;function SI(n){return n.segments.map(e=>eB(e)).join("/")}function Dm(n,e){if(!n.hasChildren())return SI(n);if(e){const t=n.children[wt]?Dm(n.children[wt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==wt&&r.push(`${i}:${Dm(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Nne(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===wt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==wt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===wt?[Dm(n.children[wt],!1)]:[`${i}:${Dm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[wt]?`${SI(n)}/${t[0]}`:`${SI(n)}/(${t.join("//")})`}}function XU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RI(n){return XU(n).replace(/%3B/gi,";")}function QS(n){return XU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PI(n){return decodeURIComponent(n)}function JU(n){return PI(n.replace(/\+/g,"%20"))}function eB(n){return`${QS(n.path)}${function Fne(n){return Object.entries(n).map(([e,t])=>`;${QS(e)}=${QS(t)}`).join("")}(n.parameters)}`}const Vne=/^[^\/()?;#]+/;function YS(n){const e=n.match(Vne);return e?e[0]:""}const Une=/^[^\/()?;=#]+/,jne=/^[^=?&#]+/,Hne=/^[^&#]+/;class Gne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[wt]=new cn(e,t)),r}parseSegment(){const e=YS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(e),new Tm(PI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Bne(n){const e=n.match(Une);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=YS(this.remaining);i&&(r=i,this.capture(r))}e[PI(t)]=PI(r)}parseQueryParam(e){const t=function $ne(n){const e=n.match(jne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function zne(n){const e=n.match(Hne);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=JU(t),s=JU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=YS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new he(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=wt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[wt]:new cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new he(4011,!1)}}function tB(n){return n.segments.length>0?new cn([],{[wt]:n}):n}function nB(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=nB(i);if(r===wt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function qne(n){if(1===n.numberOfChildren&&n.children[wt]){const e=n.children[wt];return new cn(n.segments.concat(e.segments),e.children)}return n}(new cn(n.segments,e))}function Tu(n){return n instanceof Cu}function rB(n){let e;const i=tB(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new cn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function iB(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return ZS(i,i,i,t,r);const s=function Kne(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oB(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new oB(t,e,r)}(e);if(s.toRoot())return ZS(i,i,new cn([],{}),t,r);const o=function Qne(n,e,t){if(n.isAbsolute)return new xI(e,!0,0);if(!t)return new xI(e,!1,NaN);if(null===t.parent)return new xI(t,!0,0);const r=MI(n.commands[0])?0:1;return function Yne(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new xI(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Sm(o.segmentGroup,o.index,s.commands):aB(o.segmentGroup,o.index,s.commands);return ZS(i,o.segmentGroup,a,t,r)}function MI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Am(n){return"object"==typeof n&&null!=n&&n.outlets}function ZS(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`}),o=n===e?t:sB(n,e,t);const a=tB(nB(o));return new Cu(a,s,i)}function sB(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:sB(s,e,t)}),new cn(n.segments,r)}class oB{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&MI(r[0]))throw new he(4003,!1);const i=r.find(Am);if(i&&i!==qU(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function aB(n,e,t){if(n??=new cn([],{}),0===n.segments.length&&n.hasChildren())return Sm(n,e,t);const r=function Xne(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Am(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!lB(c,u,o))return s;r+=2}else{if(!lB(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new cn(n.segments.slice(0,r.pathIndex),{});return s.children[wt]=new cn(n.segments.slice(r.pathIndex),n.children),Sm(s,0,i)}return r.match&&0===i.length?new cn(n.segments,{}):r.match&&!n.hasChildren()?XS(n,e,t):r.match?Sm(n,0,i):XS(n,e,t)}function Sm(n,e,t){if(0===t.length)return new cn(n.segments,{});{const r=function Zne(n){return Am(n[0])?n[0].outlets:{[wt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==wt)&&n.children[wt]&&1===n.numberOfChildren&&0===n.children[wt].segments.length){const s=Sm(n.children[wt],e,t);return new cn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=aB(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new cn(n.segments,i)}}function XS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Am(s)){const c=Jne(s.outlets);return new cn(r,c)}if(0===i&&MI(t[0])){r.push(new Tm(n.segments[e].path,cB(t[0]))),i++;continue}const o=Am(s)?s.outlets[wt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&MI(a)?(r.push(new Tm(o,cB(a))),i+=2):(r.push(new Tm(o,{})),i++)}return new cn(r,{})}function Jne(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=XS(new cn([],{}),0,r))}),e}function cB(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function lB(n,e,t){return n==t.path&&Fo(e,t.parameters)}const Rm="imperative";var kt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(kt||{});class Lo{constructor(e,t){this.id=e,this.url=t}}class NI extends Lo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=kt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ta extends Lo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=kt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ds=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ds||{}),OI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(OI||{});class Du extends Lo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=kt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nf extends Lo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=kt.NavigationSkipped}}class JS extends Lo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=kt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uB extends Lo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=kt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ere extends Lo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=kt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tre extends Lo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=kt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nre extends Lo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=kt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rre extends Lo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=kt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ire{constructor(e){this.route=e,this.type=kt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sre{constructor(e){this.route=e,this.type=kt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ore{constructor(e){this.snapshot=e,this.type=kt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class are{constructor(e){this.snapshot=e,this.type=kt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cre{constructor(e){this.snapshot=e,this.type=kt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lre{constructor(e){this.snapshot=e,this.type=kt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=kt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class e0{}class kI{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function co(n){return n.outlet||wt}function Pm(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class gre{get injector(){return Pm(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Mm(this.rootInjector),this.attachRef=null}}let Mm=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new gre(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)(j(Tr))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class hB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=t0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=t0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=n0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return n0(e,this._root).map(t=>t.value)}}function t0(n,e){if(n===e.value)return e;for(const t of e.children){const r=t0(n,t);if(r)return r}return null}function n0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=n0(n,t);if(r.length)return r.unshift(e),r}return[]}class lo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fB extends hB{constructor(e,t){super(e),this.snapshot=t,r0(this,e)}toString(){return this.snapshot.toString()}}function pB(n){const e=function mre(n){const s=new LI([],{},{},"",{},wt,n,null,{});return new gB("",new lo(s,[]))}(n),t=new $([new Tm("",{})]),r=new $({}),i=new $({}),s=new $({}),o=new $(""),a=new sf(t,r,s,o,i,wt,n,e.root);return a.snapshot=e.root,new fB(new lo(a,[]),e)}class sf{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ce(u=>u[bm]))??ze(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>ef(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>ef(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FI(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&_B(i)&&(r.resolve[bm]=i.title),r}class LI{get title(){return this.data?.[bm]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ef(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ef(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gB extends hB{constructor(e,t){super(t),this.url=e,r0(this,t)}toString(){return mB(this._root)}}function r0(n,e){e.value._routerState=n,e.children.forEach(t=>r0(n,t))}function mB(n){const e=n.children.length>0?` { ${n.children.map(mB).join(", ")} } `:"";return`${n.value}${e}`}function s0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fo(e.params,t.params)||n.paramsSubject.next(t.params),function Sne(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Fo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function o0(n,e){const t=Fo(n.params,e.params)&&function xne(n,e){return bu(n,e)&&n.every((t,r)=>Fo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||o0(n.parent,e.parent))}function _B(n){return"string"==typeof n.title||null===n.title}let a0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=wt,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=W(Mm),this.location=W(cs),this.changeDetector=W(_u),this.inputBinder=W(VI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new c0(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ar]})}return n})();class c0{__ngOutletInjector(e){return new c0(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===sf?this.route:e===Mm?this.childContexts:this.parent.get(e,t)}}const VI=new Y("");let yB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=zS([r.queryParams,r.params,r.data]).pipe(Xn(([s,o,a],c)=>(a={...s,...o,...a},0===c?ze(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function CJ(n){const e=_t(n);if(!e)return null;const t=new Hg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function xm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function yre(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xm(n,r,i);return xm(n,r)})}(n,e,t);return new lo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xm(n,a)),o}}const r=function vre(n){return new sf(new $(n.url),new $(n.params),new $(n.queryParams),new $(n.fragment),new $(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>xm(n,s));return new lo(r,i)}}class l0{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const vB="ngNavigationCancelingError";function UI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Tu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EB(!1,ds.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function EB(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[vB]=!0,t.cancellationCode=e,t}function IB(n){return!!n&&n[vB]}class wre{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),s0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rf(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=rf(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=rf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new lre(s.value.snapshot))}),e.children.length&&this.forwardEvent(new are(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(s0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),s0(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class wB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class BI{constructor(e,t){this.component=e,this.route=t}}function Cre(n,e,t){const r=n._root;return Nm(r,e?e._root:null,t,[r.value])}function af(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Ka(n){return null!==bd(n)}(n)?e.get(n):n:r}function Nm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=rf(e);return n.children.forEach(o=>{(function Tre(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Dre(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!bu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bu(n.url,e.url)||!Fo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!o0(n,e)||!Fo(n.queryParams,e.queryParams);default:return!o0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wB(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Nm(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new BI(a.outlet.component,o))}else o&&Om(e,a,i),i.canActivateChecks.push(new wB(r)),Nm(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Om(a,t.getContext(o),i)),i}function Om(n,e,t){const r=rf(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Om(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new BI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function km(n){return"function"==typeof n}function CB(n){return n instanceof bI||"EmptyError"===n?.name}const jI=Symbol("INITIAL_VALUE");function cf(){return Xn(n=>zS(n.map(e=>e.pipe(ko(1),Zh(jI)))).pipe(Ce(e=>{for(const t of e)if(!0!==t){if(t===jI)return jI;if(!1===t||Nre(t))return t}return!0}),Qn(e=>e!==jI),ko(1)))}function Nre(n){return Tu(n)||n instanceof l0}function bB(n){return function Il(...n){return Jo(n)}(xr(e=>{if("boolean"!=typeof e)throw UI(0,e)}),Ce(e=>!0===e))}class u0{constructor(e){this.segmentGroup=e||null}}class $I extends Error{constructor(e){super(),this.urlTree=e}}function lf(n){return Yh(new u0(n))}class qre{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ze(r);if(i.numberOfChildren>1||!i.children[wt])return Yh(new he(4e3,!1));i=i.children[wt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:c,fragment:u,routeConfig:f,url:m,outlet:_,params:E,data:w,title:b}=i,D=Ts(s,()=>a({params:E,data:w,queryParams:c,fragment:u,routeConfig:f,url:m,outlet:_,title:b}));if(D instanceof Cu)throw new $I(D);t=D}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new $I(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Cu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new cn(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const d0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wre(n,e,t,r,i){const s=TB(n,e,t);return s.matched?(r=function ure(n,e){return n.providers&&!n._injector&&(n._injector=bE(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Hre(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ze(i.map(o=>{const a=af(o,n);return Vc(function xre(n){return n&&km(n.canMatch)}(a)?a.canMatch(e,t):Ts(n,()=>a(e,t)))})).pipe(cf(),bB()):ze(!0)}(r,e,t).pipe(Ce(o=>!0===o?s:{...d0}))):ze(s)}function TB(n,e,t){if("**"===e.path)return function Kre(n){return{matched:!0,parameters:n.length>0?qU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...d0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ane)(t,n,e);if(!i)return{...d0};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function DB(n,e,t,r){return t.length>0&&function Zre(n,e,t){return t.some(r=>HI(n,e,r)&&co(r)!==wt)}(n,t,r)?{segmentGroup:new cn(e,Yre(r,new cn(t,n.children))),slicedSegments:[]}:0===t.length&&function Xre(n,e,t){return t.some(r=>HI(n,e,r))}(n,t,r)?{segmentGroup:new cn(n.segments,Qre(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new cn(n.segments,n.children),slicedSegments:t}}function Qre(n,e,t,r){const i={};for(const s of t)if(HI(n,e,s)&&!r[co(s)]){const o=new cn([],{});i[co(s)]=o}return{...r,...i}}function Yre(n,e){const t={};t[wt]=e;for(const r of n)if(""===r.path&&co(r)!==wt){const i=new cn([],{});t[co(r)]=i}return t}function HI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class eie{}class rie{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new qre(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new he(4002,`'${e.segmentGroup}'`)}recognize(){const e=DB(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:r})=>{const i=new lo(r,t),s=new gB("",i),o=function Wne(n,e,t=null,r=null){return iB(rB(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new LI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),wt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,wt,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),Lc(r=>{if(r instanceof $I)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof u0?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Ce(o=>o instanceof lo?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return Tn(s).pipe(wu(o=>{const a=r.children[o],c=function pre(n,e){const t=n.filter(r=>co(r)===e);return t.push(...n.filter(r=>co(r)!==e)),t}(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Xh((o,a)=>(o.push(...a),o)),TI(null),function bne(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((i,s)=>n(i,s,r)):Ur,WS(1),t?TI(e):zU(()=>new bI))}(),Jr(o=>{if(null===o)return lf(r);const a=AB(o);return function iie(n){n.sort((e,t)=>e.value.outlet===wt?-1:t.value.outlet===wt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),ze(a)}))}processSegment(e,t,r,i,s,o,a){return Tn(t).pipe(wu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Lc(u=>{if(u instanceof u0)return ze(null);throw u}))),Fc(c=>!!c),Lc(c=>{if(CB(c))return function Jre(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?ze(new eie):lf(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return co(r)===o||o!==wt&&HI(i,s,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):lf(i):lf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:c,parameters:u,consumedSegments:f,positionalParamSegments:m,remainingSegments:_}=TB(t,i,s);if(!c)return lf(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const E=new LI(s,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SB(i),co(i),i.component??i._loadedComponent??null,i,RB(i)),w=FI(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(w.params),E.data=Object.freeze(w.data);const b=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,E,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(Jr(D=>this.processSegment(e,r,t,D.concat(_),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=Wre(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Xn(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Xn(({routes:u})=>{const f=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:E}=c,w=new LI(_,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SB(r),co(r),r.component??r._loadedComponent??null,r,RB(r)),b=FI(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(b.params),w.data=Object.freeze(b.data);const{segmentGroup:D,slicedSegments:k}=DB(t,_,E,u);if(0===k.length&&D.hasChildren())return this.processChildren(f,u,D,w).pipe(Ce(V=>new lo(w,V)));if(0===u.length&&0===k.length)return ze(new lo(w,[]));const x=co(r)===s;return this.processSegment(f,u,D,k,x?wt:s,!0,w).pipe(Ce(V=>new lo(w,V instanceof lo?[V]:[])))})):lf(t)))}getChildConfig(e,t,r){return t.children?ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function $re(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ze(!0):ze(i.map(o=>{const a=af(o,n);return Vc(function Sre(n){return n&&km(n.canLoad)}(a)?a.canLoad(e,t):Ts(n,()=>a(e,t)))})).pipe(cf(),bB())}(e,t,r).pipe(Jr(i=>i?this.configLoader.loadChildren(e,t).pipe(xr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Gre(){return Yh(EB(!1,ds.GuardRejected))}())):ze({routes:[],injector:e})}}function sie(n){const e=n.value.routeConfig;return e&&""===e.path}function AB(n){const e=[],t=new Set;for(const r of n){if(!sie(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=AB(r.children);e.push(new lo(r.value,i))}return e.filter(r=>!t.has(r))}function SB(n){return n.data||{}}function RB(n){return n.resolve||{}}function PB(n){const e=n.children.map(t=>PB(t)).flat();return[n,...e]}function h0(n){return Xn(e=>{const t=n(e);return t?Tn(t).pipe(Ce(()=>e)):ze(e)})}let MB=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===wt);return r}getResolvedTitleForRoute(t){return t.data[bm]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>W(die),providedIn:"root"})}return n})(),die=(()=>{class n extends MB{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Wte))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const uf=new Y("",{providedIn:"root",factory:()=>({})});let xB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["ng-component"]],standalone:!0,features:[jE],decls:1,vars:0,template:function(r,i){1&r&&wn(0,"router-outlet")},dependencies:[a0],encapsulation:2})}return n})();function f0(n){const e=n.children&&n.children.map(f0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wt&&(t.component=xB),t}const df=new Y("");let p0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W($V)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Vc(t.loadComponent()).pipe(Ce(NB),xr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Jh(()=>{this.componentLoaders.delete(t)})),i=new HU(r,()=>new R).pipe(qS());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function hie(n,e,t,r){return Vc(n.loadChildren()).pipe(Ce(NB),Jr(i=>i instanceof ZF||Array.isArray(i)?ze(i):Tn(e.compileModuleAsync(i))),Ce(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(df,[],{optional:!0,self:!0}).flat()),{routes:o.map(f0),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Jh(()=>{this.childrenLoaders.delete(r)})),o=new HU(s,()=>new R).pipe(qS());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NB(n){return function fie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let g0=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>W(pie),providedIn:"root"})}return n})(),pie=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const OB=new Y(""),kB=new Y("");function gie(n,e,t){const r=n.get(kB),i=n.get(Xt);return n.get(st).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s;const o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),function mie(n){return new Promise(e=>{hu({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&Ts(n,()=>c({transition:a,from:e,to:t})),o})}const FB=new Y("");let zI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new R,this.transitionAbortSubject=new R,this.configLoader=W(p0),this.environmentInjector=W(Tr),this.urlSerializer=W(tf),this.rootContexts=W(Mm),this.location=W(zh),this.inputBindingEnabled=null!==W(VI,{optional:!0}),this.titleStrategy=W(MB),this.options=W(uf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(g0),this.createViewTransition=W(OB,{optional:!0}),this.navigationErrorHandler=W(FB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ze(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new sre(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new ire(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new $({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Rm,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qn(s=>0!==s.id),Ce(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xn(s=>{let o=!1,a=!1;return ze(s).pipe(Xn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ds.SupersededByNewNavigation),ks;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new nf(c.id,this.urlSerializer.serialize(c.rawUrl),m,OI.IgnoredSameUrlNavigation)),c.resolve(!1),ks}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ze(c).pipe(Xn(m=>{const _=this.transitions?.getValue();return this.events.next(new NI(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?ks:Promise.resolve(m)}),function oie(n,e,t,r,i,s){return Jr(o=>function tie(n,e,t,r,i,s,o="emptyOnly"){return new rie(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Ce(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xr(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const _=new uB(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:m,extractedUrl:_,source:E,restoredState:w,extras:b}=c,D=new NI(m,this.urlSerializer.serialize(_),E,w);this.events.next(D);const k=pB(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:k,urlAfterRedirects:_,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,ze(s)}{const m="";return this.events.next(new nf(c.id,this.urlSerializer.serialize(c.extractedUrl),m,OI.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ks}}),xr(c=>{const u=new ere(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ce(c=>(this.currentTransition=s={...c,guards:Cre(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function Ore(n,e){return Jr(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ze({...t,guardsResult:!0}):function kre(n,e,t,r){return Tn(n).pipe(Jr(i=>function jre(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ze(s.map(a=>{const c=Pm(e)??i,u=af(a,c);return Vc(function Mre(n){return n&&km(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):Ts(c,()=>u(n,e,t,r))).pipe(Fc())})).pipe(cf()):ze(!0)}(i.component,i.route,t,e,r)),Fc(i=>!0!==i,!0))}(o,r,i,n).pipe(Jr(a=>a&&function Are(n){return"boolean"==typeof n}(a)?function Fre(n,e,t,r){return Tn(e).pipe(wu(i=>GS(function Vre(n,e){return null!==n&&e&&e(new ore(n)),ze(!0)}(i.route.parent,r),function Lre(n,e){return null!==n&&e&&e(new cre(n)),ze(!0)}(i.route,r),function Bre(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function bre(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>$U(()=>ze(o.guards.map(c=>{const u=Pm(o.node)??t,f=af(c,u);return Vc(function Pre(n){return n&&km(n.canActivateChild)}(f)?f.canActivateChild(r,n):Ts(u,()=>f(r,n))).pipe(Fc())})).pipe(cf())));return ze(s).pipe(cf())}(n,i.path,t),function Ure(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ze(!0);const i=r.map(s=>$U(()=>{const o=Pm(e)??t,a=af(s,o);return Vc(function Rre(n){return n&&km(n.canActivate)}(a)?a.canActivate(e,n):Ts(o,()=>a(e,n))).pipe(Fc())}));return ze(i).pipe(cf())}(n,i.route,t))),Fc(i=>!0!==i,!0))}(r,s,n,e):ze(a)),Ce(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),xr(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw UI(0,c.guardsResult);const u=new tre(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Qn(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",ds.GuardRejected),!1)),h0(c=>{if(c.guards.canActivateChecks.length)return ze(c).pipe(xr(u=>{const f=new nre(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),Xn(u=>{let f=!1;return ze(u).pipe(function aie(n,e){return Jr(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ze(t);const s=new Set(i.map(c=>c.route)),o=new Set;for(const c of s)if(!o.has(c))for(const u of PB(c))o.add(u);let a=0;return Tn(o).pipe(wu(c=>s.has(c)?function cie(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!_B(i)&&(s[bm]=i.title),function lie(n,e,t,r){const i=KS(n);if(0===i.length)return ze({});const s={};return Tn(i).pipe(Jr(o=>function uie(n,e,t,r){const i=Pm(e)??r,s=af(n,i);return Vc(s.resolve?s.resolve(e,t):Ts(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Fc(),xr(a=>{if(a instanceof l0)throw UI(new AI,a);s[o]=a}))),WS(1),function Tne(n){return Ce(()=>n)}(s),Lc(o=>CB(o)?ks:Yh(o)))}(s,n,e,r).pipe(Ce(o=>(n._resolvedData=o,n.data=FI(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=FI(c,c.parent,n).resolve,ze(void 0))),xr(()=>a++),WS(1),Jr(c=>a===o.size?ze(t):ks))})}(this.paramsInheritanceStrategy,this.environmentInjector),xr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",ds.NoDataFromResolver)}}))}),xr(u=>{const f=new rre(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),h0(c=>{const u=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(xr(_=>{f.component=_}),Ce(()=>{})));for(const _ of f.children)m.push(...u(_));return m};return zS(u(c.targetSnapshot.root)).pipe(TI(null),ko(1))}),h0(()=>this.afterPreactivation()),Xn(()=>{const{currentSnapshot:c,targetSnapshot:u}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return f?Tn(f).pipe(Ce(()=>s)):ze(s)}),Ce(c=>{const u=function _re(n,e,t){const r=xm(n,e._root,t?t._root:void 0);return new fB(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},this.currentNavigation.targetRouterState=u,s}),xr(()=>{this.events.next(new e0)}),((n,e,t,r)=>Ce(i=>(new wre(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ko(1),xr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ta(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),ba(this.transitionAbortSubject.pipe(xr(c=>{throw c}))),Jh(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",ds.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Lc(c=>{if(a=!0,IB(c))this.events.next(new Du(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function Ere(n){return IB(n)&&Tu(n.url)}(c)?this.events.next(new kI(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{const u=new JS(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{const f=Ts(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(f instanceof l0){const{message:m,cancellationCode:_}=UI(0,f);this.events.next(new Du(s.id,this.urlSerializer.serialize(s.extractedUrl),m,_)),this.events.next(new kI(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(u);const m=t.errorHandler(c);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return ks}))}))}cancelNavigationTransition(t,r,i){const s=new Du(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _ie(n){return n!==Rm}let yie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>W(Eie),providedIn:"root"})}return n})();class vie{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Eie=(()=>{class n extends vie{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})();static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:()=>W(Iie),providedIn:"root"})}return n})(),Iie=(()=>{class n extends LB{constructor(){super(...arguments),this.location=W(zh),this.urlSerializer=W(tf),this.options=W(uf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(g0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Cu,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=pB(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof NI)this.stateMemento=this.createStateMemento();else if(t instanceof nf)this.rawUrlTree=r.initialUrl;else if(t instanceof uB){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof e0?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Du&&(t.code===ds.GuardRejected||t.code===ds.NoDataFromResolver)?this.restoreHistory(r):t instanceof JS?this.restoreHistory(r,!0):t instanceof Ta&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof Cu?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})();static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fm=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fm||{});function VB(n,e){n.events.pipe(Qn(t=>t instanceof Ta||t instanceof Du||t instanceof JS||t instanceof nf),Ce(t=>t instanceof Ta||t instanceof nf?Fm.COMPLETE:t instanceof Du&&(t.code===ds.Redirect||t.code===ds.SupersededByNewNavigation)?Fm.REDIRECTING:Fm.FAILED),Qn(t=>t!==Fm.REDIRECTING),ko(1)).subscribe(()=>{e()})}function wie(n){throw n}const Cie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let uo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=W(MV),this.stateManager=W(LB),this.options=W(uf,{optional:!0})||{},this.pendingTasks=W(ma),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(zI),this.urlSerializer=W(tf),this.location=W(zh),this.urlHandlingStrategy=W(g0),this._events=new R,this.errorHandler=this.options.errorHandler||wie,this.navigated=!1,this.routeReuseStrategy=W(yie),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(df,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(VI,{optional:!0}),this.eventsSubscription=new gt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof Du&&r.code!==ds.Redirect&&r.code!==ds.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ta)this.navigated=!0;else if(r instanceof kI){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||_ie(i.source),...o};this.scheduleNavigation(a,Rm,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Die(n){return!(n instanceof e0||n instanceof kI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(f0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let m,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=rB(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),m=this.currentUrlTree.root}return iB(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Tu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Rm,null,r)}navigate(t,r={skipLocationChange:!1}){return function Tie(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new he(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...Cie}:!1===r?{...bie}:r,Tu(t))return KU(this.currentUrlTree,t,i);const s=this.parseUrl(t);return KU(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((m,_)=>{a=m,c=_});const f=this.pendingTasks.add();return VB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class UB{}let Rie=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(t=>t instanceof Ta),wu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=bE(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Tn(i).pipe(Qh())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ze(null);const s=i.pipe(Jr(o=>null===o?ze(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?Tn([s,this.loader.loadComponent(r)]).pipe(Qh()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(j(uo),j($V),j(Tr),j(UB),j(p0))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _0=new Y("");let BB=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof NI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ta?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof nf&&t.code===OI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof dB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function Tk(){throw new Error("invalid")}()};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function Vo(n,e){return{\u0275kind:n,\u0275providers:e}}function $B(){const n=W(Wn);return e=>{const t=n.get(xs);if(e!==t.components[0])return;const r=n.get(uo),i=n.get(HB);1===n.get(y0)&&r.initialNavigation(),n.get(zB,null,bt.Optional)?.setUpPreloading(),n.get(_0,null,bt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const HB=new Y("",{factory:()=>new R}),y0=new Y("",{providedIn:"root",factory:()=>1}),zB=new Y("");function Nie(n){return Vo(0,[{provide:zB,useExisting:Rie},{provide:UB,useExisting:n}])}function kie(n){return Vo(9,[{provide:OB,useValue:gie},{provide:kB,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const GB=new Y("ROUTER_FORROOT_GUARD"),Fie=[zh,{provide:tf,useClass:AI},uo,Mm,{provide:sf,useFactory:function jB(n){return n.routerState.root},deps:[uo]},p0,[]];let qB=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Fie,[],{provide:df,multi:!0,useValue:t},{provide:GB,useFactory:Bie,deps:[[uo,new Ja,new Od]]},{provide:uf,useValue:r||{}},r?.useHash?{provide:Eu,useClass:SJ}:{provide:Eu,useClass:V2},{provide:_0,useFactory:()=>{const n=W(qee),e=W(st),t=W(uf),r=W(zI),i=W(tf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new BB(i,r,n,e,t)}},r?.preloadingStrategy?Nie(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?jie(r):[],r?.bindToComponentInputs?Vo(8,[yB,{provide:VI,useExisting:yB}]).\u0275providers:[],r?.enableViewTransitions?kie().\u0275providers:[],[{provide:WB,useFactory:$B},{provide:KE,multi:!0,useExisting:WB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:df,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(j(GB,8))};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();function Bie(n){return"guarded"}function jie(n){return["disabled"===n.initialNavigation?Vo(3,[{provide:JA,multi:!0,useFactory:()=>{const e=W(uo);return()=>{e.setUpLocationChangeListener()}}},{provide:y0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Vo(2,[{provide:y0,useValue:0},{provide:JA,multi:!0,deps:[Wn],useFactory:e=>{const t=e.get(DJ,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(uo),s=e.get(HB);VB(i,()=>{r(!0)}),e.get(zI).afterPreactivation=()=>(r(!0),s.closed?ze(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const WB=new Y("");let Hie=(()=>{class n{constructor(){this.title="todo-ngrx"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Ke(0,"div",0),wn(1,"router-outlet"),Ye())},dependencies:[a0],styles:["@media screen and (max-width: 415px){.container[_ngcontent-%COMP%]{padding:0 .5rem}}"]})}return n})();class zie extends gt{constructor(e,t){super()}schedule(e,t=0){return this}}const GI={setInterval(n,e,...t){const{delegate:r}=GI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=GI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class qI extends zie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return GI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&GI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,nr(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const v0={now:()=>(v0.delegate||Date).now(),delegate:void 0};class Lm{constructor(e,t=Lm.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Lm.now=v0.now;class WI extends Lm{constructor(e,t=Lm.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const E0=new class qie extends WI{}(class Gie extends qI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});function KB(...n){const e=$S(n);return Ne((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Xr(n[c]).subscribe(Le(r,u=>{s[c]=u,!a&&!o[c]&&(o[c]=!0,(a=o.every(Ur))&&(o=null))},oi));t.subscribe(Le(r,c=>{if(a){const u=[c,...s];r.next(e?e(...u):u)}}))})}function QB(n,e=Ur){return n=n??Kie,Ne((t,r)=>{let i,s=!0;t.subscribe(Le(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Kie(n,e){return n===e}function I0(n,e){const t=!e?.manualCleanup;t&&!e?.injector&&lc();const r=t?e?.injector?.get(nu)??W(nu):null,i=function Zie(n=Object.is){return(e,t)=>1===e.kind&&1===t.kind&&n(e.value,t.value)}(e?.equal);let s;s=Js(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue},{equal:i});const o=n.subscribe({next:a=>s.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;s.set({kind:2,error:a})}});if(e?.requireSync&&0===s().kind)throw new he(601,!1);return r?.onDestroy(o.unsubscribe.bind(o)),vu(()=>{const a=s();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new he(601,!1)}},{equal:e?.equal})}const Vm={},KI="@ngrx/store/init";let Da=(()=>{class n extends ${constructor(){super({type:KI})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const rse=[Da],b0=new Y("@ngrx/store Internal Root Guard"),ZB=new Y("@ngrx/store Internal Initial State"),QI=new Y("@ngrx/store Initial State"),XB=new Y("@ngrx/store Reducer Factory"),JB=new Y("@ngrx/store Internal Reducer Factory Provider"),ej=new Y("@ngrx/store Initial Reducers"),T0=new Y("@ngrx/store Internal Initial Reducers"),tj=new Y("@ngrx/store Store Features"),nj=new Y("@ngrx/store Internal Store Reducers"),D0=new Y("@ngrx/store Internal Feature Reducers"),rj=new Y("@ngrx/store Internal Feature Configs"),A0=new Y("@ngrx/store Internal Store Features"),ij=new Y("@ngrx/store Internal Feature Reducers Token"),S0=new Y("@ngrx/store Feature Reducers"),sj=new Y("@ngrx/store User Provided Meta Reducers"),YI=new Y("@ngrx/store Meta Reducers"),oj=new Y("@ngrx/store Internal Resolved Meta Reducers"),aj=new Y("@ngrx/store User Runtime Checks Config"),cj=new Y("@ngrx/store Internal User Runtime Checks Config"),Um=new Y("@ngrx/store Internal Runtime Checks"),Bm=new Y("@ngrx/store Check if Action types are unique");function P0(n,e={}){const t=Object.keys(n),r={};for(let s=0;s<t.length;s++){const o=t[s];"function"==typeof n[o]&&(r[o]=n[o])}const i=Object.keys(r);return function(o,a){o=void 0===o?e:o;let c=!1;const u={};for(let f=0;f<i.length;f++){const m=i[f],E=o[m],w=(0,r[m])(E,a);u[m]=w,c=c||w!==E}return c?u:o}}function uj(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((i,s)=>s(i),t(e))}}function dj(n,e){return Array.isArray(e)&&e.length>0&&(n=uj.apply(null,[...e,n])),(t,r)=>{const i=n(t);return(s,o)=>i(s=void 0===s?r:s,o)}}new Y("@ngrx/store Root Store Provider"),new Y("@ngrx/store Feature State Provider");class jm extends St{}class M0 extends Da{}const x0="@ngrx/store/update-reducers";let $m=(()=>{class n extends ${get currentReducers(){return this.reducers}constructor(t,r,i,s){super(s(i,r)),this.dispatcher=t,this.initialState=r,this.reducers=i,this.reducerFactory=s}addFeature(t){this.addFeatures([t])}addFeatures(t){const r=t.reduce((i,{reducers:s,reducerFactory:o,metaReducers:a,initialState:c,key:u})=>{const f="function"==typeof s?function sse(n){const e=Array.isArray(n)&&n.length>0?uj(...n):t=>t;return(t,r)=>(t=e(t),(i,s)=>t(i=void 0===i?r:i,s))}(a)(s,c):dj(o,a)(s,c);return i[u]=f,i},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=function ise(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,r)=>Object.assign(t,{[r]:n[r]}),{})}(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:x0,features:t})}ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(j(M0),j(QI),j(ej),j(XB))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const ose=[$m,{provide:jm,useExisting:$m},{provide:M0,useExisting:Da}];let Hm=(()=>{class n extends R{ngOnDestroy(){this.complete()}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})();static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const ase=[Hm];class N0 extends St{}let hj=(()=>{class n extends ${static#e=this.INIT=KI;constructor(t,r,i,s){super(s);const u=t.pipe(Ca(E0)).pipe(KB(r)).pipe(Xh(cse,{state:s}));this.stateSubscription=u.subscribe(({state:f,action:m})=>{this.next(f),i.next(m)}),this.state=I0(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static#t=this.\u0275fac=function(r){return new(r||n)(j(Da),j(jm),j(Hm),j(QI))};static#n=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function cse(n={state:void 0},[e,t]){const{state:r}=n;return{state:t(r,e),action:e}}const lse=[hj,{provide:N0,useExisting:hj}];let Uc=(()=>{class n extends St{constructor(t,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=t,this.state=t.state}select(t,...r){return zm.call(null,t,...r)(this)}selectSignal(t,r){return vu(()=>t(this.state()),r)}lift(t){const r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}static#e=this.\u0275fac=function(r){return new(r||n)(j(N0),j(Da),j($m))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const use=[Uc];function zm(n,e,...t){return function(i){let s;if("string"==typeof n){const o=[e,...t].filter(Boolean);s=i.pipe(function Wie(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return Ce(t=>{let r=t;for(let i=0;i<e;i++){const s=r?.[n[i]];if(!(typeof s<"u"))return;r=s}return r})}(n,...o))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);s=i.pipe(Ce(o=>n(o,e)))}return s.pipe(QB())}}const O0="https://ngrx.io/guide/store/configuration/runtime-checks";function fj(n){return void 0===n}function pj(n){return null===n}function gj(n){return Array.isArray(n)}function mj(n){return"object"==typeof n&&null!==n}function k0(n){return"function"==typeof n}function F0(n,e){return n===e}function L0(n,e=F0,t=F0){let s,r=null,i=null;return{memoized:function u(){if(void 0!==s)return s.result;if(!r)return i=n.apply(null,arguments),r=arguments,i;if(!function yse(n,e,t){for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!0;return!1}(arguments,r,e))return i;const f=n.apply(null,arguments);return r=arguments,t(i,f)?i:(i=f,f)},reset:function o(){r=null,i=null},setResult:function a(f=void 0){s={result:f}},clearResult:function c(){s=void 0}}}function Gm(...n){return function Ese(n,e={stateFn:vse}){return function(...t){let r=t;if(Array.isArray(r[0])){const[f,...m]=r;r=[...f,...m]}else 1===r.length&&function Ise(n){return!!n&&"object"==typeof n&&Object.values(n).every(e=>"function"==typeof e)}(r[0])&&(r=function wse(n){const e=Object.values(n),t=Object.keys(n);return[...e,(...i)=>t.reduce((s,o,a)=>({...s,[o]:i[a]}),{})]}(r[0]));const i=r.slice(0,r.length-1),s=r[r.length-1],o=i.filter(f=>f.release&&"function"==typeof f.release),a=n(function(...f){return s.apply(null,f)}),c=L0(function(f,m){return e.stateFn.apply(null,[f,i,m,a])});return Object.assign(c.memoized,{release:function u(){c.reset(),a.reset(),o.forEach(f=>f.release())},projector:a.memoized,setResult:c.setResult,clearResult:c.clearResult})}}(L0)(...n)}function vse(n,e,t,r){if(void 0===t){const s=e.map(o=>o(n));return r.memoized.apply(null,s)}const i=e.map(s=>s(n,t));return r.memoized.apply(null,[...i,t])}function V0(n){return Gm(e=>e[n],e=>e)}function Tse(n){return n instanceof Y?W(n):n}function Dse(n,e){return e.map((t,r)=>{if(n[r]instanceof Y){const i=W(n[r]);return{key:t.key,reducerFactory:i.reducerFactory?i.reducerFactory:P0,metaReducers:i.metaReducers?i.metaReducers:[],initialState:i.initialState}}return t})}function Ase(n){return n.map(e=>e instanceof Y?W(e):e)}function U0(n){return"function"==typeof n?n():n}function Sse(n,e){return n.concat(e)}function Rse(){if(W(Uc,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function B0(n){Object.freeze(n);const e=k0(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function mse(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const r=n[t];(mj(r)||k0(r))&&!Object.isFrozen(r)&&B0(r)}}),n}function j0(n,e=[]){return(fj(n)||pj(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;const s=n[i];return function gse(n){return k0(n)&&n.hasOwnProperty("\u0275cmp")}(s)?r:!(fj(s)||pj(s)||function fse(n){return"number"==typeof n}(s)||function hse(n){return"boolean"==typeof n}(s)||function dse(n){return"string"==typeof n}(s)||gj(s))&&(function _j(n){if(!function pse(n){return mj(n)&&!gj(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(s)?j0(s,[...e,i]):{path:[...e,i],value:s})},!1)}function vj(n,e){if(!1===n)return;const t=n.path.join("."),r=new Error(`Detected unserializable ${e} at "${t}". ${O0}#strict${e}serializability`);throw r.value=n.value,r.unserializablePath=t,r}function Nse(n){return{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Ose({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function Mse(n,e){return function(t,r){e.action(r)&&vj(j0(r),"action");const i=n(t,r);return e.state()&&vj(j0(i),"state"),i}}(t,{action:r=>n&&!$0(r),state:()=>e}):t}function kse({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function Pse(n,e){return function(t,r){const i=e.action(r)?B0(r):r,s=n(t,i);return e.state()?B0(s):s}}(t,{action:r=>n&&!$0(r),state:()=>e}):t}function $0(n){return n.type.startsWith("@ngrx")}function Fse({strictActionWithinNgZone:n}){return e=>n?function xse(n,e){return function(t,r){if(e.action(r)&&!st.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${O0}#strictactionwithinngzone`);return n(t,r)}}(e,{action:t=>n&&!$0(t)}):e}function Lse(n){return[{provide:cj,useValue:n},{provide:aj,useFactory:Vse,deps:[cj]},{provide:Um,deps:[aj],useFactory:Nse},{provide:YI,multi:!0,deps:[Um],useFactory:kse},{provide:YI,multi:!0,deps:[Um],useFactory:Ose},{provide:YI,multi:!0,deps:[Um],useFactory:Fse}]}function Ej(){return[{provide:Bm,multi:!0,deps:[Um],useFactory:Use}]}function Vse(n){return n}function Use(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(Vm).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${O0}#strictactiontypeuniqueness`)}function Ij(n={},e={}){return[{provide:b0,useFactory:Rse},{provide:ZB,useValue:e.initialState},{provide:QI,useFactory:U0,deps:[ZB]},{provide:T0,useValue:n},{provide:nj,useExisting:n instanceof Y?n:T0},{provide:ej,deps:[T0,[new Nd(nj)]],useFactory:Tse},{provide:sj,useValue:e.metaReducers?e.metaReducers:[]},{provide:oj,deps:[YI,sj],useFactory:Sse},{provide:JB,useValue:e.reducerFactory?e.reducerFactory:P0},{provide:XB,deps:[JB,oj],useFactory:dj},rse,ose,ase,lse,use,Lse(e.runtimeChecks),Ej()]}function wj(n,e,t={}){return[{provide:rj,multi:!0,useValue:n instanceof Object?{}:t},{provide:tj,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof Y||!t.reducerFactory?P0:t.reducerFactory,metaReducers:t instanceof Y||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof Y||!t.initialState?void 0:t.initialState}},{provide:A0,deps:[rj,tj],useFactory:Dse},{provide:D0,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:ij,multi:!0,useExisting:e instanceof Y?e:D0},{provide:S0,multi:!0,deps:[D0,[new Nd(ij)]],useFactory:Ase},Ej()]}let Cj=(()=>{class n{constructor(t,r,i,s,o,a){}static#e=this.\u0275fac=function(r){return new(r||n)(j(Da),j(jm),j(Hm),j(Uc),j(b0,8),j(Bm,8))};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})(),zse=(()=>{class n{constructor(t,r,i,s,o){this.features=t,this.featureReducers=r,this.reducerManager=i;const a=t.map((c,u)=>{const m=r.shift()[u];return{...c,reducers:m,initialState:U0(c.initialState)}});i.addFeatures(a)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static#e=this.\u0275fac=function(r){return new(r||n)(j(A0),j(S0),j($m),j(Cj),j(Bm,8))};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})(),bj=(()=>{class n{static forRoot(t,r){return{ngModule:Cj,providers:[...Ij(t,r)]}}static forFeature(t,r,i={}){return{ngModule:zse,providers:[...wj(t,r,i)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();function Au(...n){const e=Cm(n),t=function une(n,e){return"number"==typeof jS(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Xr(r[0]):Qh(t)(Tn(r,e)):ks}class Tj extends R{constructor(e=1/0,t=1/0,r=v0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function H0(n={}){const{connector:e=()=>new R,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,f=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},E=()=>{_(),o=c=void 0,f=m=!1},w=()=>{const b=o;E(),b?.unsubscribe()};return Ne((b,D)=>{u++,!m&&!f&&_();const k=c=c??e();D.add(()=>{u--,0===u&&!m&&!f&&(a=z0(w,i))}),k.subscribe(D),!o&&u>0&&(o=new Vr({next:x=>k.next(x),error:x=>{m=!0,_(),a=z0(E,t,x),k.error(x)},complete:()=>{f=!0,_(),a=z0(E,r),k.complete()}}),Xr(b).subscribe(o))})(s)}}function z0(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Vr({next:()=>{r.unsubscribe(),n()}});return Xr(e(...t)).subscribe(r)}const Su=new WI(qI),Gse=Su;function Dj(n){return n instanceof Date&&!isNaN(n)}const qse=Hn(n=>function(t=null){n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function Kse(n){throw new qse(n)}const qm="PERFORM_ACTION",Rj="ROLLBACK",xj="TOGGLE_ACTION",Oj="JUMP_TO_STATE",kj="JUMP_TO_ACTION",G0="IMPORT_STATE",Fj="LOCK_CHANGES",Lj="PAUSE_RECORDING";class ZI{constructor(e,t){if(this.action=e,this.timestamp=t,this.type=qm,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Zse{constructor(){this.type="REFRESH"}}class Xse{constructor(e){this.timestamp=e,this.type="RESET"}}class Jse{constructor(e){this.timestamp=e,this.type=Rj}}class eoe{constructor(e){this.timestamp=e,this.type="COMMIT"}}class toe{constructor(){this.type="SWEEP"}}class noe{constructor(e){this.id=e,this.type=xj}}class roe{constructor(e){this.index=e,this.type=Oj}}class ioe{constructor(e){this.actionId=e,this.type=kj}}class soe{constructor(e){this.nextLiftedState=e,this.type=G0}}class ooe{constructor(e){this.status=e,this.type=Fj}}class aoe{constructor(e){this.status=e,this.type=Lj}}const XI=new Y("@ngrx/store-devtools Options"),Vj=new Y("@ngrx/store-devtools Initial Config");function Uj(){return null}const coe="NgRx Store DevTools";function loe(n){const e={maxAge:!1,monitor:Uj,actionSanitizer:void 0,stateSanitizer:void 0,name:coe,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t="function"==typeof n?n():n,i=t.features||!!t.logOnly&&{pause:!0,export:!0,test:!0}||e.features;!0===i.import&&(i.import="custom");const s=Object.assign({},e,{features:i},t);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function Bj(n,e){return n.filter(t=>e.indexOf(t)<0)}function jj(n){const{computedStates:e,currentStateIndex:t}=n;if(t>=e.length){const{state:i}=e[e.length-1];return i}const{state:r}=e[t];return r}function Wm(n){return new ZI(n,+Date.now())}function uoe(n,e){return Object.keys(e).reduce((t,r)=>{const i=Number(r);return t[i]=$j(n,e[i],i),t},{})}function $j(n,e,t){return{...e,action:n(e.action,t)}}function doe(n,e){return e.map((t,r)=>({state:Hj(n,t.state,r),error:t.error}))}function Hj(n,e,t){return n(e,t)}function zj(n){return n.predicate||n.actionsSafelist||n.actionsBlocklist}function q0(n,e,t,r,i){const s=t&&!t(n,e.action),o=r&&!e.action.type.match(r.map(c=>Gj(c)).join("|")),a=i&&e.action.type.match(i.map(c=>Gj(c)).join("|"));return s||o||a}function Gj(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function qj(n){return{ngZone:n?W(st):null,connectInZone:n}}let JI=(()=>{class n extends Da{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})();static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const W0=new Y("@ngrx/store-devtools Redux Devtools Extension");let Wj=(()=>{class n{constructor(t,r,i){this.config=r,this.dispatcher=i,this.zoneConfig=qj(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,r){if(this.devtoolsExtension)if(t.type===qm){if(r.isLocked||r.isPaused)return;const i=jj(r);if(zj(this.config)&&q0(i,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const s=this.config.stateSanitizer?Hj(this.config.stateSanitizer,i,r.currentStateIndex):i,o=this.config.actionSanitizer?$j(this.config.actionSanitizer,t,r.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(o,s))}else{const i={...r,stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?uoe(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?doe(this.config.stateSanitizer,r.computedStates):r.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new St(t=>{const r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(i=>t.next(i)),r.unsubscribe}):ks}createActionStreams(){const t=this.createChangesObservable().pipe(H0()),r=t.pipe(Qn(u=>"START"===u.type)),i=t.pipe(Qn(u=>"STOP"===u.type)),s=t.pipe(Qn(u=>"DISPATCH"===u.type),Ce(u=>this.unwrapAction(u.payload)),wu(u=>u.type===G0?this.dispatcher.pipe(Qn(f=>f.type===x0),function Wse(n,e){const{first:t,each:r,with:i=Kse,scheduler:s=e??Su,meta:o=null}=Dj(n)?{first:n}:"number"==typeof n?{each:n}:n;if(null==t&&null==r)throw new TypeError("No timeout provided.");return Ne((a,c)=>{let u,f,m=null,_=0;const E=w=>{f=Oo(c,s,()=>{try{u.unsubscribe(),Xr(i({meta:o,lastValue:m,seen:_})).subscribe(c)}catch(b){c.error(b)}},w)};u=a.subscribe(Le(c,w=>{f?.unsubscribe(),_++,c.next(m=w),r>0&&E(r)},void 0,void 0,()=>{f?.closed||f?.unsubscribe(),m=null})),!_&&E(null!=t?"number"==typeof t?t:+t-s.now():r)})}(1e3),function Aj(n,e=Su){return Ne((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const u=s;s=null,r.next(u)}};function c(){const u=o+n,f=e.now();if(f<u)return i=this.schedule(void 0,u-f),void r.add(i);a()}t.subscribe(Le(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(1e3),Ce(()=>u),Lc(()=>ze(u)),ko(1)):ze(u))),a=t.pipe(Qn(u=>"ACTION"===u.type),Ce(u=>this.unwrapAction(u.payload))).pipe(ba(i)),c=s.pipe(ba(i));this.start$=r.pipe(ba(i)),this.actions$=this.start$.pipe(Xn(()=>a)),this.liftedActions$=this.start$.pipe(Xn(()=>c))}unwrapAction(t){return"string"==typeof t?(0,eval)(`(${t})`):t}getExtensionConfig(t){const r={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return!1!==t.maxAge&&(r.maxAge=t.maxAge),r}sendToReduxDevtools(t){try{t()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}static#e=this.\u0275fac=function(r){return new(r||n)(j(W0),j(XI),j(JI))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const tw={type:KI},foe={type:"@ngrx/store-devtools/recompute"};function Kj(n,e,t,r,i){if(r)return{state:t,error:"Interrupted by an error up the chain"};let o,s=t;try{s=n(t,e)}catch(a){o=a.toString(),i.handleError(a)}return{state:s,error:o}}function nw(n,e,t,r,i,s,o,a,c){if(e>=n.length&&n.length===s.length)return n;const u=n.slice(0,e),f=s.length-(c?1:0);for(let m=e;m<f;m++){const _=s[m],E=i[_].action,w=u[m-1],b=w?w.state:r,D=w?w.error:void 0,x=o.indexOf(_)>-1?w:Kj(t,E,b,D,a);u.push(x)}return c&&u.push(n[n.length-1]),u}let Qj=(()=>{class n{constructor(t,r,i,s,o,a,c,u){const f=function poe(n,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:Wm(tw)},stagedActionIds:[0],skippedActionIds:[],committedState:n,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}(c,u.monitor),m=function goe(n,e,t,r,i={}){return s=>(o,a)=>{let{monitorState:c,actionsById:u,nextActionId:f,stagedActionIds:m,skippedActionIds:_,committedState:E,currentStateIndex:w,computedStates:b,isLocked:D,isPaused:k}=o||e;function x(me){let Ee=me,F=m.slice(1,Ee+1);for(let S=0;S<F.length;S++){if(b[S+1].error){Ee=S,F=m.slice(1,Ee+1);break}delete u[F[S]]}_=_.filter(S=>-1===F.indexOf(S)),m=[0,...m.slice(Ee+1)],E=b[Ee].state,b=b.slice(Ee),w=w>Ee?w-Ee:0}function V(){u={0:Wm(tw)},f=1,m=[0],_=[],E=b[w].state,w=0,b=[]}o||(u=Object.create(u));let J=0;switch(a.type){case Fj:D=a.status,J=1/0;break;case Lj:k=a.status,k?(m=[...m,f],u[f]=new ZI({type:"@ngrx/devtools/pause"},+Date.now()),f++,J=m.length-1,b=b.concat(b[b.length-1]),w===m.length-2&&w++,J=1/0):V();break;case"RESET":u={0:Wm(tw)},f=1,m=[0],_=[],E=n,w=0,b=[];break;case"COMMIT":V();break;case Rj:u={0:Wm(tw)},f=1,m=[0],_=[],w=0,b=[];break;case xj:{const{id:me}=a;_=-1===_.indexOf(me)?[me,..._]:_.filter(F=>F!==me),J=m.indexOf(me);break}case"SET_ACTIONS_ACTIVE":{const{start:me,end:Ee,active:F}=a,S=[];for(let O=me;O<Ee;O++)S.push(O);_=F?Bj(_,S):[..._,...S],J=m.indexOf(me);break}case Oj:w=a.index,J=1/0;break;case kj:{const me=m.indexOf(a.actionId);-1!==me&&(w=me),J=1/0;break}case"SWEEP":m=Bj(m,_),_=[],w=Math.min(w,m.length-1);break;case qm:{if(D)return o||e;if(k||o&&q0(o.computedStates[w],a,i.predicate,i.actionsSafelist,i.actionsBlocklist)){const Ee=b[b.length-1];b=[...b.slice(0,-1),Kj(s,a.action,Ee.state,Ee.error,t)],J=1/0;break}i.maxAge&&m.length===i.maxAge&&x(1),w===m.length-1&&w++;const me=f++;u[me]=a,m=[...m,me],J=m.length-1;break}case G0:({monitorState:c,actionsById:u,nextActionId:f,stagedActionIds:m,skippedActionIds:_,committedState:E,currentStateIndex:w,computedStates:b,isLocked:D,isPaused:k}=a.nextLiftedState);break;case KI:J=0,i.maxAge&&m.length>i.maxAge&&(b=nw(b,J,s,E,u,m,_,t,k),x(m.length-i.maxAge),J=1/0);break;case x0:if(b.filter(Ee=>Ee.error).length>0)J=0,i.maxAge&&m.length>i.maxAge&&(b=nw(b,J,s,E,u,m,_,t,k),x(m.length-i.maxAge),J=1/0);else{if(!k&&!D){w===m.length-1&&w++;const Ee=f++;u[Ee]=new ZI(a,+Date.now()),m=[...m,Ee],J=m.length-1,b=nw(b,J,s,E,u,m,_,t,k)}b=b.map(Ee=>({...Ee,state:s(Ee.state,foe)})),w=m.length-1,i.maxAge&&m.length>i.maxAge&&x(m.length-i.maxAge),J=1/0}break;default:J=1/0}return b=nw(b,J,s,E,u,m,_,t,k),c=r(c,a),{monitorState:c,actionsById:u,nextActionId:f,stagedActionIds:m,skippedActionIds:_,committedState:E,currentStateIndex:w,computedStates:b,isLocked:D,isPaused:k}}}(c,f,a,u.monitor,u),_=Au(Au(r.asObservable().pipe(function Qse(n){return Qn((e,t)=>n<=t)}(1)),s.actions$).pipe(Ce(Wm)),t,s.liftedActions$).pipe(Ca(E0)),E=i.pipe(Ce(m)),w=qj(u.connectInZone),b=new Tj(1);this.liftedStateSubscription=_.pipe(KB(E),Yj(w),Xh(({state:x},[V,J])=>{let me=J(x,V);return V.type!==qm&&zj(u)&&(me=function hoe(n,e,t,r){const i=[],s={},o=[];return n.stagedActionIds.forEach((a,c)=>{const u=n.actionsById[a];u&&(c&&q0(n.computedStates[c],u,e,t,r)||(s[a]=u,i.push(a),o.push(n.computedStates[c])))}),{...n,stagedActionIds:i,actionsById:s,computedStates:o}}(me,u.predicate,u.actionsSafelist,u.actionsBlocklist)),s.notify(V,me),{state:me,action:V}},{state:f,action:null})).subscribe(({state:x,action:V})=>{b.next(x),V.type===qm&&o.next(V.action)}),this.extensionStartSubscription=s.start$.pipe(Yj(w)).subscribe(()=>{this.refresh()});const D=b.asObservable(),k=D.pipe(Ce(jj));Object.defineProperty(k,"state",{value:I0(k,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=D,this.state=k}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new ZI(t,+Date.now()))}refresh(){this.dispatch(new Zse)}reset(){this.dispatch(new Xse(+Date.now()))}rollback(){this.dispatch(new Jse(+Date.now()))}commit(){this.dispatch(new eoe(+Date.now()))}sweep(){this.dispatch(new toe)}toggleAction(t){this.dispatch(new noe(t))}jumpToAction(t){this.dispatch(new ioe(t))}jumpToState(t){this.dispatch(new roe(t))}importState(t){this.dispatch(new soe(t))}lockChanges(t){this.dispatch(new ooe(t))}pauseRecording(t){this.dispatch(new aoe(t))}static#e=this.\u0275fac=function(r){return new(r||n)(j(JI),j(Da),j(jm),j(Wj),j(Hm),j(Xs),j(QI),j(XI))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function Yj({ngZone:n,connectInZone:e}){return t=>e?new St(r=>t.subscribe({next:i=>n.run(()=>r.next(i)),error:i=>n.run(()=>r.error(i)),complete:()=>n.run(()=>r.complete())})):t}const moe=new Y("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function _oe(n,e){return!!n||e.monitor!==Uj}function yoe(){const n="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[n]<"u"?window[n]:null}function voe(n={}){return Io([Wj,JI,Qj,{provide:Vj,useValue:n},{provide:moe,deps:[W0,XI],useFactory:_oe},{provide:W0,useFactory:yoe},{provide:XI,deps:[Vj],useFactory:loe},{provide:N0,deps:[Qj],useFactory:Eoe},{provide:M0,useExisting:JI}])}function Eoe(n){return n.state}let Ioe=(()=>{class n{static instrument(t={}){return{ngModule:n,providers:[voe(t)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();var rn=function(n){return n.loadTodo="[Todo] loadTodo todo item",n.toggleTodo="[Todo] toogle todo item",n.createTodo="[Todo] create todo item",n.createCategory="[Category] create Category item",n.createFolder="[Todo] create Folder item",n.editTodo="[Todo] edit Todo item",n.editFolder="[Folder] edit Folder item",n.editCategory="[Category] edit Category item",n.deleteTodo="[Todo] deleteTodo todo item",n.deleteFolder="[Folder] delete Folder item",n.deleteFolderWithAllItems="[Folder] delete Folder with all items",n.deleteCategory="[Category] delete Category item",n.deleteCategoryWithAllItems="[Todo] delete Category with all items",n.changeTodoPriority="[Todo] change todo priority",n}(rn||{});class woe{constructor(e){this.payload=e,this.type=rn.createTodo}}class Coe{constructor(e){this.payload=e,this.type=rn.deleteTodo}}class boe{constructor(e){this.payload=e,this.type=rn.editTodo}}class Toe{constructor(e){this.payload=e,this.type=rn.toggleTodo}}class Doe{constructor(e){this.payload=e,this.type=rn.loadTodo}}class Aoe{constructor(e){this.payload=e,this.type=rn.createCategory}}class Soe{constructor(e){this.payload=e,this.type=rn.editCategory}}class Roe{constructor(e){this.payload=e,this.type=rn.createFolder}}class Poe{constructor(e){this.payload=e,this.type=rn.editFolder}}class Moe{constructor(e){this.payload=e,this.type=rn.deleteFolder}}class xoe{constructor(e){this.payload=e,this.type=rn.deleteFolderWithAllItems}}class Noe{constructor(e){this.payload=e,this.type=rn.deleteCategory}}class Ooe{constructor(e){this.payload=e,this.type=rn.deleteCategoryWithAllItems}}class koe{constructor(e){this.payload=e,this.type=rn.changeTodoPriority}}const Foe={idIncrement:1,todoList:[],categoriesList:[]},Loe=(n=Foe,e)=>{switch(e.type){case rn.createTodo:return{...n,idIncrement:n.idIncrement+1,todoList:[...n.todoList,{id:n.idIncrement,name:e.payload.name,completed:!1,currentFolderId:e.payload.currentFolderId,currentCategoryId:e.payload.currentCategoryId,priority:"none",date:e.payload.date}]};case rn.deleteTodo:return{...n,todoList:n.todoList.filter(t=>t.id!=e.payload.id)};case rn.toggleTodo:return{...n,todoList:n.todoList.map(t=>t.id===e.payload.id?{...t,completed:!t.completed}:t)};case rn.editTodo:return{...n,todoList:n.todoList.map(t=>t.id===e.payload.id?{...t,name:e.payload.name}:t)};case rn.loadTodo:return{...e.payload.state};case rn.createCategory:return{...n,idIncrement:n.idIncrement+1,categoriesList:[...n.categoriesList,{id:n.idIncrement,name:e.payload.name,foldersList:[]}]};case rn.editCategory:return{...n,categoriesList:n.categoriesList.map(t=>t.id===e.payload.id?{...t,name:e.payload.name}:t)};case rn.deleteCategory:return{...n,todoList:n.todoList.map(t=>t.currentCategoryId===e.payload.id?{...t,currentCategoryId:null,currentFolderId:null}:t),categoriesList:n.categoriesList.filter(t=>t.id!==e.payload.id)};case rn.createFolder:return{...n,idIncrement:n.idIncrement+1,categoriesList:n.categoriesList.map(t=>t.id===e.payload.currentCategoryId?{...t,foldersList:[...t.foldersList,{id:n.idIncrement,name:e.payload.folderName,favourite:!1,todoItems:[]}]}:t)};case rn.editFolder:return{...n,categoriesList:n.categoriesList.map(t=>({...t,foldersList:t.foldersList.map(r=>r.id===e.payload.id?{...r,name:e.payload.name}:r)}))};case rn.deleteFolder:return{...n,todoList:n.todoList.map(t=>t.currentFolderId===e.payload.id?{...t,currentFolderId:null}:t),categoriesList:n.categoriesList.map(t=>({...t,foldersList:t.foldersList.filter(r=>r.id!==e.payload.id)}))};case rn.deleteFolderWithAllItems:return{...n,todoList:n.todoList.filter(t=>t.currentFolderId!==e.payload.id),categoriesList:n.categoriesList.map(t=>({...t,foldersList:t.foldersList.filter(r=>r.id!==e.payload.id)}))};case rn.deleteCategoryWithAllItems:return{...n,todoList:n.todoList.filter(t=>t.currentCategoryId!==e.payload.id),categoriesList:n.categoriesList.filter(t=>t.id!==e.payload.id)};case rn.changeTodoPriority:return{...n,todoList:n.todoList.map(t=>t.id===e.payload.id?{...t,priority:e.payload.priority}:t)};default:return n}},K0=V0("todo"),Voe=Gm(K0,n=>n.todoList),Uoe=Gm(K0,n=>n.categoriesList),Q0="MyTodoNgrxApp",Y0="MyTodoNgrxAppCurrentCategory";let Z0=(()=>{class n{constructor(t){this.store$=t,this.isInit=!1}initTodos(){this.isInit||(this.isInit=!0,this.loadFromStorage(),this.store$.pipe(zm(K0),Qn(t=>!!t)).subscribe(t=>{localStorage.setItem(Q0,JSON.stringify(t))}),window.addEventListener("storage",()=>{this.loadFromStorage()}))}loadFromStorage(){const t=localStorage.getItem(Q0);t&&this.store$.dispatch(new Doe({state:JSON.parse(t)}))}setCurrentCategoryInLocalstorage(t){localStorage.setItem(Y0,JSON.stringify(t))}loadCurrentCategoryFromStorage(){const t=localStorage.getItem(Y0);return t?JSON.parse(t):null}clearAllData(){localStorage.removeItem(Y0),localStorage.removeItem(Q0)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Uc))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rw=(()=>{class n{constructor(t){this.todoStore$=t}todoCreate(t){const{name:r,currentFolderId:i,currentCategoryId:s,date:o}=t;this.todoStore$.dispatch(new woe({name:r,currentCategoryId:s,currentFolderId:i,date:o}))}todoEdit(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new boe({id:r,name:i}))}todoDelete(t){const{id:r}=t;this.todoStore$.dispatch(new Coe({id:r}))}todoToggle(t){this.todoStore$.dispatch(new Toe({id:t}))}categoryCreate(t){const{name:r}=t;this.todoStore$.dispatch(new Aoe({name:r}))}categoryEdit(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new Soe({id:r,name:i}))}deleteCategoryWithAllItems(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new Ooe({id:r,name:i}))}deleteCategoryAction(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new Noe({id:r,name:i}))}folderCreate(t){const{name:r,currentCategoryId:i}=t;this.todoStore$.dispatch(new Roe({currentCategoryId:i,folderName:r}))}folderEdit(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new Poe({id:r,name:i}))}deleteFolderWithAllItems(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new xoe({id:r,name:i}))}deleteFolderAction(t){const{id:r,name:i}=t;this.todoStore$.dispatch(new Moe({id:r,name:i}))}changeTodoPriority(t,r){const{id:i}=t;this.todoStore$.dispatch(new koe({id:i,priority:r}))}static#e=this.\u0275fac=function(r){return new(r||n)(j(Uc))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae=pt(467);class iw{}class sw{}class Fs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Boe{encodeKey(e){return Xj(e)}encodeValue(e){return Xj(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const $oe=/%(\d[a-f0-9])/gi,Hoe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Xj(n){return encodeURIComponent(n).replace($oe,(e,t)=>Hoe[t]??e)}function ow(n){return`${n}`}class Bc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Boe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function joe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ow):[ow(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Bc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ow(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ow(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zoe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Jj(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function e$(n){return typeof Blob<"u"&&n instanceof Blob}function t$(n){return typeof FormData<"u"&&n instanceof FormData}class Km{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Goe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Fs,this.context??=new zoe,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Bc,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||Jj(this.body)||e$(this.body)||t$(this.body)||function qoe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Bc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||t$(this.body)?null:e$(this.body)?this.body.type||null:Jj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let u=e.headers||this.headers,f=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((_,E)=>_.set(E,e.setHeaders[E]),u)),e.setParams&&(f=Object.keys(e.setParams).reduce((_,E)=>_.set(E,e.setParams[E]),f)),new Km(t,r,o,{params:f,headers:u,context:m,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}}var jc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(jc||{});class X0{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class aw extends X0{constructor(e={}){super(e),this.type=jc.ResponseHeader}clone(e={}){return new aw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ru extends X0{constructor(e={}){super(e),this.type=jc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ru({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hf extends X0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function J0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let r$=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Km)s=t;else{let c,u;c=i.headers instanceof Fs?i.headers:new Fs(i.headers),i.params&&(u=i.params instanceof Bc?i.params:new Bc({fromObject:i.params})),s=new Km(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=ze(s).pipe(wu(c=>this.handler.handle(c)));if(t instanceof Km||"events"===i.observe)return o;const a=o.pipe(Qn(c=>c instanceof Ru));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ce(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Ce(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Ce(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Ce(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Bc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,J0(i,r))}post(t,r,i={}){return this.request("POST",t,J0(i,r))}put(t,r,i={}){return this.request("PUT",t,J0(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(j(iw))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const Qoe=/^\)\]\}',?\n/;function i$(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let eR=(()=>{class n{constructor(){this.fetchImpl=W(Zoe,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=W(st)}handle(t){return new St(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(tR,s=>r.error(new hf({error:s}))),()=>i.abort()})}doRequest(t,r,i){var s=this;return(0,ae.A)(function*(){const o=s.createRequestInit(t);let a;try{const w=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:r,...o}));(function Xoe(n){n.then(tR,tR)})(w),i.next({type:jc.Sent}),a=yield w}catch(w){return void i.error(new hf({error:w,status:w.status??0,statusText:w.statusText,url:t.urlWithParams,headers:w.headers}))}const c=new Fs(a.headers),u=a.statusText,f=i$(a)??t.urlWithParams;let m=a.status,_=null;if(t.reportProgress&&i.next(new aw({headers:c,status:m,statusText:u,url:f})),a.body){const w=a.headers.get("content-length"),b=[],D=a.body.getReader();let x,V,k=0;const J=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,ae.A)(function*(){for(;;){const{done:Ee,value:F}=yield D.read();if(Ee)break;if(b.push(F),k+=F.length,t.reportProgress){V="text"===t.responseType?(V??"")+(x??=new TextDecoder).decode(F,{stream:!0}):void 0;const S=()=>i.next({type:jc.DownloadProgress,total:w?+w:void 0,loaded:k,partialText:V});J?J.run(S):S()}}}));const me=s.concatChunks(b,k);try{const Ee=a.headers.get("Content-Type")??"";_=s.parseBody(t,me,Ee)}catch(Ee){return void i.error(new hf({error:Ee,headers:new Fs(a.headers),status:a.status,statusText:a.statusText,url:i$(a)??t.urlWithParams}))}}0===m&&(m=_?200:0),m>=200&&m<300?(i.next(new Ru({body:_,headers:c,status:m,statusText:u,url:f})),i.complete()):i.error(new hf({error:_,headers:c,status:m,statusText:u,url:f}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const s=(new TextDecoder).decode(r).replace(Qoe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let s=0;for(const o of t)i.set(o,s),s+=o.length;return i}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();class Zoe{}function tR(){}function s$(n,e){return e(n)}function Joe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const tae=new Y(""),Qm=new Y(""),o$=new Y(""),a$=new Y("",{providedIn:"root",factory:()=>!0});function nae(){let n=null;return(e,t)=>{null===n&&(n=(W(tae,{optional:!0})??[]).reduceRight(Joe,s$));const r=W(ma);if(W(a$)){const s=r.add();return n(e,t).pipe(Jh(()=>r.remove(s)))}return n(e,t)}}let c$=(()=>{class n extends iw{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=W(ma),this.contributeToStability=W(a$)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Qm),...this.injector.get(o$,[])]));this.chain=r.reduceRight((i,s)=>function eae(n,e,t){return(r,i)=>Ts(t,()=>e(r,s=>n(s,i)))}(i,s,this.injector),s$)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Jh(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static#e=this.\u0275fac=function(r){return new(r||n)(j(sw),j(Tr))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const aae=/^\)\]\}',?\n/;let u$=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new he(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Tn(r.\u0275loadImpl()):ze(null)).pipe(Xn(()=>new St(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((b,D)=>o.setRequestHeader(b,D.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const b=t.detectContentTypeHeader();null!==b&&o.setRequestHeader("Content-Type",b)}if(t.responseType){const b=t.responseType.toLowerCase();o.responseType="json"!==b?b:"text"}const a=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const b=o.statusText||"OK",D=new Fs(o.getAllResponseHeaders()),k=function cae(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new aw({headers:D,status:o.status,statusText:b,url:k}),c},f=()=>{let{headers:b,status:D,statusText:k,url:x}=u(),V=null;204!==D&&(V=typeof o.response>"u"?o.responseText:o.response),0===D&&(D=V?200:0);let J=D>=200&&D<300;if("json"===t.responseType&&"string"==typeof V){const me=V;V=V.replace(aae,"");try{V=""!==V?JSON.parse(V):null}catch(Ee){V=me,J&&(J=!1,V={error:Ee,text:V})}}J?(s.next(new Ru({body:V,headers:b,status:D,statusText:k,url:x||void 0})),s.complete()):s.error(new hf({error:V,headers:b,status:D,statusText:k,url:x||void 0}))},m=b=>{const{url:D}=u(),k=new hf({error:b,status:o.status||0,statusText:o.statusText||"Unknown Error",url:D||void 0});s.error(k)};let _=!1;const E=b=>{_||(s.next(u()),_=!0);let D={type:jc.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(D.total=b.total),"text"===t.responseType&&o.responseText&&(D.partialText=o.responseText),s.next(D)},w=b=>{let D={type:jc.UploadProgress,loaded:b.loaded};b.lengthComputable&&(D.total=b.total),s.next(D)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",E),null!==a&&o.upload&&o.upload.addEventListener("progress",w)),o.send(a),s.next({type:jc.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",E),null!==a&&o.upload&&o.upload.removeEventListener("progress",w)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(j(iU))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const nR=new Y(""),d$=new Y("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),h$=new Y("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class f${}let dae=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=K2(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt),j(ss),j(d$))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();function hae(n,e){const t=n.url.toLowerCase();if(!W(nR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=W(f$).getToken(),i=W(h$);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var $c=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}($c||{});function fae(...n){const e=[r$,u$,c$,{provide:iw,useExisting:c$},{provide:sw,useFactory:()=>W(eR,{optional:!0})??W(u$)},{provide:Qm,useValue:hae,multi:!0},{provide:nR,useValue:!0},{provide:f$,useClass:dae}];for(const t of n)e.push(...t.\u0275providers);return Io(e)}const p$=new Y("");function pae(){return function Pu(n,e){return{\u0275kind:n,\u0275providers:e}}($c.LegacyInterceptors,[{provide:p$,useFactory:nae},{provide:Qm,useExisting:p$,multi:!0}])}let g$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({providers:[fae(pae())]})}return n})();const Cae=["*"];class lw{}let C$=(()=>{class n extends lw{constructor(t){super(),this.http=t}getSvg(t){return this.http.get(t,{responseType:"text"})}static#e=this.\u0275fac=function(r){return new(r||n)(j(r$))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const bae=new Y("SERVER_URL");let uw=(()=>{class n{constructor(){this.loader=W(lw),this.serverUrl=W(bae,{optional:!0}),this.document=W(Xt),this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map}addSvg(t,r){if(!this.iconsByUrl.has(t)){const i=this.document.createElement("DIV");i.innerHTML=r;const s=i.querySelector("svg");this.iconsByUrl.set(t,s)}}loadSvg(t,r=t){if(this.serverUrl&&null===t.match(/^(http(s)?):/)&&(r=t=this.serverUrl+t),this.iconsByUrl.has(r))return ze(this.iconsByUrl.get(r));if(this.iconsLoadingByUrl.has(r))return this.iconsLoadingByUrl.get(r);const i=this.loader.getSvg(t).pipe(Ce(s=>{const o=this.document.createElement("DIV");return o.innerHTML=s,o.querySelector("svg")}),xr(s=>this.iconsByUrl.set(r,s)),Lc(s=>(console.error(s),Yh(s))),Jh(()=>this.iconsLoadingByUrl.delete(r)),H0());return this.iconsLoadingByUrl.set(r,i),i}getSvgByName(t){return this.iconsByUrl.has(t)?ze(this.iconsByUrl.get(t)):this.iconsLoadingByUrl.has(t)?this.iconsLoadingByUrl.get(t):Yh(`No svg with name '${t}' has been loaded`)}unloadSvg(t){this.iconsByUrl.has(t)&&this.iconsByUrl.delete(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac})}return n})();const b$={provide:uw,deps:[[new Ja,new Od,uw]],useFactory:function Tae(n){return n||new uw}};class T${constructor(){this.loaded=!1}}let Mu=(()=>{class n{constructor(){let t,r;this.element=W(Kn),this.differs=W(fm),this.renderer=W(Ro),this.iconReg=W(uw),this.src=_a(),this.name=_a(),this.stretch=_a(!1),this.applyClass=_a(!1),this.svgClass=_a(),this.klass=_a(void 0,{alias:"class"}),this.viewBox=_a(),this.svgAriaLabel=_a(),this.svg=Js(0),this.svgStyle=_a(),this.helper=new T$,No(()=>{(this.src()||this.name())&&(this.destroy(),this.init(this.src(),this.name()))},{allowSignalWrites:!0}),No(()=>{const i=this.viewBox();this.svg()&&this.updateViewBox(i)}),No(()=>{const i=this.svgStyle()||{};this.svg()&&this.applyChanges(this.helper.differ.diff(i))}),No(()=>{this.svg(),this.applyClass()?this.setClass(this.elemSvg,null,this.klass()):this.setClass(this.elemSvg,this.klass(),null)}),No(()=>{this.svg(),this.setClass(this.elemSvg,t,this.svgClass()),t=this.svgClass()}),No(()=>{this.svg(),this.setClass(this.element.nativeElement,r,this.klass()),this.setClass(this.elemSvg,r,this.applyClass()?this.klass():null),r=this.klass()}),No(()=>{this.svg(),this.doAria(this.svgAriaLabel())}),No(()=>{this.svg(),this.stylize(this.stretch())})}ngOnDestroy(){this.destroy()}get elemSvg(){return this.element.nativeElement.firstChild}init(t,r){if(t&&r){const i=this.iconReg.loadSvg(t,r);i&&(this.helper.icnSub=i.subscribe(s=>this.initSvg(s)))}else if(r){const i=this.iconReg.getSvgByName(r);i&&(this.helper.icnSub=i.subscribe(s=>this.initSvg(s)))}else if(t){const i=this.iconReg.loadSvg(t);i&&(this.helper.icnSub=i.subscribe(s=>this.initSvg(s)))}else this.element.nativeElement.innerHTML="",this.svg.set(0)}initSvg(t){!this.helper.loaded&&t&&this.setSvg(t)}destroy(){this.helper.icnSub?.unsubscribe(),this.helper=new T$,this.helper.differ=this.differs.find({}).create()}setSvg(t){if(!this.helper.loaded&&t){this.helper.svg=t;const r=t.cloneNode(!0),i=this.element.nativeElement;i.innerHTML="",this.renderer.appendChild(i,r),this.helper.loaded=!0,this.copyNgContentAttribute(i,r),this.svg.update(s=>s+1)}}updateViewBox(t){if(t){const r=this.elemSvg;if("auto"===t){const i=r.getAttribute("width"),s=r.getAttribute("height");s&&i&&(this.renderer.setAttribute(r,"viewBox",`0 0 ${i} ${s}`),this.renderer.removeAttribute(r,"width"),this.renderer.removeAttribute(r,"height"))}else""!==t&&(this.renderer.setAttribute(r,"viewBox",t),this.renderer.removeAttribute(r,"width"),this.renderer.removeAttribute(r,"height"))}}copyNgContentAttribute(t,r){const i=t.attributes,s=i.length;for(let o=0;o<s;o+=1){const a=i.item(o);if(a&&a.name.startsWith("_ngcontent")){this.setNgContentAttribute(r,a.name);break}}}setNgContentAttribute(t,r){this.renderer.setAttribute(t,r,"");const i=t.childNodes.length;for(let s=0;s<i;s+=1){const o=t.childNodes[s];o instanceof Element&&this.setNgContentAttribute(o,r)}}stylize(t){if(this.helper.svg){const r=this.element.nativeElement.firstChild;!0===t?this.renderer.setAttribute(r,"preserveAspectRatio","none"):!1===t&&this.renderer.removeAttribute(r,"preserveAspectRatio")}}applyChanges(t){t&&(t.forEachRemovedItem(r=>this.setStyle(r.key,null)),t.forEachAddedItem(r=>this.setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this.setStyle(r.key,r.currentValue)))}setStyle(t,r){const[i,s]=t.split("."),o=this.elemSvg;null!==(r=null!==r&&s?`${r}${s}`:r)?this.renderer.setStyle(o,i,r):this.renderer.removeStyle(o,i)}setClass(t,r,i){if(t){if(r){const s=(Array.isArray(r)?r:r.split(" ")).filter(o=>o);for(const o of s)this.renderer.removeClass(t,o)}if(i){const s=(Array.isArray(i)?i:i.split(" ")).filter(o=>o);for(const o of s)this.renderer.addClass(t,o)}}}doAria(t){if(void 0!==t){const r=this.element.nativeElement.firstChild;r&&!r.hasAttribute("aria-label")&&(""===t?(this.renderer.setAttribute(r,"aria-hidden","true"),this.renderer.removeAttribute(r,"aria-label")):(this.renderer.removeAttribute(r,"aria-hidden"),this.renderer.setAttribute(r,"aria-label",t)))}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["svg-icon"]],inputs:{src:[1,"src"],name:[1,"name"],stretch:[1,"stretch"],applyClass:[1,"applyClass"],svgClass:[1,"svgClass"],klass:[1,"class","klass"],viewBox:[1,"viewBox"],svgAriaLabel:[1,"svgAriaLabel"],svgStyle:[1,"svgStyle"]},standalone:!0,features:[jE],ngContentSelectors:Cae,decls:1,vars:0,template:function(r,i){1&r&&(OA(),kA(0))},encapsulation:2,changeDetection:0})}return n})(),D$=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[b$,t.loader||{provide:lw,useClass:C$}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();const Dae=()=>({"width.px":20,"height.px":20});function Aae(n,e){if(1&n&&(Ke(0,"del")(1,"span"),_r(2),Ye()()),2&n){const t=Ot();Ve(2),Bh(null==t.todo?null:t.todo.name)}}function Sae(n,e){if(1&n&&(Ke(0,"span"),_r(1),Ye()),2&n){const t=Ot();Ve(),Bh(null==t.todo?null:t.todo.name)}}let Rae=(()=>{class n{constructor(){this.toggle=new Ze}ngOnChanges(t){this.listClasses=[this.todo?.priority]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-todo-list-item-ui"]],inputs:{todo:"todo"},outputs:{toggle:"toggle"},features:[Ar],decls:8,vars:7,consts:[[1,"todo-item-wrapper"],[1,"round-checkbox-container"],["type","checkbox",3,"click","checked"],[1,"checkmark"],[3,"src","svgStyle"],[1,"todo-item__text"]],template:function(r,i){1&r&&(Ke(0,"div",0)(1,"label",1)(2,"input",2),ft("click",function(){return i.toggle.emit()}),Ye(),Ke(3,"span",3),wn(4,"svg-icon",4),Ye()(),Ke(5,"div",5),hi(6,Aae,3,1,"del")(7,Sae,2,1,"span"),Ye()()),2&r&&(Zg(i.listClasses),Ve(2),ot("checked",null==i.todo?null:i.todo.completed),Ve(2),ot("src","assets/icons/check.svg")("svgStyle",ro(6,Dae)),Ve(2),Ps(null!=i.todo&&i.todo.completed?6:7))},dependencies:[Mu],styles:["[_ngcontent-%COMP%]:root{--btn-primary: #676127;--btn-active: #A79700;--btn-disabled: #B3AD8C;--create-tool-btn-not-active: #B3AD8C;--none-atribute-btn: #835600;--todo-bg-yellow: #FDF3BB;--body-bg: #F8F1E5;--input-bg: #B3AD8C33;--input-text-color: #67612780;--devider-bg: #B3AD8C;--header-border-color: #835600;--white: #FFFFFF;--border-radius: 5px;--high-bg-color: #FFD3DB;--high-border-color: #830000;--high-checked-bg-color: #FFB6AB;--high-actions-bar-bg-color:#FFD5D2;--medium-bg-color: #FFDCB4;--medium-border-color: #830000;--medium-checked-bg-color: #FFD098;--medium-actions-bar-bg-color:#FFDFC1;--low-bg-color: #EAE7FF;--low-border-color: #7E6FD9;--low-checked-bg-color: #D5CAFF;--low-actions-bar-bg-color:#E2DBFF;--none-bg-color: #FDF3BB;--none-border-color: #835600;--none-checked-bg-color: #FAE09D;--none-actions-bar-bg-color:#FCF0C5}.todo-item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;min-height:40px;padding:0 10px;background-color:-var(--todo-bg-yellow)}.todo-item__text[_ngcontent-%COMP%]{flex-basis:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-align:left}.round-checkbox-container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;user-select:none}.round-checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer}.checkmark[_ngcontent-%COMP%]{position:absolute;top:-6px;left:0;height:25px;width:25px;background-color:#eee;border-radius:50%}svg-icon[_ngcontent-%COMP%]{display:none}.round-checkbox-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}return n})();const rR=[{type:"task-item",wrapper:"task-item__swipe-wrapper",bar:"task-item__tool-bar",barItem:"task-item__tool-bar__item"},{type:"folder-item",wrapper:"folder-item__swipe-wrapper",bar:"folder-item__tool-bar",barItem:"folder-item__tool-bar__item",priority:"none"},{type:"category-item",wrapper:"category-item__swipe-wrapper",bar:"category-item__tool-bar",barItem:"category-item__tool-bar__item",priority:"none"}];let A$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Ro),ie(Kn))};static#t=this.\u0275dir=Qe({type:n})}return n})(),xu=(()=>{class n extends A${static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})();static#t=this.\u0275dir=Qe({type:n,features:[nn]})}return n})();const Uo=new Y(""),xae={provide:Uo,useExisting:on(()=>Ym),multi:!0},Oae=new Y("");let Ym=(()=>{class n extends A${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nae(){const n=kc()?kc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Ro),ie(Kn),ie(Oae,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ft("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Zt([xae]),nn]})}return n})();function Hc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function R$(n){return null!=n&&"number"==typeof n.length}const pi=new Y(""),zc=new Y(""),kae=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zm{static min(e){return function P$(n){return e=>{if(Hc(e.value)||Hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function M$(n){return e=>{if(Hc(e.value)||Hc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return x$(e)}static requiredTrue(e){return function N$(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function O$(n){return Hc(n.value)||kae.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function k$(n){return e=>Hc(e.value)||!R$(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function F$(n){return e=>R$(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function L$(n){if(!n)return dw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Hc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return H$(e)}static composeAsync(e){return z$(e)}}function x$(n){return Hc(n.value)?{required:!0}:null}function dw(n){return null}function V$(n){return null!=n}function U$(n){return um(n)?Tn(n):n}function B$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function j$(n,e){return e.map(t=>t(n))}function $$(n){return n.map(e=>function Fae(n){return!n.validate}(e)?e:t=>e.validate(t))}function H$(n){if(!n)return null;const e=n.filter(V$);return 0==e.length?null:function(t){return B$(j$(t,e))}}function iR(n){return null!=n?H$($$(n)):null}function z$(n){if(!n)return null;const e=n.filter(V$);return 0==e.length?null:function(t){return function Pae(...n){const e=$S(n),{args:t,keys:r}=UU(n),i=new St(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let f=0;f<o;f++){let m=!1;Xr(t[f]).subscribe(Le(s,_=>{m||(m=!0,u--),a[f]=_},()=>c--,void 0,()=>{(!c||!m)&&(u||s.next(r?BU(r,a):a),s.complete())}))}});return e?i.pipe(HS(e)):i}(j$(t,e).map(U$)).pipe(Ce(B$))}}function sR(n){return null!=n?z$($$(n)):null}function G$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function q$(n){return n._rawValidators}function W$(n){return n._rawAsyncValidators}function oR(n){return n?Array.isArray(n)?n:[n]:[]}function hw(n,e){return Array.isArray(n)?n.includes(e):n===e}function K$(n,e){const t=oR(e);return oR(n).forEach(i=>{hw(t,i)||t.push(i)}),t}function Q$(n,e){return oR(e).filter(t=>!hw(n,t))}class Y${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ni extends Y${get formDirective(){return null}get path(){return null}}class Gc extends Y${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Z${constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let aR=(()=>{class n extends Z${constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Gc,2))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Rc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[nn]})}return n})(),cR=(()=>{class n extends Z${constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Ni,10))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Rc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[nn]})}return n})();const Xm="VALID",pw="INVALID",ff="PENDING",Jm="DISABLED";class pf{}class J$ extends pf{constructor(e,t){super(),this.value=e,this.source=t}}class dR extends pf{constructor(e,t){super(),this.pristine=e,this.source=t}}class hR extends pf{constructor(e,t){super(),this.touched=e,this.source=t}}class gw extends pf{constructor(e,t){super(),this.status=e,this.source=t}}class jae extends pf{constructor(e){super(),this.source=e}}class $ae extends pf{constructor(e){super(),this.source=e}}function fR(n){return(mw(n)?n.validators:n)||null}function pR(n,e){return(mw(e)?e.asyncValidators:n)||null}function mw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class gR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=vu(()=>this.statusReactive()),this.statusReactive=Js(void 0),this._pristine=vu(()=>this.pristineReactive()),this.pristineReactive=Js(!0),this._touched=vu(()=>this.touchedReactive()),this.touchedReactive=Js(!1),this._events=new R,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return so(this.statusReactive)}set status(e){so(()=>this.statusReactive.set(e))}get valid(){return this.status===Xm}get invalid(){return this.status===pw}get pending(){return this.status==ff}get disabled(){return this.status===Jm}get enabled(){return this.status!==Jm}get pristine(){return so(this.pristineReactive)}set pristine(e){so(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return so(this.touchedReactive)}set touched(e){so(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(K$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(K$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Q$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Q$(e,this._rawAsyncValidators))}hasValidator(e){return hw(this._rawValidators,e)}hasAsyncValidator(e){return hw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new hR(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new hR(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new dR(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new dR(!0,r))}markAsPending(e={}){this.status=ff;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new gw(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jm,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new J$(this.value,r)),this._events.next(new gw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xm||this.status===ff)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new J$(this.value,t)),this._events.next(new gw(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jm:Xm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ff,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=U$(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gw(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Jm:this.errors?pw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ff)?ff:this._anyControlsHaveStatus(pw)?pw:Xm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new dR(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new hR(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Hae(n){return Array.isArray(n)?iR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function zae(n){return Array.isArray(n)?sR(n):n||null}(this._rawAsyncValidators)}}class Nu extends gR{constructor(e,t,r){super(fR(t),pR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function tH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new he(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function eH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new he(1e3,"");if(!r[t])throw new he(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ou=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>e_}),e_="always";function t_(n,e,t=e_){mR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Wae(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nH(n,e)})}(n,e),function Qae(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Kae(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qae(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yw(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ew(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function vw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mR(n,e){const t=q$(n);null!==e.validator?n.setValidators(G$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=W$(n);null!==e.asyncValidator?n.setAsyncValidators(G$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();vw(e._rawValidators,i),vw(e._rawAsyncValidators,i)}function Ew(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=q$(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=W$(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return vw(e._rawValidators,r),vw(e._rawAsyncValidators,r),t}function nH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function oH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const Aa=class extends gR{constructor(e=null,t,r){super(fR(t),pR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=oH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};Promise.resolve();let IR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const wR=new Y(""),lce={provide:Ni,useExisting:on(()=>r_)};let r_=(()=>{class n extends Ni{get submitted(){return so(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=vu(()=>this._submittedReactive()),this._submittedReactive=Js(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ze,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ew(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return t_(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yw(t.control||null,t,!1),function Jae(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),function iH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new jae(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new $ae(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(yw(r||null,t),(n=>n instanceof Aa)(i)&&(t_(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function rH(n,e){mR(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Yae(n,e){return Ew(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mR(this.form,this),this._oldForm&&Ew(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(ie(pi,10),ie(zc,10),ie(Ou,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&ft("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zt([lce]),nn,Ar]})}return n})();const hce={provide:Gc,useExisting:on(()=>Iw)};let Iw=(()=>{class n extends Gc{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Ze,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function vR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Ym?t=s:function Xae(n){return Object.getPrototypeOf(n.constructor)===xu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function yR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function _w(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(ie(Ni,13),ie(pi,10),ie(zc,10),ie(Uo,10),ie(wR,8))};static#n=this.\u0275dir=Qe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Zt([hce]),nn,Ar]})}return n})(),ku=(()=>{class n{constructor(){this._validator=dw}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dw,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Qe({type:n,features:[Ar]})}return n})();const Ice={provide:pi,useExisting:on(()=>i_),multi:!0};let i_=(()=>{class n extends ku{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Mr,this.createValidator=t=>x$}enabled(t){return t}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mr(n)))(i||n)}})();static#t=this.\u0275dir=Qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&eo("required",i._enabled?"":null)},inputs:{required:"required"},features:[Zt([Ice]),nn]})}return n})(),AH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})(),SH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ou,useValue:t.callSetDisabledState??e_}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({imports:[AH]})}return n})(),AR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ou,useValue:t.callSetDisabledState??e_}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({imports:[AH]})}return n})(),Sce=(()=>{class n{constructor(){this.editItem=new Ze,this.editNameForm=new Nu({name:new Aa("",{nonNullable:!0,validators:Zm.required})})}ngOnInit(){this.setDefaultValues()}setDefaultValues(){this.todoForEdit?this.editNameForm.controls.name.patchValue(this.todoForEdit.name):this.folderForEdit?this.editNameForm.controls.name.patchValue(this.folderForEdit.name):this.categoryForEdit&&this.editNameForm.controls.name.patchValue(this.categoryForEdit.name)}onSubmit(){if(this.editNameForm.valid)switch(this.modalType){case"todoEdit":return this.editTodo();case"folderEdit":return this.editFolder();case"categoryEdit":return this.editCategory()}}editTodo(){this.editNameForm.valid&&this.editItem.emit({type:this.modalType,todo:{...this.todoForEdit,name:this.editNameForm.controls.name.value}})}editFolder(){this.folderForEdit&&this.editNameForm.valid&&this.editItem.emit({type:this.modalType,folder:{...this.folderForEdit,name:this.editNameForm.controls.name.value}})}editCategory(){this.editNameForm.valid&&this.editItem.emit({type:this.modalType,category:{...this.categoryForEdit,name:this.editNameForm.controls.name.value}})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-edit-form"]],inputs:{modalType:"modalType",todoForEdit:"todoForEdit",folderForEdit:"folderForEdit",categoryForEdit:"categoryForEdit"},outputs:{editItem:"editItem"},decls:4,vars:2,consts:[["id","form",3,"ngSubmit","formGroup"],[1,"form__content"],["required","","type","text","name","text","placeholder","Edit Name","formControlName","name"],["type","submit",1,"btn","btn__big","btn__add-todo",3,"click","disabled"]],template:function(r,i){1&r&&(Ke(0,"form",0),ft("ngSubmit",function(){return i.onSubmit()}),Ke(1,"div",1),wn(2,"input",2),Ye(),Ke(3,"button",3),ft("click",function(){return i.onSubmit()}),Ye()()),2&r&&(ot("formGroup",i.editNameForm),Ve(3),ot("disabled",!i.editNameForm.valid))},dependencies:[IR,Ym,aR,cR,i_,r_,Iw],styles:["[_ngcontent-%COMP%]:root{--btn-primary: #676127;--btn-active: #A79700;--btn-disabled: #B3AD8C;--create-tool-btn-not-active: #B3AD8C;--none-atribute-btn: #835600;--todo-bg-yellow: #FDF3BB;--body-bg: #F8F1E5;--input-bg: #B3AD8C33;--input-text-color: #67612780;--devider-bg: #B3AD8C;--header-border-color: #835600;--white: #FFFFFF;--border-radius: 5px;--high-bg-color: #FFD3DB;--high-border-color: #830000;--high-checked-bg-color: #FFB6AB;--high-actions-bar-bg-color:#FFD5D2;--medium-bg-color: #FFDCB4;--medium-border-color: #830000;--medium-checked-bg-color: #FFD098;--medium-actions-bar-bg-color:#FFDFC1;--low-bg-color: #EAE7FF;--low-border-color: #7E6FD9;--low-checked-bg-color: #D5CAFF;--low-actions-bar-bg-color:#E2DBFF;--none-bg-color: #FDF3BB;--none-border-color: #835600;--none-checked-bg-color: #FAE09D;--none-actions-bar-bg-color:#FCF0C5}[_nghost-%COMP%]{width:100%}form[_ngcontent-%COMP%]{display:flex;gap:16px}.form__content[_ngcontent-%COMP%]{border:1px solid var(--header-border-color);border-radius:var(--border-radius);flex-grow:2;padding:4px}input[_ngcontent-%COMP%]{padding-left:10px;height:24px;width:100%;background-color:var(--input-bg);border-radius:var(--border-radius);color:#000;font-family:Metrophobic;font-size:16px;font-weight:600;line-height:19.73px;text-align:left}input[_ngcontent-%COMP%]::placeholder{color:var(--input-text-color);font-size:16px;font-weight:400}.btn__add-todo[_ngcontent-%COMP%]{background-image:url(plus.7a25038cd2c991ed.svg);background-repeat:no-repeat,repeat;background-position:center;background-size:20px 20px}button[type=submit][_ngcontent-%COMP%]{width:32px;padding:6px 0}"]})}return n})();function Rce(n,e){if(1&n){const t=fi();Ke(0,"div")(1,"div",2)(2,"button",5),ft("click",function(){return fn(t),an(Ot().deleteAllFoldersItems(!0))}),_r(3,"delete all"),Ye(),Ke(4,"button",5),ft("click",function(){return fn(t),an(Ot().deleteAllFoldersItems(!1))}),_r(5,"delete only folder"),Ye()()()}}function Pce(n,e){if(1&n){const t=fi();Ke(0,"div",2)(1,"button",5),ft("click",function(){return fn(t),an(Ot().deleteAllCategoriesItems(!0))}),_r(2,"delete all"),Ye(),Ke(3,"button",5),ft("click",function(){return fn(t),an(Ot().deleteAllCategoriesItems(!1))}),_r(4,"delete only Category"),Ye()()}}function Mce(n,e){if(1&n){const t=fi();Ke(0,"app-edit-form",6),ft("editItem",function(i){return fn(t),an(Ot().onItemEdit(i))}),Ye()}if(2&n){const t=Ot();ot("modalType",t.type)("todoForEdit",t.todo)("folderForEdit",t.folder)("categoryForEdit",t.category)}}let xce=(()=>{class n{constructor(t){this.elementRef=t,this.size="md",this.title="Modal title",this.type="",this.closeEvent=new Ze,this.submitEvent=new Ze,this.createCategoryEvent=new Ze,this.deleteFoldersItems=new Ze,this.deleteCategoriesItems=new Ze,this.editTodo=new Ze,this.editFolder=new Ze,this.editCategory=new Ze}handleEscapeKey(t){this.close()}close(){this.elementRef.nativeElement.remove(),this.closeEvent.emit()}onItemEdit(t){t.todo?this.editTodo.emit(t.todo):t.folder?this.editFolder.emit(t.folder):t.category&&this.editCategory.emit(t.category),this.close()}deleteAllFoldersItems(t){this.deleteFoldersItems.emit(t),this.close()}deleteAllCategoriesItems(t){this.deleteFoldersItems.emit(t),this.close()}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Kn))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-modal-ui"]],hostBindings:function(r,i){1&r&&ft("keydown.escape",function(o){return i.handleEscapeKey(o)},0,ik)},inputs:{size:"size",title:"title",type:"type",category:"category",folder:"folder",todo:"todo"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent",createCategoryEvent:"createCategoryEvent",deleteFoldersItems:"deleteFoldersItems",deleteCategoriesItems:"deleteCategoriesItems",editTodo:"editTodo",editFolder:"editFolder",editCategory:"editCategory"},decls:9,vars:7,consts:[[1,"modal-header"],[1,"modal-close",3,"click"],[1,"bnts-group"],[3,"modalType","todoForEdit","folderForEdit","categoryForEdit"],[1,"modal-backdrop",3,"click"],[1,"btn",3,"click"],[3,"editItem","modalType","todoForEdit","folderForEdit","categoryForEdit"]],template:function(r,i){1&r&&(Ke(0,"div")(1,"div",0),_r(2),Ke(3,"span",1),ft("click",function(){return i.close()}),_r(4,"\u2715"),Ye()(),hi(5,Rce,6,0,"div")(6,Pce,5,0,"div",2)(7,Mce,1,4,"app-edit-form",3),Ye(),Ke(8,"div",4),ft("click",function(){return i.close()}),Ye()),2&r&&(function Q1(n,e,t){no(Di,xo,Ph(re(),n,e,t),!0)}("modal ",i.size,""),Ve(2),xc(" ",i.title," "),Ve(3),Ps("folderDelete"===i.type?5:-1),Ve(),Ps("categoryDelete"===i.type?6:-1),Ve(),Ps("folderDelete"!==i.type&&"categoryDelete"!==i.type?7:-1))},dependencies:[Sce],styles:["[_ngcontent-%COMP%]:root{--btn-primary: #676127;--btn-active: #A79700;--btn-disabled: #B3AD8C;--create-tool-btn-not-active: #B3AD8C;--none-atribute-btn: #835600;--todo-bg-yellow: #FDF3BB;--body-bg: #F8F1E5;--input-bg: #B3AD8C33;--input-text-color: #67612780;--devider-bg: #B3AD8C;--header-border-color: #835600;--white: #FFFFFF;--border-radius: 5px;--high-bg-color: #FFD3DB;--high-border-color: #830000;--high-checked-bg-color: #FFB6AB;--high-actions-bar-bg-color:#FFD5D2;--medium-bg-color: #FFDCB4;--medium-border-color: #830000;--medium-checked-bg-color: #FFD098;--medium-actions-bar-bg-color:#FFDFC1;--low-bg-color: #EAE7FF;--low-border-color: #7E6FD9;--low-checked-bg-color: #D5CAFF;--low-actions-bar-bg-color:#E2DBFF;--none-bg-color: #FDF3BB;--none-border-color: #835600;--none-checked-bg-color: #FAE09D;--none-actions-bar-bg-color:#FCF0C5}.modal-backdrop[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#0006;position:absolute;inset:0;z-index:2;display:flex;justify-content:center;align-items:center}.modal[_ngcontent-%COMP%]{z-index:3;position:absolute;left:50%;top:50%;max-width:500px;min-width:300px;height:auto;padding:20px;border:olive 1px solid;background-color:#fff;border-radius:var(--border-radius);transform:translate(-50%,-50%)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:18px;margin-bottom:20px}.modal-content[_ngcontent-%COMP%]{margin-bottom:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.modal-close[_ngcontent-%COMP%]{cursor:pointer}.bnts-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}"]})}return n})(),RH=(()=>{class n{constructor(t,r,i){this.resolver=t,this.injector=r,this.document=i}open(t,r){const i=this.resolver.resolveComponentFactory(xce),s=t.createEmbeddedView(null),o=i.create(this.injector,[s.rootNodes]);return o.instance.size=r?.size,o.instance.title=r?.title,o.instance.type=r?.type,o.instance.category=r?.category,o.instance.folder=r?.folder,o.instance.todo=r?.todo,o.instance.closeEvent.subscribe(()=>this.closeModal()),o.instance.submitEvent.subscribe(()=>this.submitModal()),o.instance.createCategoryEvent.subscribe(a=>this.submitForm(a)),o.instance.deleteFoldersItems.subscribe(a=>this.onFolderDelete(a)),o.instance.deleteCategoriesItems.subscribe(a=>this.onCategoryDelete(a)),o.instance.editTodo.subscribe(a=>this.editTodo(a)),o.instance.editFolder.subscribe(a=>this.editFolder(a)),o.instance.editCategory.subscribe(a=>this.editCategory(a)),o.hostView.detectChanges(),this.document.body.appendChild(o.location.nativeElement),this.modalNotifired=new R,this.modalNotifired.asObservable()}getModalConfig(t,r){return t.todo?{size:"lg",title:`${r} Todo`,type:`todo${r}`,todo:t.todo}:t.category?{size:"lg",title:`${r} Category`,type:`category${r}`,category:t.category}:t.folder?{size:"lg",title:`${r} Folder`,type:`folder${r}`,folder:t.folder}:null}closeModal(){this.modalNotifired?.complete()}editTodo(t){this.modalNotifired?.next(t),this.closeModal()}editFolder(t){this.modalNotifired?.next(t),this.closeModal()}editCategory(t){this.modalNotifired?.next(t),this.closeModal()}submitModal(){this.modalNotifired?.next("confirm"),this.closeModal()}submitForm(t){this.modalNotifired?.next(t)}onFolderDelete(t){this.modalNotifired?.next(t),this.closeModal()}onCategoryDelete(t){this.modalNotifired?.next(t),this.closeModal()}static#e=this.\u0275fac=function(r){return new(r||n)(j(vh),j(Wn),j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PH=(()=>{class n{constructor(t,r){this.actionsService=t,this.modalService=r,this.isPriorityBarOpen=!1,this.closeAll=new $(!1)}swipe(t,r,i){this.dragArea=t;const s=this.getPositionAction(t.source.getFreeDragPosition());this.closeAll.next(!1),i.todo?this.handleTodoActions(s,r,i):i.folder?this.handleFolderActions(s,r,i):i.category&&this.handleCategoryActions(s,r,i),this.isPriorityBarOpen||this.resetPosition()}resetPosition(){this.dragArea&&(console.log(this.dragArea.source.getFreeDragPosition()),this.dragArea.source.reset())}changePriority(t,r){this.actionsService.changeTodoPriority(t,r),this.setPriorityBarStatus(!1),this.resetPosition()}setPriorityBarStatus(t){this.isPriorityBarOpen=t}onEdit(t,r){const i=this.modalService.getModalConfig(r,"Edit");i&&this.openModalAndHandleAction(t,i,s=>{switch(i.type){case"todoEdit":this.actionsService.todoEdit(s);break;case"categoryEdit":this.actionsService.categoryEdit(s);break;case"folderEdit":this.actionsService.folderEdit(s)}})}onDelete(t,r){const i=this.modalService.getModalConfig(r,"Delete");if(i){if("todoDelete"===i.type)return void this.actionsService.todoDelete(r.todo);this.openModalAndHandleAction(t,i,s=>{switch(i.type){case"categoryDelete":s?this.actionsService.deleteCategoryWithAllItems(r.category):this.actionsService.deleteCategoryAction(r.category);break;case"folderDelete":s?this.actionsService.deleteFolderWithAllItems(r.folder):this.actionsService.deleteFolderAction(r.folder)}})}}openModalAndHandleAction(t,r,i){this.modalService.open(t,r).subscribe(i)}setDragAreaPos(t,r=0){this.dragArea.source.setFreeDragPosition({x:t,y:r})}handleTodoActions(t,r,i){switch(t){case"A":this.setPriorityBarStatus(!0);break;case"B":this.onEdit(r,i);break;case"C":this.onDelete(r,i);break;case"D":console.log("favourite")}}handleFolderActions(t,r,i){switch(t){case"A":this.onEdit(r,i);break;case"C":this.onDelete(r,i);break;case"D":console.log("favourite")}}handleCategoryActions(t,r,i){switch(t){case"A":this.onEdit(r,i);break;case"C":this.onDelete(r,i)}}getPositionAction(t){return t.x>=20&&t.x<=44?(console.log("A"),"A"):t.x>=45?(console.log("B"),"B"):t.x<=-45?(console.log("C"),"C"):t.x<=-20&&t.x>=-44?(console.log("D"),"D"):(console.log(""),"")}static#e=this.\u0275fac=function(r){return new(r||n)(j(rw),j(RH))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SR(n){return Array.isArray(n)?n:[n]}function Er(n){return null==n?"":"string"==typeof n?n:`${n}px`}function qc(n){return n instanceof Kn?n.nativeElement:n}const Oce=["addListener","removeListener"],kce=["addEventListener","removeEventListener"],Fce=["on","off"];function RR(n,e,t,r){if(je(t)&&(r=t,t=void 0),r)return RR(n,e,t).pipe(HS(r));const[i,s]=function Uce(n){return je(n.addEventListener)&&je(n.removeEventListener)}(n)?kce.map(o=>a=>n[o](e,a,t)):function Lce(n){return je(n.addListener)&&je(n.removeListener)}(n)?Oce.map(xH(n,e)):function Vce(n){return je(n.on)&&je(n.off)}(n)?Fce.map(xH(n,e)):[];if(!i&&BS(n))return Jr(o=>RR(o,e,t))(Xr(n));if(!i)throw new TypeError("Invalid event target");return new St(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function xH(n,e){return t=>r=>n[t](e,r)}const s_={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=s_;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new gt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=s_;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=s_;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},NH=new class jce extends WI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Bce extends qI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=s_.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(s_.cancelAnimationFrame(t),e._scheduled=void 0)}});let PR,$ce=1;const ww={};function OH(n){return n in ww&&(delete ww[n],!0)}const Hce={setImmediate(n){const e=$ce++;return ww[e]=!0,PR||(PR=Promise.resolve()),PR.then(()=>OH(e)&&n()),e},clearImmediate(n){OH(n)}},{setImmediate:zce,clearImmediate:Gce}=Hce,Cw={setImmediate(...n){const{delegate:e}=Cw;return(e?.setImmediate||zce)(...n)},clearImmediate(n){const{delegate:e}=Cw;return(e?.clearImmediate||Gce)(n)},delegate:void 0};new class Wce extends WI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class qce extends qI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Cw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(Cw.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function kH(n=0,e,t=Gse){let r=-1;return null!=e&&(VU(e)?t=e:r=e),new St(i=>{let s=Dj(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function FH(n,e=Su){return function Qce(n){return Ne((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const u=i;i=null,t.next(u)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(Le(t,u=>{r=!0,i=u,s||Xr(n(u)).subscribe(s=Le(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>kH(n,e))}let MR;try{MR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{MR=!1}let a_,Fu,xR,o_=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?rU(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!MR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(j(ss))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mf(n){return function Yce(){if(null==a_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>a_=!0}))}finally{a_=a_||!1}return a_}()?n:!!n.capture}function Zce(){if(null==Fu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Fu=!1,Fu;if("scrollBehavior"in document.documentElement.style)Fu=!0;else{const n=Element.prototype.scrollTo;Fu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Fu}function NR(n){if(function Xce(){if(null==xR){const n=typeof document<"u"?document.head:null;xR=!(!n||!n.createShadowRoot&&!n.attachShadow)}return xR}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Lu(n){return n.composedPath?n.composedPath()[0]:n.target}function VH(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Jce=new Y("cdk-dir-doc",{providedIn:"root",factory:function ele(){return W(Xt)}}),tle=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Tw=(()=>{class n{constructor(t){this.value="ltr",this.change=new Ze,t&&(this.value=function nle(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?tle.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(j(Jce,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})(),UH=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new R,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new St(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(FH(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ze()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Qn(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=qc(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>RR(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(j(st),j(o_),j(Xt,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kR=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new R,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(FH(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(j(o_),j(st),j(Xt,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})(),BH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({imports:[OR,FR,OR,FR]})}return n})();function QH(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?XH(n,e):("input"===r||"select"===r||"textarea"===r)&&ZH(n,e),YH("canvas",n,e,XH),YH("input, textarea, select",n,e,ZH),e}function YH(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let Hle=0;function ZH(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Hle++}`)}function XH(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function LR(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function VR(n,e,t){const{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function l_(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function JH(n,e,t,r){const{top:i,right:s,bottom:o,left:a,width:c,height:u}=n,f=c*e,m=u*e;return r>i-m&&r<o+m&&t>a-f&&t<s+f}class ez{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:LR(t)})})}handleScroll(e){const t=Lu(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let s,o;if(t===this._document){const u=this.getViewportScrollPosition();s=u.top,o=u.left}else s=t.scrollTop,o=t.scrollLeft;const a=i.top-s,c=i.left-o;return this.positions.forEach((u,f)=>{u.clientRect&&t!==f&&t.contains(f)&&l_(u.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function tz(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function UR(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function _f(n,e){const t=e?"":"none";UR(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function nz(n,e,t){UR(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Dw(n,e){return e&&"none"!=e?n+" "+e:n}function rz(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Aw(e.left,e.top)}function Aw(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function iz(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function BR(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}const Gle=new Set(["position"]);class qle{get element(){return this._preview}constructor(e,t,r,i,s,o,a,c,u){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=u}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),sz(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return function zle(n){const e=getComputedStyle(n),t=BR(e,"transition-property"),r=t.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=t.indexOf(r),s=BR(e,"transition-duration"),o=BR(e,"transition-delay");return iz(s[i])+iz(o[i])}(this._preview)}addEventListener(e,t){this._preview.addEventListener(e,t)}removeEventListener(e,t){this._preview.removeEventListener(e,t)}_createPreview(){const e=this._previewTemplate,t=this._previewClass,r=e?e.template:null;let i;if(r&&e){const s=e.matchSize?this._initialDomRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=tz(o,this._document),this._previewEmbeddedView=o,e.matchSize?rz(i,s):i.style.transform=Aw(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=QH(this._rootElement),rz(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return UR(i.style,{"pointer-events":"none",margin:sz(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Gle),_f(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}}function sz(n){return"showPopover"in n}const oz=mf({passive:!0}),Sw=mf({passive:!1}),az=mf({passive:!1,capture:!0}),cz=new Set(["position"]);class Kle{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>_f(t,e)))}constructor(e,t,r,i,s,o){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=Js(!1),this._moveEvents=new R,this._pointerMoveSubscription=gt.EMPTY,this._pointerUpSubscription=gt.EMPTY,this._scrollSubscription=gt.EMPTY,this._resizeSubscription=gt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new R,this.started=new R,this.released=new R,this.ended=new R,this.entered=new R,this.exited=new R,this.dropped=new R,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging()){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const E=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),w=this._dropContainer;if(!E)return void this._endDragSequence(a);(!w||!w.isDragging()&&!w.isReceiving())&&(a.cancelable&&a.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(a)))}return}a.cancelable&&a.preventDefault();const u=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,c);else{const f=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,m=this._activeTransform;m.x=u.x-f.x+this._passiveTransform.x,m.y=u.y-f.y+this._passiveTransform.y,this._applyRootElementTransform(m.x,m.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:a,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new ez(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>qc(r)),this._handles.forEach(r=>_f(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=qc(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,Sw),t.addEventListener("touchstart",this._pointerDown,oz),t.addEventListener("dragstart",this._nativeDragStart,Sw)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?qc(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),_f(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),_f(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",uz,az)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){u_(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{t.addEventListener("selectstart",uz,az)}),r){const i=this._rootElement,s=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new qle(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,t)),nz(i,!1,cz),this._document.body.appendChild(s.replaceChild(o,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=u_(t),s=!i&&0!==t.button,o=this._rootElement,a=Lu(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=i?function Vle(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t):function Lle(n){return 0===n.buttons||0===n.detail}(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),r||s||c||u)return;if(this._handles.length){const _=o.style;this._rootElementTapHighlight=_.webkitTapHighlightColor||"",_.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=LR(this._boundaryElement));const f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);const m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){nz(this._rootElement,!0,cz),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=this._preview.getTransitionDuration();return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=o=>{(!o||this._preview&&Lu(o)===this._preview.element&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=tz(this._placeholderRef,this._document)):r=QH(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=u_(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-a.left),y:s.top-e.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=u_(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:u}=this._getPreviewRect(),f=a.top+o,m=a.bottom-(u-o);r=lz(r,a.left+s,a.right-(c-s)),i=lz(i,f,m)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,_f(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,Sw),e.removeEventListener("touchstart",this._pointerDown,oz),e.removeEventListener("dragstart",this._nativeDragStart,Sw)}_applyRootElementTransform(e,t){const r=1/this.scale,i=Aw(e*r,t*r),s=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=s.transform&&"none"!=s.transform?s.transform:""),s.transform=Dw(i,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=Aw(e,t);this._preview.setTransform(Dw(i,r))}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:u_(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=Lu(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&l_(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=NR(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return qc(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function lz(n,e,t){return Math.max(e,Math.min(t,n))}function u_(n){return"t"===n.type[0]}function uz(n){n.preventDefault()}function dz(n,e,t){const r=d_(e,n.length-1),i=d_(t,n.length-1);if(r===i)return;const s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}function d_(n,e){return Math.max(0,Math.min(e,n))}class hz{constructor(e){this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,c=s.findIndex(D=>D.drag===e),u=s[o],m=u.clientRect,_=c>o?1:-1,E=this._getItemOffsetPx(s[c].clientRect,m,_),w=this._getSiblingOffsetPx(c,s,_),b=s.slice();return dz(s,c,o),s.forEach((D,k)=>{if(b[k]===D)return;const x=D.drag===e,V=x?E:w,J=x?e.getPlaceholderElement():D.drag.getRootElement();D.offset+=V;const me=Math.round(D.offset*(1/D.drag.scale));a?(J.style.transform=Dw(`translate3d(${me}px, 0, 0)`,D.initialTransform),l_(D.clientRect,0,V)):(J.style.transform=Dw(`translate3d(0, ${me}px, 0)`,D.initialTransform),l_(D.clientRect,V,0))}),this._previousSwap.overlaps=VR(m,t,r),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement();let u=o[s];if(u===e&&(u=o[s+1]),!u&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(u=o[0]),a>-1&&o.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){const f=u.getRootElement();f.parentElement.insertBefore(c,f),o.splice(s,0,e)}else this._element.appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{l_(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:LR(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let s=i?t.left-e.left:t.top-e.top;return-1===r&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,s=t[e].clientRect,o=t[e+-1*r];let a=s[i?"width":"height"]*r;if(o){const c=i?"left":"top",u=i?"right":"bottom";-1===r?a-=o.clientRect[c]-s[u]:a+=s[c]-o.clientRect[u]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}{const o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>a!==e&&((!i||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?i.x:i.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}class Qle{constructor(e,t){this._document=e,this._dragDropRegistry=t,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(e){const t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){const i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){const s=this._getItemIndexFromPointerPosition(e,t,r),o=this._previousSwap;if(-1===s||this._activeItems[s]===e)return null;const a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;const c=this.getItemIndex(e),u=e.getPlaceholderElement(),f=a.getRootElement();s>c?f.after(u):f.before(u),dz(this._activeItems,c,s);const m=this._getRootNode().elementFromPoint(t,r);return o.deltaX=i.x,o.deltaY=i.y,o.drag=a,o.overlaps=f===m||f.contains(m),{previousIndex:c,currentIndex:s}}enter(e,t,r,i){let s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;-1===s&&(s=this._getClosestItemIndexToPointer(e,t,r));const o=this._activeItems[s],a=this._activeItems.indexOf(e);a>-1&&this._activeItems.splice(a,1),o&&!this._dragDropRegistry.isDragging(o)?(this._activeItems.splice(s,0,e),o.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){const e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){const[i,s]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==s&&(null===s?e.appendChild(i):s.parentNode===e&&e.insertBefore(i,s))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){const i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),s=i?this._activeItems.findIndex(o=>{const a=o.getRootElement();return i===a||a.contains(i)}):-1;return-1!==s&&this._sortPredicate(s,e)?s:-1}_getRootNode(){return this._rootNode||(this._rootNode=NR(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(0===this._activeItems.length)return-1;if(1===this._activeItems.length)return 0;let i=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){const a=this._activeItems[o];if(a!==e){const{x:c,y:u}=a.getRootElement().getBoundingClientRect(),f=Math.hypot(t-c,r-u);f<i&&(i=f,s=o)}}return s}}var Ls=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(Ls||{}),Oi=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(Oi||{});class Yle{constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new R,this.entered=new R,this.exited=new R,this.dropped=new R,this.sorted=new R,this.receivingStarted=new R,this.receivingStopped=new R,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=gt.EMPTY,this._verticalScrollDirection=Ls.NONE,this._horizontalScrollDirection=Oi.NONE,this._stopScrollTimers=new R,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),function $le(n=0,e=Su){return n<0&&(n=0),kH(n,n,e)}(0,NH).pipe(ba(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===Ls.UP?a.scrollBy(0,-c):this._verticalScrollDirection===Ls.DOWN&&a.scrollBy(0,c),this._horizontalScrollDirection===Oi.LEFT?a.scrollBy(-c,0):this._horizontalScrollDirection===Oi.RIGHT&&a.scrollBy(c,0)})};const o=this.element=qc(e);this._document=r,this.withOrientation("vertical").withElementContainer(o),t.registerDropContainer(this),this._parentPositions=new ez(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof hz&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if("mixed"===e)this._sortStrategy=new Qle(this._document,this._dragDropRegistry);else{const t=new hz(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){const t=this._container;return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;qc(this.element);const r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!JH(this._domRect,.05,t,r))return;const s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=Ls.NONE,s=Oi.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||JH(o.clientRect,.05,e,t)&&([i,s]=function Zle(n,e,t,r,i){const s=gz(e,i),o=mz(e,r);let a=Ls.NONE,c=Oi.NONE;if(s){const u=n.scrollTop;s===Ls.UP?u>0&&(a=Ls.UP):n.scrollHeight-u>n.clientHeight&&(a=Ls.DOWN)}if(o){const u=n.scrollLeft;"rtl"===t?o===Oi.RIGHT?u<0&&(c=Oi.RIGHT):n.scrollWidth+u>n.clientWidth&&(c=Oi.LEFT):o===Oi.LEFT?u>0&&(c=Oi.LEFT):n.scrollWidth-u>n.clientWidth&&(c=Oi.RIGHT)}return[a,c]}(a,o.clientRect,this._direction,e,t),(i||s)&&(r=a))}),!i&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=gz(c,t),s=mz(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;const e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._domRect&&VR(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!VR(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);return!!i&&(i===this._container||this._container.contains(i))}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=NR(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function gz(n,e){const{top:t,bottom:r,height:i}=n,s=.05*i;return e>=t-s&&e<=t+s?Ls.UP:e>=r-s&&e<=r+s?Ls.DOWN:Ls.NONE}function mz(n,e){const{left:t,right:r,width:i}=n,s=.05*i;return e>=t-s&&e<=t+s?Oi.LEFT:e>=r-s&&e<=r+s?Oi.RIGHT:Oi.NONE}const Rw=mf({passive:!1,capture:!0}),Pw=new Set;let Xle=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[jE],decls:0,vars:0,template:function(r,i){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}return n})(),Jle=(()=>{class n{constructor(t,r){this._ngZone=t,this._appRef=W(xs),this._environmentInjector=W(Tr),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=Js([]),this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new R,this.pointerUp=new R,this.scroll=new R,this._preventDefaultWhileDragging=i=>{this._activeDragInstances().length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Rw)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Rw)}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._loadResets(),this._activeDragInstances.update(i=>[...i,t]),1===this._activeDragInstances().length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Rw}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Rw}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){this._activeDragInstances.update(r=>{const i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),0===this._activeDragInstances().length&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new St(i=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances().length&&i.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),Au(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}_loadResets(){if(!Pw.has(this._appRef)){Pw.add(this._appRef);const t=function wJ(n,e){const t=_t(n),r=e.elementInjector||oc();return new Hg(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}(Xle,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{Pw.delete(this._appRef),0===Pw.size&&t.destroy()})}}static#e=this.\u0275fac=function(r){return new(r||n)(j(st),j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const eue={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let jR=(()=>{class n{constructor(t,r,i,s){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,r=eue){return new Kle(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Yle(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt),j(st),j(kR),j(Jle))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const h_=new Y("CDK_DRAG_PARENT"),_z=new Y("CdkDragHandle"),yz=new Y("CDK_DRAG_CONFIG"),vz=new Y("CdkDropList");let Ez=(()=>{class n{static#e=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}constructor(t,r,i,s,o,a,c,u,f,m,_){this.element=t,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=f,this._selfHandle=m,this._parentDrag=_,this._destroyed=new R,this._handles=new $([]),this.scale=1,this.started=new Ze,this.released=new Ze,this.ended=new Ze,this.entered=new Ze,this.exited=new Ze,this.dropped=new Ze,this.moved=new St(E=>{const w=this._dragRef.moved.pipe(Ce(b=>({source:this,pointerPosition:b.pointerPosition,event:b.event,delta:b.delta,distance:b.distance}))).subscribe(E);return()=>{w.unsubscribe()}}),this._injector=W(Wn),this._dragRef=u.createDrag(t,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this),r._dropListRef.beforeStarted.pipe(ba(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){hu(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){const r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){const r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):qc(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay="object"==typeof i&&i?i:function MH(n,e=0){return function Nce(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(ko(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:u,previewContainer:f}=t;this.disabled=c??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(xr(t=>{const r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Xn(t=>Au(...t.map(r=>r._stateChanges.pipe(Zh(r))))),ba(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static#t=this.\u0275fac=function(r){return new(r||n)(ie(Kn),ie(vz,12),ie(Xt),ie(st),ie(cs),ie(yz,8),ie(Tw,8),ie(jR),ie(_u),ie(_z,10),ie(h_,12))};static#n=this.\u0275dir=Qe({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){2&r&&Rc("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Mr],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",mJ]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[Zt([{provide:h_,useExisting:n}]),Dc,Ar]})}return n})(),lue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({providers:[jR],imports:[FR]})}return n})();class HR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class due extends HR{constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class Iz extends HR{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class hue extends HR{constructor(e){super(),this.element=e instanceof Kn?e.nativeElement:e}}class fue{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof due?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Iz?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof hue?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pue extends fue{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Wn.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let gue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({})}return n})();const wz=Zce();class mue{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Er(-this._previousScrollPosition.left),e.style.top=Er(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),wz&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wz&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class _ue{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Qn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Cz{enable(){}disable(){}attach(){}}function zR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function bz(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class yue{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();zR(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let vue=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new Cz,this.close=o=>new _ue(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new mue(this._viewportRuler,this._document),this.reposition=o=>new yue(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(r){return new(r||n)(j(UH),j(kR),j(st),j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Tz{constructor(e){if(this.scrollStrategy=new Cz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Eue{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Dz=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iue=(()=>{class n extends Dz{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt),j(st,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wue=(()=>{class n extends Dz{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Lu(s)},this._clickListener=s=>{const o=Lu(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let u=c.length-1;u>-1;u--){const f=c[u];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(Az(f.overlayElement,o)||Az(f.overlayElement,a))break;const m=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt),j(o_),j(st,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Az(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let Sz=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||VH()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),VH()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(j(Xt),j(o_))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Cue{constructor(e,t,r,i,s,o,a,c,u,f=!1,m){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=u,this._animationsDisabled=f,this._injector=m,this._backdropElement=null,this._backdropClick=new R,this._attachments=new R,this._detachments=new R,this._locationChanges=gt.EMPTY,this._backdropClickHandler=_=>this._backdropClick.next(_),this._backdropTransitionendHandler=_=>{this._disposeBackdrop(_.target)},this._keydownEvents=new R,this._outsidePointerEvents=new R,this._renders=new R,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=so(()=>function c1(n,e){!e?.injector&&lc();const t=e?.injector??W(Wn);return as(t)?(Ri("NgAfterRender"),l1(n,t,e,!1)):u1}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),hu(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Er(this._config.width),e.height=Er(this._config.height),e.minWidth=Er(this._config.minWidth),e.minHeight=Er(this._config.minHeight),e.maxWidth=Er(this._config.maxWidth),e.maxHeight=Er(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=SR(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(ba(Au(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Rz="cdk-overlay-connected-position-bounding-box",bue=/([A-Za-z%]+)$/;class Tue{get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new R,this._resizeSubscription=gt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Rz),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,i,a),u=this._getOverlayPoint(c,t,a),f=this._getOverlayFit(u,t,r,a);if(f.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(f,u,r)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:u,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const u of s){const f=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);f>c&&(c=f,a=u)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Vu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Rz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=Mz(t);let{x:o,y:a}=e,c=this._getOffset(i,"x"),u=this._getOffset(i,"y");c&&(o+=c),u&&(a+=u);let _=0-a,E=a+s.height-r.height,w=this._subtractOverflows(s.width,0-o,o+s.width-r.width),b=this._subtractOverflows(s.height,_,E),D=w*b;return{visibleArea:D,isCompletelyWithinViewport:s.width*s.height===D,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:w==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=Pz(this._overlayRef.getConfig().minHeight),a=Pz(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Mz(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),c=Math.max(s.top-r.top-e.y,0),u=Math.max(s.left-r.left-e.x,0);let f=0,m=0;return f=i.width<=s.width?u||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,m=i.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:f,y:m},{x:e.x+f,y:e.y+m}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function Due(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const i=new Eue(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,f,m,_;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const E=Math.min(r.bottom-e.y+r.top,e.y),w=this._lastBoundingBoxSize.height;s=2*E,o=e.y-E,s>w&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-w/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)_=r.width-e.x+2*this._viewportMargin,f=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)m=e.x,f=r.right-e.x;else{const E=Math.min(r.right-e.x+r.left,e.x),w=this._lastBoundingBoxSize.width;f=2*E,m=e.x-E,f>w&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-w/2)}return{top:o,left:m,bottom:a,right:_,width:f,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Er(r.height),i.top=Er(r.top),i.bottom=Er(r.bottom),i.width=Er(r.width),i.left=Er(r.left),i.right=Er(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Er(s)),o&&(i.maxWidth=Er(o))}this._lastBoundingBoxSize=r,Vu(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Vu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Vu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const f=this._viewportRuler.getViewportScrollPosition();Vu(r,this._getExactOverlayY(t,e,f)),Vu(r,this._getExactOverlayX(t,e,f))}else r.position="static";let a="",c=this._getOffset(t,"x"),u=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),u&&(a+=`translateY(${u}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Er(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Er(o.maxWidth):s&&(r.maxWidth="")),Vu(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Er(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Er(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bz(e,r),isOriginOutsideView:zR(e,r),isOverlayClipped:bz(t,r),isOverlayOutsideView:zR(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&SR(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Kn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Vu(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Pz(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(bue);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Mz(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const xz="cdk-global-overlay-wrapper";class Aue{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(xz),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,c=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),f=this._xPosition,m=this._xOffset,_="rtl"===this._overlayRef.getConfig().direction;let E="",w="",b="";c?b="flex-start":"center"===f?(b="center",_?w=m:E=m):_?"left"===f||"end"===f?(b="flex-end",E=m):("right"===f||"start"===f)&&(b="flex-start",w=m):"left"===f||"start"===f?(b="flex-start",E=m):("right"===f||"end"===f)&&(b="flex-end",w=m),e.position=this._cssPosition,e.marginLeft=c?"0":E,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":w,t.justifyContent=b,t.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(xz),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Sue=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new Aue}flexibleConnectedTo(t){return new Tue(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(j(kR),j(Xt),j(o_),j(Sz))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rue=0,Mw=(()=>{class n{constructor(t,r,i,s,o,a,c,u,f,m,_,E){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=u,this._directionality=f,this._location=m,this._outsideClickDispatcher=_,this._animationsModuleType=E}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new Tz(t);return o.direction=o.direction||this._directionality.value,new Cue(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Tr))}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Rue++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(xs)),new pue(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(j(vue),j(Sz),j(vh),j(Sue),j(Iue),j(Wn),j(st),j(Xt),j(Tw),j(zh),j(wue),j(T6,8))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Pue=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Nz=new Y("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=W(Mw);return()=>n.scrollStrategies.reposition()}});let GR=(()=>{class n{constructor(t){this.elementRef=t}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Kn))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}return n})(),Mue=(()=>{class n{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(t){this._disposeOnNavigation=t}constructor(t,r,i,s,o){this._overlay=t,this._dir=o,this._backdropSubscription=gt.EMPTY,this._attachSubscription=gt.EMPTY,this._detachSubscription=gt.EMPTY,this._positionSubscription=gt.EMPTY,this._disposeOnNavigation=!1,this._ngZone=W(st),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new Ze,this.positionChange=new Ze,this.attach=new Ze,this.detach=new Ze,this.overlayKeydown=new Ze,this.overlayOutsideClick=new Ze,this._templatePortal=new Iz(r,i),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Pue);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!function jH(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{const i=this._getOriginElement(),s=Lu(r);(!i||i!==s&&!i.contains(s))&&this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new Tz({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(t),t}_getOrigin(){return this.origin instanceof GR?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof GR?this.origin.elementRef.nativeElement:this.origin instanceof Kn?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function uue(n,e=!1){return Ne((t,r)=>{let i=0;t.subscribe(Le(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this._ngZone.run(()=>this.positionChange.emit(t)),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Mw),ie(Ss),ie(cs),ie(Nz),ie(Tw,8))};static#t=this.\u0275dir=Qe({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Mr],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Mr],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Mr],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Mr],push:[2,"cdkConnectedOverlayPush","push",Mr],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Mr]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Dc,Ar]})}return n})();const Nue={provide:Nz,deps:[Mw],useFactory:function xue(n){return()=>n.scrollStrategies.reposition()}};let Oue=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({providers:[Mw,Nue],imports:[OR,gue,BH,BH]})}return n})();const kue=()=>({"width.px":18,fill:"#A79700"}),Fue=(n,e,t,r)=>({high:n,medium:e,low:t,none:r}),Lue=n=>({"width.px":20,fill:n});function Vue(n,e){if(1&n){const t=fi();Ke(0,"div",4),ft("click",function(){const i=fn(t).$implicit;return an(Ot().onPriorityChange(i.priority))}),wn(1,"svg-icon",5),Ye()}if(2&n){const t=e.$implicit,r=Ot();ot("ngClass",uV(2,Fue,"high"===t.priority&&"high"===r.priority,"medium"===t.priority&&"medium"===r.priority,"low"===t.priority&&"low"===r.priority,"none"===t.priority&&"none"===r.priority)),Ve(),ot("svgStyle",Ms(7,Lue,t.color))}}let Uue=(()=>{class n{constructor(){this.priority="none",this.changePriority=new Ze,this.cancelPriorityPick=new Ze,this.priorities=[{color:"#830000",priority:"high"},{color:"#B58D00",priority:"medium"},{color:"#7E6FD9",priority:"low"},{color:"#676127",priority:"none"}]}onPriorityChange(t){this.changePriority.emit(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-priority"]],inputs:{priority:"priority"},outputs:{changePriority:"changePriority",cancelPriorityPick:"cancelPriorityPick"},decls:5,vars:2,consts:[[1,"priority-wrapper"],[1,"priority",3,"ngClass"],[1,"priority",3,"click"],["src","assets/icons/cansel.svg",3,"svgStyle"],[1,"priority",3,"click","ngClass"],["src","assets/icons/priority_svgrepo.com.svg",3,"svgStyle"]],template:function(r,i){1&r&&(Ke(0,"div",0),Pc(1,Vue,2,9,"div",1,J1),Ke(3,"div",2),ft("click",function(){return i.cancelPriorityPick.emit()}),wn(4,"svg-icon",3),Ye()()),2&r&&(Ve(),Mc(i.priorities),Ve(3),ot("svgStyle",ro(1,kue)))},dependencies:[ym,Mu],styles:[".priority-wrapper[_ngcontent-%COMP%]{width:38px;background-color:#eae3d3;border-radius:22px;position:absolute;top:0;left:0;z-index:100;text-align:center}.priority[_ngcontent-%COMP%]{height:40px;display:flex;justify-content:center;align-items:center;cursor:pointer}.priority[_ngcontent-%COMP%]:first-child{border-radius:22px 0 0}"],changeDetection:0})}return n})();const Bue=["modalTemplate"],jue=["*"],$ue=n=>["swipe-wrapper",n],Hue=(n,e)=>["action-icons-bar",n,e],xw=n=>({"width.px":20,fill:n}),zue=(n,e)=>({originX:"start",originY:"center",overlayX:"center",overlayY:"center",offsetY:n,offsetX:e}),Gue=n=>[n];function que(n,e){if(1&n){const t=fi();Ke(0,"app-priority",9),ft("changePriority",function(i){return fn(t),an(Ot(2).changePriority(i))})("cancelPriorityPick",function(){return fn(t),an(Ot(2).isPriorityBarOpen=!1)}),Ye()}2&n&&ot("priority",Ot(2).priorityType)}function Wue(n,e){if(1&n){const t=fi();Ke(0,"div",5,2),wn(2,"svg-icon",7),hi(3,que,1,1,"ng-template",8),ft("backdropClick",function(){return fn(t),an(Ot().isPriorityBarOpen=!1)}),Ye()}if(2&n){const t=BE(1),r=Ot();Ve(2),ot("src","assets/icons/priority_svgrepo.com.svg")("svgStyle",Ms(6,xw,r.iconsColor)),Ve(),ot("cdkConnectedOverlayOrigin",t)("cdkConnectedOverlayOpen",r.isPriorityBarOpen)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayPositions",Ms(11,Gue,zE(8,zue,r.offsetY,-38)))}}function Kue(n,e){}let qR=(()=>{class n{constructor(t){this.swipeService=t,this.isPriorityBarOpen=!1,this.setPosition={x:0,y:0},this.priorityType="none",this.iconsColor="#676127"}ngOnChanges(t){this.todo&&this.setPriorityBarY()}ngOnInit(){this.setClasses(),this.sub=this.swipeService.closeAll.subscribe(t=>{!t&&this.dragArea&&this.dragArea.source.reset(),this.isPriorityBarOpen=t})}ngOnDestroy(){this.sub.unsubscribe()}dragStarted(t){this.swipeService.isPriorityBarOpen=!1,this.isPriorityBarOpen=!1}dragEnd(t){this.dragArea=t;let r=t.source.getFreeDragPosition();this.setPosition.x=r.x,console.log(r.x),this.swipeService.swipe(t,this.modalTemplate,{todo:this.todo,folder:this.folder,category:this.category}),this.swipeService.isPriorityBarOpen&&(this.isPriorityBarOpen=this.swipeService.isPriorityBarOpen)}changePriority(t){this.isPriorityBarOpen=!1,this.swipeService.changePriority(this.todo,t)}setPriorityBarY(){switch(this.todo.priority){case"high":this.priorityType="high",this.iconsColor="#830000",this.offsetY=-19;break;case"medium":this.priorityType="medium",this.iconsColor="#B58D00",this.offsetY=-59;break;case"low":this.priorityType="low",this.iconsColor="#7E6FD9",this.offsetY=-99;break;case"none":this.priorityType="none",this.iconsColor="#676127",this.offsetY=-139;break;default:this.offsetY=-139}}setClasses(){this.todo?this.style=rR[0]:this.folder?this.style=rR[1]:this.category&&(this.style=rR[2])}static#e=this.\u0275fac=function(r){return new(r||n)(ie(PH))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-swipe"]],viewQuery:function(r,i){if(1&r&&function VL(n,e,t){PF(n,e,t)}(Bue,7),2&r){let s;(function VA(n){const e=re(),t=mt(),r=DT();Ov(r+1);const i=sA(t,r);if(n.dirty&&function rg(n){return!(4&~n[We])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=NF(e,r);n.reset(s,oO),n.notifyOnChanges()}return!0}return!1})(s=UA())&&(i.modalTemplate=s.first)}},inputs:{todo:"todo",folder:"folder",category:"category"},features:[Ar],ngContentSelectors:jue,decls:16,vars:27,consts:[["dragarea",""],["modalTemplate",""],["trigger","cdkOverlayOrigin"],["cdkDrag","","cdkDragLockAxis","x","cdkDragBoundary",".app-container",3,"cdkDragStarted","cdkDragEnded","cdkDragFreeDragPosition"],[3,"classList"],["cdkOverlayOrigin","",1,"action_priority"],[1,""],[3,"src","svgStyle"],["cdkConnectedOverlay","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayPositions"],[3,"changePriority","cancelPriorityPick","priority"]],template:function(r,i){if(1&r){const s=fi();OA(),Ke(0,"div")(1,"div",3,0),ft("cdkDragStarted",function(a){return fn(s),an(i.dragStarted(a))})("cdkDragEnded",function(a){return fn(s),an(i.dragEnd(a))}),kA(3),Ye(),Ke(4,"div")(5,"div",4),hi(6,Wue,4,13,"div",5),Ke(7,"div",6),wn(8,"svg-icon",7),Ye()(),Ke(9,"div",4)(10,"div",6),wn(11,"svg-icon",7),Ye(),Ke(12,"div",6),wn(13,"svg-icon",7),Ye()()()(),hi(14,Kue,0,0,"ng-template",null,1,am)}2&r&&(Zg(Ms(16,$ue,i.style.type)),Ve(),Zg(i.style.wrapper),ot("cdkDragFreeDragPosition",i.setPosition),Ve(3),Zg(zE(18,Hue,i.style.bar,i.priorityType)),Ve(),ot("classList",i.style.barItem),Ve(),Ps(i.todo?6:-1),Ve(2),ot("src","assets/icons/edit_svgrepo.com.svg")("svgStyle",Ms(21,xw,i.iconsColor)),Ve(),ot("classList",i.style.barItem),Ve(2),ot("src","assets/icons/trash-bin_svgrepo.com.svg")("svgStyle",Ms(23,xw,i.iconsColor)),Ve(2),ot("src","assets/icons/heart-dark_svgrepo.com.svg")("svgStyle",Ms(25,xw,i.iconsColor)))},dependencies:[Ez,Mue,GR,Mu,Uue],styles:[".task-item[_ngcontent-%COMP%]{position:relative;width:100%}.task-item__content[_ngcontent-%COMP%]{background-color:#fff;z-index:1;width:100%;cursor:grab}.task-item__tool-bar[_ngcontent-%COMP%]{background-color:#f1edc1;position:absolute;top:0;z-index:-1;display:flex;justify-content:space-between;align-items:center;width:100%;height:40px}.task-item__tool-bar__item[_ngcontent-%COMP%]{display:flex;gap:10px}.task-item__tool-bar__item[_ngcontent-%COMP%]:first-child{padding-left:6px}.task-item__tool-bar__item[_ngcontent-%COMP%]:last-child{padding-right:6px}.folder-item[_ngcontent-%COMP%]{position:relative}.folder-item__swipe-wrapper[_ngcontent-%COMP%]{cursor:grab}.folder-item__tool-bar[_ngcontent-%COMP%]{background-color:#f1edc1;position:absolute;top:0;display:flex;justify-content:space-between;align-items:center;width:100%;height:44px;z-index:-1}.folder-item__tool-bar__item[_ngcontent-%COMP%]{display:flex;gap:10px}.folder-item__tool-bar__item[_ngcontent-%COMP%]:first-child{padding-left:6px}.folder-item__tool-bar__item[_ngcontent-%COMP%]:last-child{padding-right:6px}.category-item[_ngcontent-%COMP%]{position:relative;width:100%}.category-item__swipe-wrapper[_ngcontent-%COMP%]{cursor:grab}.category-item__tool-bar[_ngcontent-%COMP%]{background-color:#f1edc1;position:absolute;top:0;display:flex;justify-content:space-between;align-items:center;width:100%;height:44px;z-index:-1}.category-item__tool-bar__item[_ngcontent-%COMP%]{display:flex;gap:10px}.category-item__tool-bar__item[_ngcontent-%COMP%]:first-child{padding-left:6px}.category-item__tool-bar__item[_ngcontent-%COMP%]:last-child{padding-right:6px}.action[_ngcontent-%COMP%]{width:100%}.action_priority[_ngcontent-%COMP%]{position:relative}@media screen and (max-width: 415px){.task-item__tool-bar__item[_ngcontent-%COMP%], .folder-item__tool-bar__item[_ngcontent-%COMP%], .category-item__tool-bar__item[_ngcontent-%COMP%]{gap:4px}}"],changeDetection:0})}return n})();const Que=(n,e)=>e.id;function Yue(n,e){if(1&n){const t=fi();Ke(0,"li",1)(1,"app-swipe",2)(2,"app-todo-list-item-ui",3),ft("toggle",function(){const i=fn(t).$implicit;return an(Ot().toogleTodo(i.id))}),Ye()()()}if(2&n){const t=e.$implicit;Ve(),ot("todo",t),Ve(),ot("todo",t)}}let WR=(()=>{class n{constructor(t){this.actionsService=t,this.todoList=[]}toogleTodo(t){this.actionsService.todoToggle(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ie(rw))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-todo-list-ui"]],inputs:{todoList:"todoList"},decls:3,vars:0,consts:[[1,"task-list"],[1,"task-item"],[3,"todo"],[3,"toggle","todo"]],template:function(r,i){1&r&&(Ke(0,"ul",0),Pc(1,Yue,3,2,"li",1,Que),Ye()),2&r&&(Ve(),Mc(i.todoList))},dependencies:[Rae,qR],styles:[".task-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.task-item[_ngcontent-%COMP%]{position:relative;width:100%}"]})}return n})();const Zue=(n,e)=>e.id,Oz=n=>({active:n}),Xue=()=>({active:!1}),Jue=()=>({"width.px":20,"height.px":20}),kz=()=>({"width.px":32,"height.px":32}),ede=()=>({"width.px":18});function tde(n,e){if(1&n){const t=fi();Ke(0,"button",2),ft("click",function(){const i=fn(t).$implicit;return an(Ot(2).onCategoryPick(i))}),_r(1),Ye()}if(2&n){const t=e.$implicit,r=Ot(2);ot("ngClass",Ms(2,Oz,(null==r.currentCategory?null:r.currentCategory.name)==t.name)),Ve(),xc(" ",t.name," ")}}function nde(n,e){if(1&n&&(Ke(0,"div",6),Pc(1,tde,2,4,"button",10,Zue),Ye()),2&n){const t=Ot();Ve(),Mc(t.categoriesList)}}let rde=(()=>{class n{constructor(t,r){this.localStorageService=t,this._document=r,this.currentCategoryEmmiter=new Ze}onCategoryPick(t){this.currentCategory=t,this.currentCategoryEmmiter.emit(t)}onAllCategoriesPick(){this.currentCategory=null,this.currentCategoryEmmiter.emit(null)}clearAllData(){this.localStorageService.clearAllData(),this._document.defaultView.location.reload()}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Z0),ie(Xt))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-todo-header-bar-ui"]],inputs:{categoriesList:"categoriesList",currentCategory:"currentCategory"},outputs:{currentCategoryEmmiter:"currentCategoryEmmiter"},decls:14,vars:18,consts:[[1,"btns-bar","container"],[1,"btns-bar__left"],[1,"btn","btn-primary",3,"click","ngClass"],[1,"btn","btn-primary","btn__favourite",3,"click","ngClass"],[3,"src","svgStyle"],[1,"btns-bar__group"],[1,"btns-bar__group__","categoty-group"],["data-atribute","reverse",3,"src","svgStyle"],["role","menu",1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",3,"ngClass"]],template:function(r,i){1&r&&(Ke(0,"div",0)(1,"div",1)(2,"button",2),ft("click",function(){return i.onAllCategoriesPick()}),_r(3,"All "),Ye(),Ke(4,"button",3),ft("click",function(){return i.onAllCategoriesPick()}),wn(5,"svg-icon",4),Ye()(),Ke(6,"div",5),wn(7,"svg-icon",4),hi(8,nde,3,0,"div",6),wn(9,"svg-icon",7),Ye(),Ke(10,"button",8),wn(11,"svg-icon",4),Ye(),Ke(12,"button",9),ft("click",function(){return i.clearAllData()}),_r(13," del "),Ye()()),2&r&&(Ve(2),ot("ngClass",Ms(11,Oz,null===i.currentCategory)),Ve(2),ot("ngClass",ro(13,Xue)),Ve(),ot("src","assets/icons/heart-white_svgrepo.com.svg")("svgStyle",ro(14,Jue)),Ve(2),ot("src","assets/icons/category-arrow_svgrepo.com.svg")("svgStyle",ro(15,kz)),Ve(),Ps(i.categoriesList?8:-1),Ve(),ot("src","assets/icons/category-arrow_svgrepo.com.svg")("svgStyle",ro(16,kz)),Ve(2),ot("src","assets/icons/filters_svgrepo.com.svg")("svgStyle",ro(17,ede)))},dependencies:[ym,Mu],styles:["[_ngcontent-%COMP%]:root{--btn-primary: #676127;--btn-active: #A79700;--btn-disabled: #B3AD8C;--create-tool-btn-not-active: #B3AD8C;--none-atribute-btn: #835600;--todo-bg-yellow: #FDF3BB;--body-bg: #F8F1E5;--input-bg: #B3AD8C33;--input-text-color: #67612780;--devider-bg: #B3AD8C;--header-border-color: #835600;--white: #FFFFFF;--border-radius: 5px;--high-bg-color: #FFD3DB;--high-border-color: #830000;--high-checked-bg-color: #FFB6AB;--high-actions-bar-bg-color:#FFD5D2;--medium-bg-color: #FFDCB4;--medium-border-color: #830000;--medium-checked-bg-color: #FFD098;--medium-actions-bar-bg-color:#FFDFC1;--low-bg-color: #EAE7FF;--low-border-color: #7E6FD9;--low-checked-bg-color: #D5CAFF;--low-actions-bar-bg-color:#E2DBFF;--none-bg-color: #FDF3BB;--none-border-color: #835600;--none-checked-bg-color: #FAE09D;--none-actions-bar-bg-color:#FCF0C5}.btns-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:1rem 0}.btns-bar__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.btns-bar__group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;gap:6px;overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.btns-bar__group[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{width:max-content}.btns-bar__group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}svg-icon[data-atribute=reverse][_ngcontent-%COMP%]{transform:rotate(180deg)}.categoty-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;scrollbar-width:none;-ms-overflow-style:none;overflow-y:hidden;flex-grow:1}.categoty-group[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;display:none}.btns-bar[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{min-width:32px;padding:0}input[_ngcontent-%COMP%]{border:1px solid black;border-radius:6px;padding:0 1rem}.btn[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:16px;width:40px}.btn.btn-primary[_ngcontent-%COMP%]{min-width:max-content}.active[_ngcontent-%COMP%]{background-color:var(--btn-active)}"]})}return n})(),KR=(()=>{class n{transform(t,r){return Array.isArray(r)?t?.filter(i=>r.includes(i.name)):null===r?t?.filter(i=>null==i.currentCategoryId):"object"==typeof r&&"foldersList"in r?t?.filter(i=>{if(!i.currentFolderId)return i.currentCategoryId===r.id}):"object"==typeof r&&"todoItems"in r?t?.filter(i=>(console.log(),i.currentFolderId===r.id)):t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=pr({name:"todo",type:n,pure:!0})}return n})();const ide=()=>({"width.px":20});function sde(n,e){if(1&n&&(wn(0,"app-todo-list-ui",3),io(1,"async"),io(2,"todo")),2&n){const t=Ot();ot("todoList",sm(2,3,mu(1,1,t.todoList$),t.folder))}}let ode=(()=>{class n{constructor(){this.isOpen=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-folder-list-item-ui"]],inputs:{todoList$:"todoList$",folder:"folder"},decls:6,vars:5,consts:[[1,"wrapper-title","folder"],[3,"click"],[3,"src","svgStyle"],[3,"todoList"]],template:function(r,i){1&r&&(Ke(0,"div",0)(1,"span"),_r(2),Ye(),Ke(3,"div",1),ft("click",function(){return i.isOpen=!i.isOpen}),wn(4,"svg-icon",2),Ye()(),hi(5,sde,3,6,"app-todo-list-ui",3)),2&r&&(Ve(2),Bh(i.folder.name),Ve(2),ot("src","assets/icons/arrow-up_svgrepo.com.png")("svgStyle",ro(4,ide)),Ve(),Ps(i.isOpen?5:-1))},dependencies:[Mu,WR,_I,KR],styles:[".wrapper-title[_ngcontent-%COMP%]{background-color:#e9e192}"]})}return n})();const ade=(n,e)=>e.id,cde=(n,e)=>({"arrow-up":n,"arrow-down":e}),lde=()=>({"width.px":30,"height.px":30});function ude(n,e){if(1&n&&(Ke(0,"app-swipe",5),wn(1,"app-folder-list-item-ui",6),Ye()),2&n){const t=e.$implicit,r=Ot(2);ot("folder",t),Ve(),ot("todoList$",r.todoList$)("folder",t)}}function dde(n,e){if(1&n&&(wn(0,"app-todo-list-ui",4),io(1,"async"),io(2,"todo"),Pc(3,ude,2,3,"app-swipe",5,ade)),2&n){const t=Ot();ot("todoList",sm(2,3,mu(1,1,t.todoList$),t.category)),Ve(3),Mc(t.category.foldersList)}}let hde=(()=>{class n{constructor(){this.showContent=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-category-list-item-ui"]],inputs:{currentCategory:"currentCategory",category:"category",todoList$:"todoList$"},decls:6,vars:9,consts:[[1,"category-item"],[1,"wrapper-title","category"],[1,"category__title"],["role","btn",1,"category__open-content",3,"click","ngClass","src","svgStyle"],[3,"todoList"],[3,"folder"],[3,"todoList$","folder"]],template:function(r,i){1&r&&(Ke(0,"div",0)(1,"div",1)(2,"span",2),_r(3),Ye(),Ke(4,"svg-icon",3),ft("click",function(){return i.showContent=!i.showContent}),Ye()(),hi(5,dde,5,6),Ye()),2&r&&(Ve(3),Bh(i.category.name),Ve(),ot("ngClass",zE(5,cde,!i.showContent,i.showContent))("src","assets/icons/category-arrow_svgrepo.com.svg")("svgStyle",ro(8,lde)),Ve(),Ps(i.showContent?5:-1))},dependencies:[ym,Mu,WR,ode,qR,_I,KR],styles:["svg[_ngcontent-%COMP%]{width:28px;height:28px}.category__open-content[_ngcontent-%COMP%]{display:flex}.category__open-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .category__create-folder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}.category-item[_ngcontent-%COMP%]{padding-bottom:.5rem}button[_ngcontent-%COMP%]{padding:.3rem .2rem;background-color:green;color:#fff;font-size:16px}.arrow-down[_ngcontent-%COMP%]{transform:rotate(-90deg)}.arrow-up[_ngcontent-%COMP%]{transform:rotate(90deg)}"]})}return n})();const Fz=(n,e)=>e.id,fde=()=>({"width.px":20}),Lz=n=>({"btn__no-item":n});function pde(n,e){1&n&&kE(0)}function gde(n,e){1&n&&hi(0,pde,1,0,"ng-container",8),2&n&&(Ot(),ot("ngTemplateOutlet",BE(9)))}function mde(n,e){1&n&&kE(0)}function _de(n,e){1&n&&hi(0,mde,1,0,"ng-container",8),2&n&&(Ot(),ot("ngTemplateOutlet",BE(11)))}function yde(n,e){if(1&n){const t=fi();Ke(0,"li")(1,"button",11),ft("click",function(){const i=fn(t).$implicit;return an(Ot(2).onCategotyPick(i))}),_r(2),Ye()()}if(2&n){const t=e.$implicit,r=Ot(2);Ve(),Rc("active",t.id===(null==r.activeCategory?null:r.activeCategory.id)),Ve(),xc(" ",t.name," ")}}function vde(n,e){if(1&n){const t=fi();Ke(0,"ul",9)(1,"button",10),ft("click",function(){return fn(t),an(Ot().clearCategoryPick())}),_r(2," None "),Ye(),Pc(3,yde,3,3,"li",null,Fz),Ye()}if(2&n){const t=Ot();Ve(),ot("ngClass",Ms(1,Lz,!t.activeCategory)),Ve(2),Mc(t.categoriesList)}}function Ede(n,e){if(1&n){const t=fi();Ke(0,"li")(1,"button",15),ft("click",function(){const i=fn(t).$implicit;return an(Ot(2).onFolderPick(i))}),_r(2),Ye()()}if(2&n){const t=e.$implicit,r=Ot(2);Ve(),Rc("active",r.isFolderActive(t)),ot("disabled",null===r.activeCategory),Ve(),xc(" ",t.name," ")}}function Ide(n,e){if(1&n){const t=fi();wn(0,"div",12),Ke(1,"ul",13)(2,"button",14),ft("click",function(){return fn(t),an(Ot().onFolderPick(null))}),_r(3," None "),Ye(),Pc(4,Ede,3,4,"li",null,Fz),Ye()}if(2&n){const t=Ot();Ve(2),ot("ngClass",Ms(1,Lz,!t.activeFolder)),Ve(2),Mc(t.currentFoldersList)}}let wde=(()=>{class n{constructor(){this.result=new Ze,this.activeCategory=null}ngOnInit(){this.activeCategory=this.currentCategory}ngOnChanges(t){t.currentCategory&&(this.activeCategory=this.currentCategory,this.currentFoldersList=this.activeCategory?.foldersList??null,this.clearControls(),this.setDefaultData())}onSubmit(){this.form.valid&&(this.result.emit(this.form),this.form.reset(),this.activeCategory=null,this.activeFolder=null)}clearCategoryPick(){this.activeCategory=null,this.activeFolder=null,this.currentFoldersList=null,this.patchControlValue("currentCategoryId",null)}onCategotyPick(t){this.activeCategory=t,this.activeFolder=null,this.currentFoldersList=t.foldersList,this.patchControlValue("currentCategoryId",t.id)}onFolderPick(t){this.activeFolder=t,this.patchControlValue("currentFolderId",t?.id??null)}isFolderActive(t){return this.activeFolder?.id===t.id||!1}setDefaultData(){this.patchControlValue("currentCategoryId",this.activeCategory?.id??null)}clearControls(){this.patchControlValue("currentCategoryId",null),this.patchControlValue("currentFolderId",null)}patchControlValue(t,r){const i=this.form.controls[t];i&&i.patchValue(r)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-form-item"]],inputs:{form:"form",placeholder:"placeholder",categoriesList:"categoriesList",currentCategory:"currentCategory",maxHeigth:"maxHeigth"},outputs:{result:"result"},features:[Ar],decls:12,vars:10,consts:[["categoriesPick",""],["folderPick",""],[1,"flex"],["id","form",3,"ngSubmit","formGroup"],[1,"form__content"],["required","","type","text","name","text","formControlName","name",3,"placeholder"],["type","submit",1,"btn","btn__big","btn__add-todo",3,"click","disabled"],[3,"src","svgStyle"],[4,"ngTemplateOutlet"],[1,"categories-list"],["type","button","role","button",1,"btn","btn__pick-item",3,"click","ngClass"],["type","button","role","text",1,"btn","btn__pick-item",3,"click"],[1,"devider"],[1,"folder-list"],["type","button",1,"btn","btn__pick-item",3,"click","ngClass"],["type","button",1,"btn","btn__pick-item",3,"click","disabled"]],template:function(r,i){if(1&r){const s=fi();Ke(0,"div",2)(1,"form",3),ft("ngSubmit",function(){return fn(s),an(i.onSubmit())}),Ke(2,"div",4),wn(3,"input",5),hi(4,gde,1,1,"ng-container")(5,_de,1,1,"ng-container"),Ye()(),Ke(6,"button",6),ft("click",function(){return fn(s),an(i.onSubmit())}),wn(7,"svg-icon",7),Ye()(),hi(8,vde,5,3,"ng-template",null,0,am)(10,Ide,6,3,"ng-template",null,1,am)}2&r&&(bA("max-height",i.maxHeigth,"px"),Ve(),ot("formGroup",i.form),Ve(2),FA("placeholder",i.placeholder),Ve(),Ps(i.form.controls.currentCategoryId?4:-1),Ve(),Ps(i.form.controls.currentFolderId?5:-1),Ve(),ot("disabled",!i.form.valid),Ve(),ot("src","assets/icons/plus.svg")("svgStyle",ro(9,fde)))},dependencies:[ym,eU,IR,Ym,aR,cR,i_,r_,Iw,Mu],styles:["[_ngcontent-%COMP%]:root{--btn-primary: #676127;--btn-active: #A79700;--btn-disabled: #B3AD8C;--create-tool-btn-not-active: #B3AD8C;--none-atribute-btn: #835600;--todo-bg-yellow: #FDF3BB;--body-bg: #F8F1E5;--input-bg: #B3AD8C33;--input-text-color: #67612780;--devider-bg: #B3AD8C;--header-border-color: #835600;--white: #FFFFFF;--border-radius: 5px;--high-bg-color: #FFD3DB;--high-border-color: #830000;--high-checked-bg-color: #FFB6AB;--high-actions-bar-bg-color:#FFD5D2;--medium-bg-color: #FFDCB4;--medium-border-color: #830000;--medium-checked-bg-color: #FFD098;--medium-actions-bar-bg-color:#FFDFC1;--low-bg-color: #EAE7FF;--low-border-color: #7E6FD9;--low-checked-bg-color: #D5CAFF;--low-actions-bar-bg-color:#E2DBFF;--none-bg-color: #FDF3BB;--none-border-color: #835600;--none-checked-bg-color: #FAE09D;--none-actions-bar-bg-color:#FCF0C5}[_nghost-%COMP%]{width:100%}form[_ngcontent-%COMP%]{width:100%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;max-height:34px;transition:max-height .3s ease-in-out;overflow:hidden}.form__content[_ngcontent-%COMP%]{border:1px solid var(--header-border-color);border-radius:var(--border-radius);flex-grow:2;padding:4px}input[_ngcontent-%COMP%]{padding-left:10px;height:24px;width:100%;background-color:var(--input-bg);border-radius:var(--border-radius);color:#000;font-family:Metrophobic;font-size:16px;font-weight:600;line-height:19.73px;text-align:left}input[_ngcontent-%COMP%]::placeholder{color:var(--input-text-color);font-size:16px;font-weight:400}.devider[_ngcontent-%COMP%]{background-color:var(--devider-bg);margin:4px 0;height:1px}.categories-list[_ngcontent-%COMP%]{margin-top:4px}.categories-list[_ngcontent-%COMP%], .folder-list[_ngcontent-%COMP%]{display:flex;gap:4px;overflow-y:hidden;overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none}.categories-list[_ngcontent-%COMP%]::-webkit-scrollbar, .folder-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;display:none}.active[_ngcontent-%COMP%]{background-color:var(--btn-active)}.btn__pick-item[_ngcontent-%COMP%]{min-width:max-content}button[type=submit][_ngcontent-%COMP%]{width:32px;padding:6px 0}"],changeDetection:0})}return n})();const Cde=new Nu({name:new Aa("",{nonNullable:!0,validators:Zm.required}),currentFolderId:new Aa(null),currentCategoryId:new Aa(null)}),bde=new Nu({name:new Aa("",{nonNullable:!0,validators:Zm.required}),currentCategoryId:new Aa(null,Zm.required)}),Vz=new Nu({name:new Aa("",{nonNullable:!0,validators:Zm.required})});let Tde=(()=>{class n{constructor(){this.createTotoEmitter=new Ze,this.createFolderEmitter=new Ze,this.createCategoryEmitter=new Ze,this.form=Vz,this.maxHeigth=74,this.formType="category",this.placeholder="Add category"}onSubmit(t){const{name:r,currentFolderId:i,currentCategoryId:s}=t.controls;switch(this.formType){case"todo":this.createTotoEmitter.emit({name:r.value,currentFolderId:i.value,currentCategoryId:s.value,date:new Date});break;case"folder":this.createFolderEmitter.emit({name:r.value,currentCategoryId:s.value});break;case"category":this.createCategoryEmitter.emit({name:r.value,foldersList:[]})}}onFormTypeChange(){switch(this.formType){case"category":this.updateForm("folder",bde,"Add folder",74);break;case"todo":this.updateForm("category",Vz,"Add category",34);break;default:this.updateForm("todo",Cde,"Add todo",116)}}updateForm(t,r,i,s){this.formType=t,this.form=r,this.placeholder=i,this.maxHeigth=s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-create-items"]],inputs:{categoriesList:"categoriesList",currentCategory:"currentCategory"},outputs:{createTotoEmitter:"createTotoEmitter",createFolderEmitter:"createFolderEmitter",createCategoryEmitter:"createCategoryEmitter"},decls:3,vars:6,consts:[[1,"btn","btn-primary",3,"click"],[3,"result","form","categoriesList","currentCategory","placeholder","maxHeigth"]],template:function(r,i){1&r&&(Ke(0,"span",0),ft("click",function(){return i.onFormTypeChange()}),_r(1),Ye(),Ke(2,"app-form-item",1),ft("result",function(o){return i.onSubmit(o)}),Ye()),2&r&&(Ve(),xc(" ",i.formType,"\n"),Ve(),ot("form",i.form)("categoriesList",i.categoriesList)("currentCategory",i.currentCategory)("placeholder",i.placeholder)("maxHeigth",i.maxHeigth))},dependencies:[wde],styles:["[_nghost-%COMP%]{display:flex;gap:12px;justify-content:space-between}span.btn[_ngcontent-%COMP%]{min-width:88px}"]})}return n})(),Dde=(()=>{class n{transform(t,r){return r&&(t=t.filter(i=>i.name===r?.name)),t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=pr({name:"categoryFilter",type:n,pure:!0})}return n})();const Ade=(n,e)=>e.id;function Sde(n,e){if(1&n&&(Ke(0,"app-swipe",5),wn(1,"app-category-list-item-ui",7),Ye()),2&n){const t=e.$implicit,r=Ot();ot("category",t),Ve(),ot("currentCategory",r.currentCategory)("todoList$",r.todoList$)("category",t)}}function Rde(n,e){1&n&&(wn(0,"app-todo-list-ui",6),io(1,"async"),io(2,"todo")),2&n&&ot("todoList",sm(2,3,mu(1,1,Ot().todoList$),null))}function Pde(n,e){1&n&&(Ke(0,"div",8),_r(1,"some template"),Ye())}let Mde=(()=>{class n{constructor(t,r,i){this.todoStore$=t,this.localStorageService=r,this.actionsService=i,r.initTodos(),this.currentCategory=r.loadCurrentCategoryFromStorage(),this.todoList$=this.todoStore$.pipe(zm(Voe)),this.categoriesList$=this.todoStore$.pipe(zm(Uoe))}onTodoCreate(t){this.actionsService.todoCreate(t)}onFolderCreate(t){this.actionsService.folderCreate(t)}onCategoryCreate(t){this.actionsService.categoryCreate(t)}onCategoryPick(t){this.currentCategory=t,this.localStorageService.setCurrentCategoryInLocalstorage(t||null)}static#e=this.\u0275fac=function(r){return new(r||n)(ie(Uc),ie(Z0),ie(rw))};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-todo-widget"]],decls:13,vars:14,consts:[["modalTemplate",""],[1,"todo-widget-wrapper","container"],[3,"createTotoEmitter","createCategoryEmitter","createFolderEmitter","categoriesList","currentCategory"],[3,"currentCategoryEmmiter","categoriesList","currentCategory"],[1,"content"],[3,"category"],[3,"todoList"],[3,"currentCategory","todoList$","category"],[1,""]],template:function(r,i){if(1&r){const s=fi();Ke(0,"div",1)(1,"app-create-items",2),io(2,"async"),ft("createTotoEmitter",function(a){return fn(s),an(i.onTodoCreate(a))})("createCategoryEmitter",function(a){return fn(s),an(i.onCategoryCreate(a))})("createFolderEmitter",function(a){return fn(s),an(i.onFolderCreate(a))}),Ye(),Ke(3,"app-todo-header-bar-ui",3),io(4,"async"),ft("currentCategoryEmmiter",function(a){return fn(s),an(i.onCategoryPick(a))}),Ye(),Ke(5,"div",4),Pc(6,Sde,2,4,"app-swipe",5,Ade),io(8,"async"),io(9,"categoryFilter"),hi(10,Rde,3,6,"app-todo-list-ui",6),Ye()(),hi(11,Pde,2,0,"ng-template",null,0,am)}2&r&&(Ve(),ot("categoriesList",mu(2,5,i.categoriesList$))("currentCategory",i.currentCategory),Ve(2),ot("categoriesList",mu(4,7,i.categoriesList$))("currentCategory",i.currentCategory),Ve(3),Mc(sm(9,11,mu(8,9,i.categoriesList$),i.currentCategory)),Ve(4),Ps(i.currentCategory?-1:10))},dependencies:[WR,rde,hde,qR,Tde,_I,Dde,KR],styles:[".todo-widget-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center}@media screen and (max-width: 415px){.content[_ngcontent-%COMP%]{padding:0 30px}}"]})}return n})();const xde=[{path:"",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=fr({type:n,selectors:[["app-todo-page"]],decls:1,vars:0,template:function(r,i){1&r&&wn(0,"app-todo-widget")},dependencies:[Mde]})}return n})()}];let Uz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({imports:[vm,AR,g$,D$.forRoot()]})}return n})(),Nde=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({imports:[vm,SH,AR,Uz]})}return n})();var f_=function(n){return n.create="[Category] create category item",n.edit="[Category] edit category item",n.delete="[Category] delete category item",n.load="[Category] load category item",n}(f_||{});class Ode{constructor(e){this.payload=e,this.type=f_.load}}const Vde=Gm(V0("category"),n=>n.categoryList),Bz="Category-MyTodoNgrxApp";let Ude=(()=>{class n{constructor(t){this.store$=t,this.isInit=!1}initCategories(){this.isInit||(this.isInit=!0,this.loadFromStorage(),this.store$.pipe(zm(Vde),Qn(t=>!!t)).subscribe(t=>{localStorage.setItem(Bz,JSON.stringify(t))}),window.addEventListener("storage",()=>{this.loadFromStorage()}))}loadFromStorage(){const t=localStorage.getItem(Bz);t&&this.store$.dispatch(new Ode({state:JSON.parse(t)}))}static#e=this.\u0275fac=function(r){return new(r||n)(j(Uc))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bde=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({providers:[RH,Ude,Z0,rw,PH],imports:[vm,bj.forFeature("todo",Loe),qB.forChild(xde),SH,lue,Oue,Nde,AR,Uz,g$,D$.forRoot()]})}return n})();var yf=pt(852);(0,yf.registerVersion)("firebase","10.13.1","app");const QR=new Hh("ANGULARFIRE2_VERSION");class jz{constructor(){return(n=>{const t=(0,yf.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(zde)}}const zde="app-check";function vf(){}class $z{zone;delegate;constructor(e,t=E0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Gde{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vf,{},vf,vf)),t.pipe(xr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hz=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new $z(Zone.current)),this.insideAngular=t.run(()=>new $z(Zone.current,Su)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(j(st))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hs(n){return function Wde(n){return function(t){return(t=t.lift(new Gde(n.ngZone))).pipe(Kh(n.outsideAngular),Ca(n.insideAngular))}}(function Ef(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Wc=pt(345);Wc.A.registerVersion("firebase","10.13.1","app-compat");const Zde=["ngOnDestroy"];class zz{constructor(e){return e}}const Nw=new Y("angularfire2.app.options"),Ow=new Y("angularfire2.app.name");function YR(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Wc.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Wc.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;ehe("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new zz(o)}const ehe=(n,...e)=>{},the={provide:zz,useFactory:YR,deps:[Nw,st,[new Ja,Ow]]};let nhe=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Nw,useValue:t},{provide:Ow,useValue:r}]}}constructor(t){Wc.A.registerVersion("angularfire",QR.full,"core"),Wc.A.registerVersion("angularfire",QR.full,"app-compat"),Wc.A.registerVersion("angular",xZ.full,t.toString())}static \u0275fac=function(r){return new(r||n)(j(ss))};static \u0275mod=qt({type:n});static \u0275inj=$t({providers:[the]})}return n})();function Gz(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function rhe(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(qz("error",`${e} was already initialized on the ${t} Firebase App with different settings.${ihe?" You may need to reload as Firebase is not HMR aware.":""}`),qz("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const ihe=typeof module<"u"&&!!module.hot,qz=(n,...e)=>{};function Wz(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,H0({connector:()=>new Tj(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Kz(n,e){return je(e)?Xn(()=>n,e):Xn(()=>n)}globalThis.\u0275AngularfireInstanceCache||=[],pt(200);const Qz=new Y("angularfire2.auth.use-emulator"),Yz=new Y("angularfire2.auth.settings"),Zz=new Y("angularfire2.auth.tenant-id"),Xz=new Y("angularfire2.auth.langugage-code"),Jz=new Y("angularfire2.auth.use-device-language"),e3=new Y("angularfire.auth.persistence"),t3=(n,e,t,r,i,s,o,a)=>Gz(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,f]of Object.entries(o))c.settings[u]=f;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let ZR=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,f,m,_,E){const w=new R,b=ze(void 0).pipe(Ca(o.outsideAngular),Xn(()=>s.runOutsideAngular(()=>Promise.resolve().then(pt.bind(pt,200)))),Ce(()=>YR(t,s,r)),Ce(D=>t3(D,s,a,u,f,m,c,_)),Wz({bufferSize:1,refCount:!1}));if(yI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{b.pipe(Fc()).subscribe();const D=b.pipe(Xn(V=>V.getRedirectResult().then(J=>J,()=>null)),hs,Wz({bufferSize:1,refCount:!1})),k=b.pipe(Xn(V=>new St(J=>({unsubscribe:s.runOutsideAngular(()=>V.onAuthStateChanged(me=>J.next(me),me=>J.error(me),()=>J.complete()))})))),x=b.pipe(Xn(V=>new St(J=>({unsubscribe:s.runOutsideAngular(()=>V.onIdTokenChanged(me=>J.next(me),me=>J.error(me),()=>J.complete()))}))));this.authState=D.pipe(Kz(k),Kh(o.outsideAngular),Ca(o.insideAngular)),this.user=D.pipe(Kz(x),Kh(o.outsideAngular),Ca(o.insideAngular)),this.idToken=this.user.pipe(Xn(V=>V?Tn(V.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(Xn(V=>V?Tn(V.getIdTokenResult()):ze(null))),this.credential=Au(D,w,this.authState.pipe(Qn(V=>!V))).pipe(Ce(V=>V?.user?V:null),Kh(o.outsideAngular),Ca(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Zde.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(f=>{const m=f?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,m),m})})})}))(this,b,s,{spy:{apply:(D,k,x)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&x.then(V=>w.next(V))}}})}static \u0275fac=function(r){return new(r||n)(j(Nw),j(Ow,8),j(ss),j(st),j(Hz),j(Qz,8),j(Yz,8),j(Zz,8),j(Xz,8),j(Jz,8),j(e3,8),j(jz,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function XR(){return Ne((n,e)=>{let t,r=!1;n.subscribe(Le(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Bu,s3,n3=pt(362),Bo=pt(41),Yt=pt(76),r3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i3={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(F,S,O){O||(O=0);var U=Array(16);if("string"==typeof S)for(var z=0;16>z;++z)U[z]=S.charCodeAt(O++)|S.charCodeAt(O++)<<8|S.charCodeAt(O++)<<16|S.charCodeAt(O++)<<24;else for(z=0;16>z;++z)U[z]=S[O++]|S[O++]<<8|S[O++]<<16|S[O++]<<24;var K=F.g[3],L=(S=F.g[0])+(K^(O=F.g[1])&((z=F.g[2])^K))+U[0]+3614090360&4294967295;L=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=(O=(z=(K=(S=O+(L<<7&4294967295|L>>>25))+((L=K+(z^S&(O^z))+U[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=z+(O^K&(S^O))+U[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=O+(S^z&(K^S))+U[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=S+(K^O&(z^K))+U[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=K+(z^S&(O^z))+U[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=z+(O^K&(S^O))+U[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=O+(S^z&(K^S))+U[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=S+(K^O&(z^K))+U[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=K+(z^S&(O^z))+U[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=z+(O^K&(S^O))+U[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=O+(S^z&(K^S))+U[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=S+(K^O&(z^K))+U[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=K+(z^S&(O^z))+U[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=z+(O^K&(S^O))+U[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=O+(S^z&(K^S))+U[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=S+(z^K&(O^z))+U[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=K+(O^z&(S^O))+U[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=z+(S^O&(K^S))+U[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=O+(K^S&(z^K))+U[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=S+(z^K&(O^z))+U[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=K+(O^z&(S^O))+U[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=z+(S^O&(K^S))+U[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=O+(K^S&(z^K))+U[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=S+(z^K&(O^z))+U[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=K+(O^z&(S^O))+U[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=z+(S^O&(K^S))+U[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=O+(K^S&(z^K))+U[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=S+(z^K&(O^z))+U[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=K+(O^z&(S^O))+U[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=z+(S^O&(K^S))+U[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=O+(K^S&(z^K))+U[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=S+(O^z^K)+U[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=K+(S^O^z)+U[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=z+(K^S^O)+U[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=O+(z^K^S)+U[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=S+(O^z^K)+U[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=K+(S^O^z)+U[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=z+(K^S^O)+U[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=O+(z^K^S)+U[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=S+(O^z^K)+U[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=K+(S^O^z)+U[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=z+(K^S^O)+U[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=O+(z^K^S)+U[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=S+(O^z^K)+U[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=K+(S^O^z)+U[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=z+(K^S^O)+U[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=O+(z^K^S)+U[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=S+(z^(O|~K))+U[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=K+(O^(S|~z))+U[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=z+(S^(K|~O))+U[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=O+(K^(z|~S))+U[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=S+(z^(O|~K))+U[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=K+(O^(S|~z))+U[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=z+(S^(K|~O))+U[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=O+(K^(z|~S))+U[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=S+(z^(O|~K))+U[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=K+(O^(S|~z))+U[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=z+(S^(K|~O))+U[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=O+(K^(z|~S))+U[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((K=(S=O+((L=S+(z^(O|~K))+U[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=K+(O^(S|~z))+U[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((z=K+((L=z+(S^(K|~O))+U[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~S))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+S&4294967295,F.g[1]=F.g[1]+(z+(L<<21&4294967295|L>>>11))&4294967295,F.g[2]=F.g[2]+z&4294967295,F.g[3]=F.g[3]+K&4294967295}function o(F,S){this.h=S;for(var O=[],U=!0,z=F.length-1;0<=z;z--){var K=0|F[z];U&&K==S||(O[z]=K,U=!1)}this.g=O}(function e(F,S){function O(){}O.prototype=S.prototype,F.D=S.prototype,F.prototype=new O,F.prototype.constructor=F,F.C=function(U,z,K){for(var L=Array(arguments.length-2),Va=2;Va<arguments.length;Va++)L[Va-2]=arguments[Va];return S.prototype[z].apply(U,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(F,S){void 0===S&&(S=F.length);for(var O=S-this.blockSize,U=this.B,z=this.h,K=0;K<S;){if(0==z)for(;K<=O;)i(this,F,K),K+=this.blockSize;if("string"==typeof F){for(;K<S;)if(U[z++]=F.charCodeAt(K++),z==this.blockSize){i(this,U),z=0;break}}else for(;K<S;)if(U[z++]=F[K++],z==this.blockSize){i(this,U),z=0;break}}this.h=z,this.o+=S},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var S=1;S<F.length-8;++S)F[S]=0;var O=8*this.o;for(S=F.length-8;S<F.length;++S)F[S]=255&O,O/=256;for(this.u(F),F=Array(16),S=O=0;4>S;++S)for(var U=0;32>U;U+=8)F[O++]=this.g[S]>>>U&255;return F};var a={};function c(F){return-128<=F&&128>F?function s(F,S){var O=a;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=S(F)}(F,function(S){return new o([0|S],0>S?-1:0)}):new o([0|F],0>F?-1:0)}function u(F){if(isNaN(F)||!isFinite(F))return m;if(0>F)return D(u(-F));for(var S=[],O=1,U=0;F>=O;U++)S[U]=F/O|0,O*=4294967296;return new o(S,0)}var m=c(0),_=c(1),E=c(16777216);function w(F){if(0!=F.h)return!1;for(var S=0;S<F.g.length;S++)if(0!=F.g[S])return!1;return!0}function b(F){return-1==F.h}function D(F){for(var S=F.g.length,O=[],U=0;U<S;U++)O[U]=~F.g[U];return new o(O,~F.h).add(_)}function k(F,S){return F.add(D(S))}function x(F,S){for(;(65535&F[S])!=F[S];)F[S+1]+=F[S]>>>16,F[S]&=65535,S++}function V(F,S){this.g=F,this.h=S}function J(F,S){if(w(S))throw Error("division by zero");if(w(F))return new V(m,m);if(b(F))return S=J(D(F),S),new V(D(S.g),D(S.h));if(b(S))return S=J(F,D(S)),new V(D(S.g),S.h);if(30<F.g.length){if(b(F)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var O=_,U=S;0>=U.l(F);)O=me(O),U=me(U);var z=Ee(O,1),K=Ee(U,1);for(U=Ee(U,2),O=Ee(O,2);!w(U);){var L=K.add(U);0>=L.l(F)&&(z=z.add(O),K=L),U=Ee(U,1),O=Ee(O,1)}return S=k(F,z.j(S)),new V(z,S)}for(z=m;0<=F.l(S);){for(O=Math.max(1,Math.floor(F.m()/S.m())),U=48>=(U=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,U-48),L=(K=u(O)).j(S);b(L)||0<L.l(F);)L=(K=u(O-=U)).j(S);w(K)&&(K=_),z=z.add(K),F=k(F,L)}return new V(z,F)}function me(F){for(var S=F.g.length+1,O=[],U=0;U<S;U++)O[U]=F.i(U)<<1|F.i(U-1)>>>31;return new o(O,F.h)}function Ee(F,S){var O=S>>5;S%=32;for(var U=F.g.length-O,z=[],K=0;K<U;K++)z[K]=0<S?F.i(K+O)>>>S|F.i(K+O+1)<<32-S:F.i(K+O);return new o(z,F.h)}(n=o.prototype).m=function(){if(b(this))return-D(this).m();for(var F=0,S=1,O=0;O<this.g.length;O++){var U=this.i(O);F+=(0<=U?U:4294967296+U)*S,S*=4294967296}return F},n.toString=function(F){if(2>(F=F||10)||36<F)throw Error("radix out of range: "+F);if(w(this))return"0";if(b(this))return"-"+D(this).toString(F);for(var S=u(Math.pow(F,6)),O=this,U="";;){var z=J(O,S).g,K=((0<(O=k(O,z.j(S))).g.length?O.g[0]:O.h)>>>0).toString(F);if(w(O=z))return K+U;for(;6>K.length;)K="0"+K;U=K+U}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h},n.l=function(F){return b(F=k(this,F))?-1:w(F)?0:1},n.abs=function(){return b(this)?D(this):this},n.add=function(F){for(var S=Math.max(this.g.length,F.g.length),O=[],U=0,z=0;z<=S;z++){var K=U+(65535&this.i(z))+(65535&F.i(z)),L=(K>>>16)+(this.i(z)>>>16)+(F.i(z)>>>16);U=L>>>16,O[z]=(L&=65535)<<16|(K&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(F){if(w(this)||w(F))return m;if(b(this))return b(F)?D(this).j(D(F)):D(D(this).j(F));if(b(F))return D(this.j(D(F)));if(0>this.l(E)&&0>F.l(E))return u(this.m()*F.m());for(var S=this.g.length+F.g.length,O=[],U=0;U<2*S;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var z=0;z<F.g.length;z++){var K=this.i(U)>>>16,L=65535&this.i(U),Va=F.i(z)>>>16,ny=65535&F.i(z);O[2*U+2*z]+=L*ny,x(O,2*U+2*z),O[2*U+2*z+1]+=K*ny,x(O,2*U+2*z+1),O[2*U+2*z+1]+=L*Va,x(O,2*U+2*z+1),O[2*U+2*z+2]+=K*Va,x(O,2*U+2*z+2)}for(U=0;U<S;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=S;U<2*S;U++)O[U]=0;return new o(O,0)},n.A=function(F){return J(this,F).h},n.and=function(F){for(var S=Math.max(this.g.length,F.g.length),O=[],U=0;U<S;U++)O[U]=this.i(U)&F.i(U);return new o(O,this.h&F.h)},n.or=function(F){for(var S=Math.max(this.g.length,F.g.length),O=[],U=0;U<S;U++)O[U]=this.i(U)|F.i(U);return new o(O,this.h|F.h)},n.xor=function(F){for(var S=Math.max(this.g.length,F.g.length),O=[],U=0;U<S;U++)O[U]=this.i(U)^F.i(U);return new o(O,this.h^F.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s3=i3.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function f(F,S){if(0==F.length)throw Error("number format error: empty string");if(2>(S=S||10)||36<S)throw Error("radix out of range: "+S);if("-"==F.charAt(0))return D(f(F.substring(1),S));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=u(Math.pow(S,8)),U=m,z=0;z<F.length;z+=8){var K=Math.min(8,F.length-z),L=parseInt(F.substring(z,z+K),S);8>K?(K=u(Math.pow(S,K)),U=U.j(K).add(u(L))):U=(U=U.j(O)).add(u(L))}return U},Bu=i3.Integer=o}).apply(typeof r3<"u"?r3:typeof self<"u"?self:typeof window<"u"?window:{});var o3,a3,p_,c3,Fw,JR,l3,u3,d3,kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,y,I){return h==Array.prototype||h==Object.prototype||(h[y]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof kw&&kw];for(var y=0;y<h.length;++y){var I=h[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,y){if(y)e:{var I=r;h=h.split(".");for(var T=0;T<h.length-1;T++){var G=h[T];if(!(G in I))break e;I=I[G]}(y=y(T=I[h=h[h.length-1]]))!=T&&null!=y&&e(I,h,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(h){return h||function(){return function s(h,y){h instanceof String&&(h+="");var I=0,T=!1,G={next:function(){if(!T&&I<h.length){var te=I++;return{value:y(te,h[te]),done:!1}}return T=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}(this,function(y,I){return I})}});var o=o||{},a=this||self;function c(h){var y=typeof h;return"array"==(y="object"!=y?y:h?Array.isArray(h)?"array":y:"null")||"object"==y&&"number"==typeof h.length}function u(h){var y=typeof h;return"object"==y&&null!=h||"function"==y}function f(h,y,I){return h.call.apply(h.bind,arguments)}function m(h,y,I){if(!h)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,T),h.apply(y,G)}}return function(){return h.apply(y,arguments)}}function _(h,y,I){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function E(h,y){var I=Array.prototype.slice.call(arguments,1);return function(){var T=I.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function w(h,y){function I(){}I.prototype=y.prototype,h.aa=y.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(T,G,te){for(var De=Array(arguments.length-2),mn=2;mn<arguments.length;mn++)De[mn-2]=arguments[mn];return y.prototype[G].apply(T,De)}}function b(h){const y=h.length;if(0<y){const I=Array(y);for(let T=0;T<y;T++)I[T]=h[T];return I}return[]}function D(h,y){for(let I=1;I<arguments.length;I++){const T=arguments[I];if(c(T)){const G=h.length||0,te=T.length||0;h.length=G+te;for(let De=0;De<te;De++)h[G+De]=T[De]}else h.push(T)}}function x(h){return/^[\s\xa0]*$/.test(h)}function V(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function J(h){return J[" "](h),h}J[" "]=function(){};var me=!(-1==V().indexOf("Gecko")||-1!=V().toLowerCase().indexOf("webkit")&&-1==V().indexOf("Edge")||-1!=V().indexOf("Trident")||-1!=V().indexOf("MSIE")||-1!=V().indexOf("Edge"));function Ee(h,y,I){for(const T in h)y.call(I,h[T],T,h)}function S(h){const y={};for(const I in h)y[I]=h[I];return y}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,y){let I,T;for(let G=1;G<arguments.length;G++){for(I in T=arguments[G],T)h[I]=T[I];for(let te=0;te<O.length;te++)I=O[te],Object.prototype.hasOwnProperty.call(T,I)&&(h[I]=T[I])}}function z(h){var y=1;h=h.split(":");const I=[];for(;0<y&&h.length;)I.push(h.shift()),y--;return h.length&&I.push(h.join(":")),I}function K(h){a.setTimeout(()=>{throw h},0)}function L(){var h=Tx;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}var ny=new class k{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new Vme,h=>h.reset());class Vme{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ry,iy=!1,Tx=new class Va{constructor(){this.h=this.g=null}add(y,I){const T=ny.get();T.set(y,I),this.h?this.h.next=T:this.g=T,this.h=T}},aW=()=>{const h=a.Promise.resolve(void 0);ry=()=>{h.then(Ume)}};var Ume=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(I){K(I)}var y=ny;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}iy=!1};function fl(){this.s=this.s,this.C=this.C}function vi(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}fl.prototype.s=!1,fl.prototype.ma=function(){this.s||(this.s=!0,this.N())},fl.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},vi.prototype.h=function(){this.defaultPrevented=!0};var Bme=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,y),a.removeEventListener("test",I,y)}catch{}return h}();function sy(h,y){if(vi.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(me){e:{try{J(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else"mouseover"==I?y=h.fromElement:"mouseout"==I&&(y=h.toElement);this.relatedTarget=y,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:jme[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&sy.aa.h.call(this)}}w(sy,vi);var jme={2:"touch",3:"pen",4:"mouse"};sy.prototype.h=function(){sy.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var oy="closure_listenable_"+(1e6*Math.random()|0),$me=0;function Hme(h,y,I,T,G){this.listener=h,this.proxy=null,this.src=y,this.type=I,this.capture=!!T,this.ha=G,this.key=++$me,this.da=this.fa=!1}function VC(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function UC(h){this.src=h,this.g={},this.h=0}function Dx(h,y){var I=y.type;if(I in h.g){var te,T=h.g[I],G=Array.prototype.indexOf.call(T,y,void 0);(te=0<=G)&&Array.prototype.splice.call(T,G,1),te&&(VC(y),0==h.g[I].length&&(delete h.g[I],h.h--))}}function Ax(h,y,I,T){for(var G=0;G<h.length;++G){var te=h[G];if(!te.da&&te.listener==y&&te.capture==!!I&&te.ha==T)return G}return-1}UC.prototype.add=function(h,y,I,T,G){var te=h.toString();(h=this.g[te])||(h=this.g[te]=[],this.h++);var De=Ax(h,y,T,G);return-1<De?(y=h[De],I||(y.fa=!1)):((y=new Hme(y,this.src,te,!!T,G)).fa=I,h.push(y)),y};var Sx="closure_lm_"+(1e6*Math.random()|0),Rx={};function cW(h,y,I,T,G){if(T&&T.once)return uW(h,y,I,T,G);if(Array.isArray(y)){for(var te=0;te<y.length;te++)cW(h,y[te],I,T,G);return null}return I=Nx(I),h&&h[oy]?h.K(y,I,u(T)?!!T.capture:!!T,G):lW(h,y,I,!1,T,G)}function lW(h,y,I,T,G,te){if(!y)throw Error("Invalid event type");var De=u(G)?!!G.capture:!!G,mn=Mx(h);if(mn||(h[Sx]=mn=new UC(h)),(I=mn.add(y,I,T,De,te)).proxy)return I;if(T=function zme(){const y=Gme;return function h(I){return y.call(h.src,h.listener,I)}}(),I.proxy=T,T.src=h,T.listener=I,h.addEventListener)Bme||(G=De),void 0===G&&(G=!1),h.addEventListener(y.toString(),T,G);else if(h.attachEvent)h.attachEvent(hW(y.toString()),T);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(T)}return I}function uW(h,y,I,T,G){if(Array.isArray(y)){for(var te=0;te<y.length;te++)uW(h,y[te],I,T,G);return null}return I=Nx(I),h&&h[oy]?h.L(y,I,u(T)?!!T.capture:!!T,G):lW(h,y,I,!0,T,G)}function dW(h,y,I,T,G){if(Array.isArray(y))for(var te=0;te<y.length;te++)dW(h,y[te],I,T,G);else T=u(T)?!!T.capture:!!T,I=Nx(I),h&&h[oy]?(h=h.i,(y=String(y).toString())in h.g&&-1<(I=Ax(te=h.g[y],I,T,G))&&(VC(te[I]),Array.prototype.splice.call(te,I,1),0==te.length&&(delete h.g[y],h.h--))):h&&(h=Mx(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ax(y,I,T,G)),(I=-1<h?y[h]:null)&&Px(I))}function Px(h){if("number"!=typeof h&&h&&!h.da){var y=h.src;if(y&&y[oy])Dx(y.i,h);else{var I=h.type,T=h.proxy;y.removeEventListener?y.removeEventListener(I,T,h.capture):y.detachEvent?y.detachEvent(hW(I),T):y.addListener&&y.removeListener&&y.removeListener(T),(I=Mx(y))?(Dx(I,h),0==I.h&&(I.src=null,y[Sx]=null)):VC(h)}}}function hW(h){return h in Rx?Rx[h]:Rx[h]="on"+h}function Gme(h,y){if(h.da)h=!0;else{y=new sy(y,this);var I=h.listener,T=h.ha||h.src;h.fa&&Px(h),h=I.call(T,y)}return h}function Mx(h){return(h=h[Sx])instanceof UC?h:null}var xx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nx(h){return"function"==typeof h?h:(h[xx]||(h[xx]=function(y){return h.handleEvent(y)}),h[xx])}function Ei(){fl.call(this),this.i=new UC(this),this.M=this,this.F=null}function Li(h,y){var I,T=h.F;if(T)for(I=[];T;T=T.F)I.push(T);if(h=h.M,T=y.type||y,"string"==typeof y)y=new vi(y,h);else if(y instanceof vi)y.target=y.target||h;else{var G=y;U(y=new vi(T,h),G)}if(G=!0,I)for(var te=I.length-1;0<=te;te--){var De=y.g=I[te];G=BC(De,T,!0,y)&&G}if(G=BC(De=y.g=h,T,!0,y)&&G,G=BC(De,T,!1,y)&&G,I)for(te=0;te<I.length;te++)G=BC(De=y.g=I[te],T,!1,y)&&G}function BC(h,y,I,T){if(!(y=h.i.g[String(y)]))return!0;y=y.concat();for(var G=!0,te=0;te<y.length;++te){var De=y[te];if(De&&!De.da&&De.capture==I){var mn=De.listener,ri=De.ha||De.src;De.fa&&Dx(h.i,De),G=!1!==mn.call(ri,T)&&G}}return G&&!T.defaultPrevented}function fW(h,y,I){if("function"==typeof h)I&&(h=_(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=_(h.handleEvent,h)}return 2147483647<Number(y)?-1:a.setTimeout(h,y||0)}function pW(h){h.g=fW(()=>{h.g=null,h.i&&(h.i=!1,pW(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}w(Ei,fl),Ei.prototype[oy]=!0,Ei.prototype.removeEventListener=function(h,y,I,T){dW(this,h,y,I,T)},Ei.prototype.N=function(){if(Ei.aa.N.call(this),this.i){var y,h=this.i;for(y in h.g){for(var I=h.g[y],T=0;T<I.length;T++)VC(I[T]);delete h.g[y],h.h--}}this.F=null},Ei.prototype.K=function(h,y,I,T){return this.i.add(String(h),y,!1,I,T)},Ei.prototype.L=function(h,y,I,T){return this.i.add(String(h),y,!0,I,T)};class qme extends fl{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:pW(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ay(h){fl.call(this),this.h=h,this.g={}}w(ay,fl);var gW=[];function mW(h){Ee(h.g,function(y,I){this.g.hasOwnProperty(I)&&Px(y)},h),h.g={}}ay.prototype.N=function(){ay.aa.N.call(this),mW(this)},ay.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ox=a.JSON.stringify,Wme=a.JSON.parse,Kme=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function kx(){}function yW(){}kx.prototype.h=null;var cy={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fx(){vi.call(this,"d")}function Lx(){vi.call(this,"c")}w(Fx,vi),w(Lx,vi);var cd={},vW=null;function jC(){return vW=vW||new Ei}function EW(h){vi.call(this,cd.La,h)}function ly(h){const y=jC();Li(y,new EW(y))}function IW(h,y){vi.call(this,cd.STAT_EVENT,h),this.stat=y}function Vi(h){const y=jC();Li(y,new IW(y,h))}function wW(h,y){vi.call(this,cd.Ma,h),this.size=y}function uy(h,y){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function dy(){this.g=!0}function sp(h,y,I,T){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+function Xme(h,y){if(!h.g)return y;if(!y)return null;try{var I=JSON.parse(y);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var T=I[h];if(!(2>T.length)){var G=T[1];if(Array.isArray(G)&&!(1>G.length)){var te=G[0];if("noop"!=te&&"stop"!=te&&"close"!=te)for(var De=1;De<G.length;De++)G[De]=""}}}return Ox(I)}catch{return y}}(h,I)+(T?" "+T:"")})}cd.La="serverreachability",w(EW,vi),cd.STAT_EVENT="statevent",w(IW,vi),cd.Ma="timingevent",w(wW,vi),dy.prototype.xa=function(){this.g=!1},dy.prototype.info=function(){};var Vx,$C={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},CW={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function HC(){}function pl(h,y,I,T){this.j=h,this.i=y,this.l=I,this.R=T||1,this.U=new ay(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bW}function bW(){this.i=null,this.g="",this.h=!1}w(HC,kx),HC.prototype.g=function(){return new XMLHttpRequest},HC.prototype.i=function(){return{}},Vx=new HC;var TW={},Ux={};function Bx(h,y,I){h.L=1,h.v=WC(Ua(y)),h.m=I,h.P=!0,DW(h,null)}function DW(h,y){h.F=Date.now(),zC(h),h.A=Ua(h.v);var I=h.A,T=h.R;Array.isArray(T)||(T=[String(T)]),BW(I.i,"t",T),h.C=0,I=h.j.J,h.h=new bW,h.g=i8(h.j,I?y:null,!h.m),0<h.O&&(h.M=new qme(_(h.Y,h,h.g),h.O)),y=h.U,I=h.g,T=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(gW[0]=G.toString()),G=gW);for(var te=0;te<G.length;te++){var De=cW(I,G[te],T||y.handleEvent,!1,y.h||y);if(!De)break;y.g[De.key]=De}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),ly(),function Qme(h,y,I,T,G,te){h.info(function(){if(h.g)if(te)for(var De="",mn=te.split("&"),ri=0;ri<mn.length;ri++){var zt=mn[ri].split("=");if(1<zt.length){var Ii=zt[0];zt=zt[1];var wi=Ii.split("_");De=2<=wi.length&&"type"==wi[1]?De+(Ii+"=")+zt+"&":De+(Ii+"=redacted&")}}else De=null;else De=te;return"XMLHTTP REQ ("+T+") [attempt "+G+"]: "+y+"\n"+I+"\n"+De})}(h.i,h.u,h.A,h.l,h.R,h.m)}function AW(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Jme(h,y){var I=h.C,T=y.indexOf("\n",I);return-1==T?Ux:(I=Number(y.substring(I,T)),isNaN(I)?TW:(T+=1)+I>y.length?Ux:(y=y.slice(T,T+I),h.C=T+I,y))}function zC(h){h.S=Date.now()+h.I,SW(h,h.I)}function SW(h,y){if(null!=h.B)throw Error("WatchDog timer not null");h.B=uy(_(h.ba,h),y)}function jx(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function hy(h){0==h.j.G||h.J||e8(h.j,h)}function ld(h){jx(h);var y=h.M;y&&"function"==typeof y.ma&&y.ma(),h.M=null,mW(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function $x(h,y){try{var I=h.j;if(0!=I.G&&(I.g==h||Hx(I.h,h)))if(!h.K&&Hx(I.h,h)&&3==I.G){try{var T=I.Da.g.parse(y)}catch{T=null}if(Array.isArray(T)&&3==T.length){var G=T;if(0==G[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;XC(I),YC(I)}Wx(I),Vi(18)}}else I.za=G[1],0<I.za-I.T&&37500>G[2]&&I.F&&0==I.v&&!I.C&&(I.C=uy(_(I.Za,I),6e3));if(1>=MW(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else dd(I,11)}else if((h.K||I.g==h)&&XC(I),!x(y))for(G=I.Da.g.parse(y),y=0;y<G.length;y++){let zt=G[y];if(I.T=zt[0],zt=zt[1],2==I.G)if("c"==zt[0]){I.K=zt[1],I.ia=zt[2];const Ii=zt[3];null!=Ii&&(I.la=Ii,I.j.info("VER="+I.la));const wi=zt[4];null!=wi&&(I.Aa=wi,I.j.info("SVER="+I.Aa));const cp=zt[5];null!=cp&&"number"==typeof cp&&0<cp&&(I.L=T=1.5*cp,I.j.info("backChannelRequestTimeoutMs_="+T)),T=I;const ho=h.g;if(ho){const eb=ho.g?ho.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eb){var te=T.h;te.g||-1==eb.indexOf("spdy")&&-1==eb.indexOf("quic")&&-1==eb.indexOf("h2")||(te.j=te.l,te.g=new Set,te.h&&(zx(te,te.h),te.h=null))}if(T.D){const Qx=ho.g?ho.g.getResponseHeader("X-HTTP-Session-Id"):null;Qx&&(T.ya=Qx,xn(T.I,T.D,Qx))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var De=h;if((T=I).qa=r8(T,T.J?T.ia:null,T.W),De.K){xW(T.h,De);var mn=De,ri=T.L;ri&&(mn.I=ri),mn.B&&(jx(mn),zC(mn)),T.g=De}else XW(T);0<I.i.length&&ZC(I)}else"stop"!=zt[0]&&"close"!=zt[0]||dd(I,7);else 3==I.G&&("stop"==zt[0]||"close"==zt[0]?"stop"==zt[0]?dd(I,7):qx(I):"noop"!=zt[0]&&I.l&&I.l.ta(zt),I.v=0)}ly()}catch{}}pl.prototype.ca=function(h){h=h.target;const y=this.M;y&&3==Ba(h)?y.j():this.Y(h)},pl.prototype.Y=function(h){try{if(h==this.g)e:{const wi=Ba(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>wi)&&(3!=wi||this.g&&(this.h.h||this.g.oa()||WW(this.g)))){this.J||4!=wi||7==y||ly(),jx(this);var I=this.g.Z();this.X=I;t:if(AW(this)){var T=WW(this.g);h="";var G=T.length,te=4==Ba(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ld(this),hy(this);var De="";break t}this.h.i=new a.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,h+=this.h.i.decode(T[y],{stream:!(te&&y==G-1)});T.length=0,this.h.g+=h,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=200==I,function Yme(h,y,I,T,G,te,De){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+G+"]: "+y+"\n"+I+"\n"+te+" "+De})}(this.i,this.u,this.A,this.l,this.R,wi,I),this.o){if(this.T&&!this.K){t:{if(this.g){var mn,ri=this.g;if((mn=ri.g?ri.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(mn)){var zt=mn;break t}}zt=null}if(!(I=zt)){this.o=!1,this.s=3,Vi(12),ld(this),hy(this);break e}sp(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$x(this,I)}if(this.P){let ho;for(I=!0;!this.J&&this.C<De.length;){if(ho=Jme(this,De),ho==Ux){4==wi&&(this.s=4,Vi(14),I=!1),sp(this.i,this.l,null,"[Incomplete Response]");break}if(ho==TW){this.s=4,Vi(15),sp(this.i,this.l,De,"[Invalid Chunk]"),I=!1;break}sp(this.i,this.l,ho,null),$x(this,ho)}if(AW(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=wi||0!=De.length||this.h.h||(this.s=1,Vi(16),I=!1),this.o=this.o&&I,I){if(0<De.length&&!this.W){this.W=!0;var Ii=this.j;Ii.g==this&&Ii.ba&&!Ii.M&&(Ii.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),Kx(Ii),Ii.M=!0,Vi(11))}}else sp(this.i,this.l,De,"[Invalid Chunked Response]"),ld(this),hy(this)}else sp(this.i,this.l,De,null),$x(this,De);4==wi&&ld(this),this.o&&!this.J&&(4==wi?e8(this.j,this):(this.o=!1,zC(this)))}else(function m_e(h){const y={};h=(h.g&&2<=Ba(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<h.length;T++){if(x(h[T]))continue;var I=z(h[T]);const G=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const te=y[G]||[];y[G]=te,te.push(I)}!function F(h,y){for(const I in h)y.call(void 0,h[I],I,h)}(y,function(T){return T.join(", ")})})(this.g),400==I&&0<De.indexOf("Unknown SID")?(this.s=3,Vi(12)):(this.s=0,Vi(13)),ld(this),hy(this)}}}catch{}},pl.prototype.cancel=function(){this.J=!0,ld(this)},pl.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Zme(h,y){h.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(ly(),Vi(17)),ld(this),this.s=2,hy(this)):SW(this,this.S-h)};var e_e=class{constructor(h,y){this.g=h,this.map=y}};function RW(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PW(h){return!!h.h||!!h.g&&h.g.size>=h.j}function MW(h){return h.h?1:h.g?h.g.size:0}function Hx(h,y){return h.h?h.h==y:!!h.g&&h.g.has(y)}function zx(h,y){h.g?h.g.add(y):h.h=y}function xW(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}function NW(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let y=h.i;for(const I of h.g.values())y=y.concat(I.D);return y}return b(h.i)}function OW(h,y){if(h.forEach&&"function"==typeof h.forEach)h.forEach(y,void 0);else if(c(h)||"string"==typeof h)Array.prototype.forEach.call(h,y,void 0);else for(var I=function n_e(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||"string"==typeof h){var y=[];h=h.length;for(var I=0;I<h;I++)y.push(I);return y}y=[],I=0;for(const T in h)y[I++]=T;return y}}}(h),T=function t_e(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(c(h)){for(var y=[],I=h.length,T=0;T<I;T++)y.push(h[T]);return y}for(T in y=[],I=0,h)y[I++]=h[T];return y}(h),G=T.length,te=0;te<G;te++)y.call(void 0,T[te],I&&I[te],h)}RW.prototype.cancel=function(){if(this.i=NW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var kW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ud(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ud){this.h=h.h,GC(this,h.j),this.o=h.o,this.g=h.g,qC(this,h.s),this.l=h.l;var y=h.i,I=new gy;I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),FW(this,I),this.m=h.m}else h&&(y=String(h).match(kW))?(this.h=!1,GC(this,y[1]||"",!0),this.o=fy(y[2]||""),this.g=fy(y[3]||"",!0),qC(this,y[4]),this.l=fy(y[5]||"",!0),FW(this,y[6]||"",!0),this.m=fy(y[7]||"")):(this.h=!1,this.i=new gy(null,this.h))}function Ua(h){return new ud(h)}function GC(h,y,I){h.j=I?fy(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function qC(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function FW(h,y,I){y instanceof gy?(h.i=y,function l_e(h,y){y&&!h.j&&(gl(h),h.i=null,h.g.forEach(function(I,T){var G=T.toLowerCase();T!=G&&(VW(this,T),BW(this,G,I))},h)),h.j=y}(h.i,h.h)):(I||(y=py(y,a_e)),h.i=new gy(y,h.h))}function xn(h,y,I){h.i.set(y,I)}function WC(h){return xn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function fy(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function py(h,y,I){return"string"==typeof h?(h=encodeURI(h).replace(y,i_e),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function i_e(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}ud.prototype.toString=function(){var h=[],y=this.j;y&&h.push(py(y,LW,!0),":");var I=this.g;return(I||"file"==y)&&(h.push("//"),(y=this.o)&&h.push(py(y,LW,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(py(I,"/"==I.charAt(0)?o_e:s_e,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",py(I,c_e)),h.join("")};var LW=/[#\/\?@]/g,s_e=/[#\?:]/g,o_e=/[#\?]/g,a_e=/[#\?@]/g,c_e=/#/g;function gy(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function gl(h){h.g||(h.g=new Map,h.h=0,h.i&&function r_e(h,y){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var T=h[I].indexOf("="),G=null;if(0<=T){var te=h[I].substring(0,T);G=h[I].substring(T+1)}else te=h[I];y(te,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}(h.i,function(y,I){h.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}function VW(h,y){gl(h),y=op(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function UW(h,y){return gl(h),y=op(h,y),h.g.has(y)}function BW(h,y,I){VW(h,y),0<I.length&&(h.i=null,h.g.set(op(h,y),b(I)),h.h+=I.length)}function op(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ml(h,y,I,T,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),T(I)}catch{}}function h_e(){this.g=new Kme}function f_e(h,y,I){const T=I||"";try{OW(h,function(G,te){let De=G;u(G)&&(De=Ox(G)),y.push(T+te+"="+encodeURIComponent(De))})}catch(G){throw y.push(T+"type="+encodeURIComponent("_badmap")),G}}function my(h){this.l=h.Ub||null,this.j=h.eb||!1}function KC(h,y){Ei.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function jW(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function _y(h){h.readyState=4,h.l=null,h.j=null,h.v=null,yy(h)}function yy(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function $W(h){let y="";return Ee(h,function(I,T){y+=T,y+=":",y+=I,y+="\r\n"}),y}function Gx(h,y,I){e:{for(T in I){var T=!1;break e}T=!0}T||(I=$W(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):xn(h,y,I))}function er(h){Ei.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=gy.prototype).add=function(h,y){gl(this),this.i=null,h=op(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(y),this.h+=1,this},n.forEach=function(h,y){gl(this),this.g.forEach(function(I,T){I.forEach(function(G){h.call(y,G,T,this)},this)},this)},n.na=function(){gl(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),I=[];for(let T=0;T<y.length;T++){const G=h[T];for(let te=0;te<G.length;te++)I.push(y[T])}return I},n.V=function(h){gl(this);let y=[];if("string"==typeof h)UW(this,h)&&(y=y.concat(this.g.get(op(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)y=y.concat(h[I])}return y},n.set=function(h,y){return gl(this),this.i=null,UW(this,h=op(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h&&0<(h=this.V(h)).length?String(h[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var I=0;I<y.length;I++){var T=y[I];const te=encodeURIComponent(String(T)),De=this.V(T);for(T=0;T<De.length;T++){var G=te;""!==De[T]&&(G+="="+encodeURIComponent(String(De[T]))),h.push(G)}}return this.i=h.join("&")},w(my,kx),my.prototype.g=function(){return new KC(this.l,this.j)},my.prototype.i=function(h){return function(){return h}}({}),w(KC,Ei),(n=KC.prototype).open=function(h,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,yy(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_y(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,yy(this)),this.g&&(this.readyState=3,yy(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jW(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?_y(this):yy(this),3==this.readyState&&jW(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,_y(this))},n.Qa=function(h){this.g&&(this.response=h,_y(this))},n.ga=function(){this.g&&_y(this)},n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var I=y.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=y.next();return h.join("\r\n")},Object.defineProperty(KC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),w(er,Ei);var p_e=/^https?$/i,g_e=["POST","PUT"];function HW(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,zW(h),QC(h)}function zW(h){h.A||(h.A=!0,Li(h,"complete"),Li(h,"error"))}function GW(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Ba(h)||2!=h.Z()))if(h.u&&4==Ba(h))fW(h.Ea,0,h);else if(Li(h,"readystatechange"),4==Ba(h)){h.h=!1;try{const De=h.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var T;if(T=0===De){var G=String(h.D).match(kW)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),T=!p_e.test(G?G.toLowerCase():"")}I=T}if(I)Li(h,"complete"),Li(h,"success");else{h.m=6;try{var te=2<Ba(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",zW(h)}}finally{QC(h)}}}function QC(h,y){if(h.g){qW(h);const I=h.g,T=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Li(h,"ready");try{I.onreadystatechange=T}catch{}}}function qW(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Ba(h){return h.g?h.g.readyState:0}function WW(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function vy(h,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||y}function KW(h){this.Aa=0,this.i=[],this.j=new dy,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vy("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vy("baseRetryDelayMs",5e3,h),this.cb=vy("retryDelaySeedMs",1e4,h),this.Wa=vy("forwardChannelMaxRetries",2,h),this.wa=vy("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new RW(h&&h.concurrentRequestLimit),this.Da=new h_e,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function qx(h){if(QW(h),3==h.G){var y=h.U++,I=Ua(h.I);if(xn(I,"SID",h.K),xn(I,"RID",y),xn(I,"TYPE","terminate"),Ey(h,I),(y=new pl(h,h.j,y)).L=2,y.v=WC(Ua(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=y.v,I=!0),I||(y.g=i8(y.j,null),y.g.ea(y.v)),y.F=Date.now(),zC(y)}n8(h)}function YC(h){h.g&&(Kx(h),h.g.cancel(),h.g=null)}function QW(h){YC(h),h.u&&(a.clearTimeout(h.u),h.u=null),XC(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function ZC(h){if(!PW(h.h)&&!h.s){h.s=!0;var y=h.Ga;ry||aW(),iy||(ry(),iy=!0),Tx.add(y,h),h.B=0}}function YW(h,y){var I;I=y?y.l:h.U++;const T=Ua(h.I);xn(T,"SID",h.K),xn(T,"RID",I),xn(T,"AID",h.T),Ey(h,T),h.m&&h.o&&Gx(T,h.m,h.o),I=new pl(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),y&&(h.i=y.D.concat(h.i)),y=ZW(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),zx(h.h,I),Bx(I,T,y)}function Ey(h,y){h.H&&Ee(h.H,function(I,T){xn(y,T,I)}),h.l&&OW({},function(I,T){xn(y,T,I)})}function ZW(h,y,I){I=Math.min(h.i.length,I);var T=h.l?_(h.l.Na,h.l,h):null;e:{var G=h.i;let te=-1;for(;;){const De=["count="+I];-1==te?0<I?(te=G[0].g,De.push("ofs="+te)):te=0:De.push("ofs="+te);let mn=!0;for(let ri=0;ri<I;ri++){let zt=G[ri].g;const Ii=G[ri].map;if(zt-=te,0>zt)te=Math.max(0,G[ri].g-100),mn=!1;else try{f_e(Ii,De,"req"+zt+"_")}catch{T&&T(Ii)}}if(mn){T=De.join("&");break e}}}return h=h.i.splice(0,I),y.D=h,T}function XW(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ry||aW(),iy||(ry(),iy=!0),Tx.add(y,h),h.v=0}}function Wx(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=uy(_(h.Fa,h),t8(h,h.v)),h.v++,0))}function Kx(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function JW(h){h.g=new pl(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var y=Ua(h.qa);xn(y,"RID","rpc"),xn(y,"SID",h.K),xn(y,"AID",h.T),xn(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&xn(y,"TO",h.ja),xn(y,"TYPE","xmlhttp"),Ey(h,y),h.m&&h.o&&Gx(y,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=WC(Ua(y)),I.m=null,I.P=!0,DW(I,h)}function XC(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function e8(h,y){var I=null;if(h.g==y){XC(h),Kx(h),h.g=null;var T=2}else{if(!Hx(h.h,y))return;I=y.D,xW(h.h,y),T=1}if(0!=h.G)if(y.o)if(1==T){I=y.m?y.m.length:0,y=Date.now()-y.F;var G=h.B;Li(T=jC(),new wW(T,I)),ZC(h)}else XW(h);else if(3==(G=y.s)||0==G&&0<y.X||!(1==T&&function __e(h,y){return!(MW(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=y.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=uy(_(h.Ga,h,y),t8(h,h.B)),h.B++,0)))}(h,y)||2==T&&Wx(h)))switch(I&&0<I.length&&(y=h.h,y.i=y.i.concat(I)),G){case 1:dd(h,5);break;case 4:dd(h,10);break;case 3:dd(h,6);break;default:dd(h,2)}}function t8(h,y){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*y}function dd(h,y){if(h.j.info("Error code "+y),2==y){var I=_(h.fb,h),T=h.Xa;const G=!T;T=new ud(T||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||GC(T,"https"),WC(T),G?function u_e(h,y){const I=new dy;if(a.Image){const T=new Image;T.onload=E(ml,I,"TestLoadImage: loaded",!0,y,T),T.onerror=E(ml,I,"TestLoadImage: error",!1,y,T),T.onabort=E(ml,I,"TestLoadImage: abort",!1,y,T),T.ontimeout=E(ml,I,"TestLoadImage: timeout",!1,y,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else y(!1)}(T.toString(),I):function d_e(h,y){new dy;const T=new AbortController,G=setTimeout(()=>{T.abort(),ml(0,0,!1,y)},1e4);fetch(h,{signal:T.signal}).then(te=>{clearTimeout(G),ml(0,0,!!te.ok,y)}).catch(()=>{clearTimeout(G),ml(0,0,!1,y)})}(T.toString(),I)}else Vi(2);h.G=0,h.l&&h.l.sa(y),n8(h),QW(h)}function n8(h){if(h.G=0,h.ka=[],h.l){const y=NW(h.h);(0!=y.length||0!=h.i.length)&&(D(h.ka,y),D(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function r8(h,y,I){var T=I instanceof ud?Ua(I):new ud(I);if(""!=T.g)y&&(T.g=y+"."+T.g),qC(T,T.s);else{var G=a.location;T=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var te=new ud(null);T&&GC(te,T),y&&(te.g=y),G&&qC(te,G),I&&(te.l=I),T=te}return y=h.ya,(I=h.D)&&y&&xn(T,I,y),xn(T,"VER",h.la),Ey(h,T),T}function i8(h,y,I){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new er(h.Ca&&!h.pa?new my({eb:I}):h.pa)).Ha(h.J),y}function s8(){}function JC(){}function gs(h,y){Ei.call(this),this.g=new KW(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!x(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,null!==(h=this.h)&&y in h&&y in(h=this.h)&&delete h[y]),this.j=new ap(this)}function o8(h){Fx.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const I in y){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,y=null!==y&&h in y?y[h]:void 0),this.data=y}else this.data=h}function a8(){Lx.call(this),this.status=1}function ap(h){this.g=h}(n=er.prototype).Ha=function(h){this.J=h},n.ea=function(h,y,I,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vx.g(),this.v=function _W(h){return h.h||(h.h=h.i())}(this.o?this.o:Vx),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(te){return void HW(this,te)}if(h=I||"",I=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var G in T)I.set(G,T[G]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const te of T.keys())I.set(te,T.get(te))}T=Array.from(I.keys()).find(te=>"content-type"==te.toLowerCase()),G=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(g_e,y,void 0))||T||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,De]of I)this.g.setRequestHeader(te,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qW(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){HW(this,te)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Li(this,"complete"),Li(this,"abort"),QC(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),QC(this,!0)),er.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?GW(this):this.bb())},n.bb=function(){GW(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ba(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&0==y.indexOf(h)&&(y=y.substring(h.length)),Wme(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=KW.prototype).la=8,n.G=1,n.connect=function(h,y,I,T){Vi(0),this.W=h,this.H=y||{},I&&void 0!==T&&(this.H.OSID=I,this.H.OAID=T),this.F=this.X,this.I=r8(this,null,this.W),ZC(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new pl(this,this.j,h);let te=this.o;if(this.S&&(te?(te=S(te),U(te,this.S)):te=this.S),null!==this.m||this.O||(G.H=te,te=null),this.P)e:{for(var y=0,I=0;I<this.i.length;I++){var T=this.i[I];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(y+=T)){y=I;break e}if(4096===y||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=ZW(this,G,y),xn(I=Ua(this.I),"RID",h),xn(I,"CVER",22),this.D&&xn(I,"X-HTTP-Session-Id",this.D),Ey(this,I),te&&(this.O?y="headers="+encodeURIComponent(String($W(te)))+"&"+y:this.m&&Gx(I,this.m,te)),zx(this.h,G),this.Ua&&xn(I,"TYPE","init"),this.P?(xn(I,"$req",y),xn(I,"SID","null"),G.T=!0,Bx(G,I,null)):Bx(G,I,y),this.G=2}}else 3==this.G&&(h?YW(this,h):0==this.i.length||PW(this.h)||YW(this))},n.Fa=function(){if(this.u=null,JW(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=uy(_(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vi(10),YC(this),JW(this))},n.Za=function(){null!=this.C&&(this.C=null,YC(this),Wx(this),Vi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Vi(2)):(this.j.info("Failed to ping google.com"),Vi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=s8.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},JC.prototype.g=function(h,y){return new gs(h,y)},w(gs,Ei),gs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gs.prototype.close=function(){qx(this.g)},gs.prototype.o=function(h){var y=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=Ox(h),h=I);y.i.push(new e_e(y.Ya++,h)),3==y.G&&ZC(y)},gs.prototype.N=function(){this.g.l=null,delete this.j,qx(this.g),delete this.g,gs.aa.N.call(this)},w(o8,Fx),w(a8,Lx),w(ap,s8),ap.prototype.ua=function(){Li(this.g,"a")},ap.prototype.ta=function(h){Li(this.g,new o8(h))},ap.prototype.sa=function(h){Li(this.g,new a8)},ap.prototype.ra=function(){Li(this.g,"b")},JC.prototype.createWebChannel=JC.prototype.g,gs.prototype.send=gs.prototype.o,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,d3=Sa.createWebChannelTransport=function(){return new JC},u3=Sa.getStatEventTarget=function(){return jC()},l3=Sa.Event=cd,JR=Sa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$C.NO_ERROR=0,$C.TIMEOUT=8,$C.HTTP_ERROR=6,Fw=Sa.ErrorCode=$C,CW.COMPLETE="complete",c3=Sa.EventType=CW,yW.EventType=cy,cy.OPEN="a",cy.CLOSE="b",cy.ERROR="c",cy.MESSAGE="d",Ei.prototype.listen=Ei.prototype.K,p_=Sa.WebChannel=yW,a3=Sa.FetchXmlHttpFactory=my,er.prototype.listenOnce=er.prototype.L,er.prototype.getLastError=er.prototype.Ka,er.prototype.getLastErrorCode=er.prototype.Ba,er.prototype.getStatus=er.prototype.Z,er.prototype.getResponseJson=er.prototype.Oa,er.prototype.getResponseText=er.prototype.oa,er.prototype.send=er.prototype.ea,er.prototype.setWithCredentials=er.prototype.Ha,o3=Sa.XhrIo=er}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});const h3="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let If="10.13.1";const Kc=new Bo.Vy("@firebase/firestore");function wf(){return Kc.logLevel}function _e(n,...e){if(Kc.logLevel<=Bo.$b.DEBUG){const t=e.map(eP);Kc.debug(`Firestore (${If}): ${n}`,...t)}}function ur(n,...e){if(Kc.logLevel<=Bo.$b.ERROR){const t=e.map(eP);Kc.error(`Firestore (${If}): ${n}`,...t)}}function Wi(n,...e){if(Kc.logLevel<=Bo.$b.WARN){const t=e.map(eP);Kc.warn(`Firestore (${If}): ${n}`,...t)}}function eP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ke(n="Unexpected state"){const e=`FIRESTORE (${If}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function He(n,e){n||ke()}function Te(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Yt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class f3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class che{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class lhe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class uhe{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,ae.A)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He("string"==typeof r.accessToken),new f3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(null===e||"string"==typeof e),new zr(e)}}class dhe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hhe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dhe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fhe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,_e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He("string"==typeof t.token),this.R=t.token,new p3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function phe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class g3{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=phe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ct(n,e){return n<e?-1:n>e?1:0}function Cf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function m3(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Vn(0,0))}static max(){return new qe(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class g_{constructor(e,t,r){void 0===t?t=0:t>e.length&&ke(),void 0===r?r=e.length-t:r>e.length-t&&ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===g_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof g_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pt extends g_{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const ghe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends g_{construct(e,t,r){return new Rn(e,t,r)}static isValidIdentifier(e){return ghe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ge(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ge(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new ge(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(t)}static emptyPath(){return new Rn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Pt.fromString(e))}static fromName(e){return new Re(Pt.fromString(e).popFirst(5))}static empty(){return new Re(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Pt(e.slice()))}}class bf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function tP(n){return n.fields.find(e=>2===e.kind)}function ju(n){return n.fields.filter(e=>2!==e.kind)}bf.UNKNOWN_ID=-1;class $u{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tf(0,fs.min())}}function _3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new fs(i,Re.empty(),e)}function y3(n){return new fs(n.readTime,n.key,-1)}class fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fs(qe.min(),Re.empty(),-1)}static max(){return new fs(qe.max(),Re.empty(),-1)}}function nP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Re.comparator(n.documentKey,e.documentKey),0!==t?t:ct(n.largestBatchId,e.largestBatchId))}const v3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Qc(n){return rP.apply(this,arguments)}function rP(){return(rP=(0,ae.A)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==v3)throw n;_e("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new q((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Lw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new m_(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=iP(r.target.error);this.V.reject(new m_(e,i))}}static open(e,t,r,i){try{return new Lw(t,e.transaction(i,r))}catch(s){throw new m_(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(_e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vhe(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===jo.S((0,Yt.ZQ)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _e("SimpleDb","Removing database:",e),Hu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Yt.zW)())return!1;if(jo.v())return!0;const e=(0,Yt.ZQ)(),t=jo.S(e),r=0<t&&t<10,i=I3(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.A)(function*(){return t.db||(_e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new m_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ge(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ge(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new m_(e,a))},s.onupgradeneeded=o=>{_e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{_e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ae.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=Lw.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),q.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,f="FirebaseError"!==u.name&&a<3;if(_e("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),s.close(),!f)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function I3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class yhe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hu(this.B.delete())}}class m_ extends ge{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yc(n){return"IndexedDbTransactionError"===n.name}class vhe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(_e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(_e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hu(r)}add(e){return _e("SimpleDb","ADD",this.store.name,e,e),Hu(this.store.add(e))}get(e){return Hu(this.store.get(e)).next(t=>(void 0===t&&(t=null),_e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _e("SimpleDb","DELETE",this.store.name,e),Hu(this.store.delete(e))}count(){return _e("SimpleDb","COUNT",this.store.name),Hu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new q((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){_e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=s=>{const o=iP(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new yhe(a),u=t(a.primaryKey,a.value,c);if(u instanceof q){const f=u.catch(m=>(c.done(),q.reject(m)));r.push(f)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hu(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=iP(r.target.error);t(i)}})}let w3=!1;function iP(n){const e=jo.S((0,Yt.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return w3||(w3=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ehe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;_e("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.A)(function*(){t.task=null;try{_e("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Yc(r)?_e("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Qc(r)}yield t.X(6e4)}))}}class Ihe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return q.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return _e("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(_e("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=y3(s);nP(o,r)>0&&(r=o)}),new fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ps=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function __(n){return null==n}function y_(n){return 0===n&&1/n==-1/0}function C3(n){return"number"==typeof n&&Number.isInteger(n)&&!y_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function gi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=b3(e)),e=whe(n.get(t),e);return b3(e)}function whe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function b3(n){return n+"\x01\x01"}function $o(n){const e=n.length;if(He(e>=2),2===e)return He("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ke(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:ke()}s=o+2}return new Pt(r)}const T3=["userId","batchId"];function Vw(n,e){return[n,gi(e)]}function D3(n,e,t){return[n,gi(e),t]}const Che={},bhe=["prefixPath","collectionGroup","readTime","documentId"],The=["prefixPath","collectionGroup","documentId"],Dhe=["collectionGroup","readTime","prefixPath","documentId"],Ahe=["canonicalId","targetId"],She=["targetId","path"],Rhe=["path","targetId"],Phe=["collectionId","parent"],Mhe=["indexId","uid"],xhe=["uid","sequenceNumber"],Nhe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ohe=["indexId","uid","orderedDocumentKey"],khe=["userId","collectionPath","documentId"],Fhe=["userId","collectionPath","largestBatchId"],Lhe=["userId","collectionGroup","largestBatchId"],A3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vhe=[...A3,"documentOverlays"],S3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],R3=S3,sP=[...R3,"indexConfiguration","indexState","indexEntries"],Uhe=sP,Bhe=[...sP,"globals"];class oP extends E3{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Or(n,e){const t=Te(n);return jo.F(t._e,e)}function P3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function x3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dn{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new Dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uw(this.root,e,this.comparator,!0)}}class Uw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ei.RED,this.left=i??ei.EMPTY,this.right=s??ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ei(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ei.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new N3(this.data.getIterator())}getIteratorFrom(e){return new N3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class N3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Df(n){return n.hasNext()?n.getNext():void 0}class Ki{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new Ki([])}unionWith(e){let t=new ln(Rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ki(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class O3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new O3("Invalid base64 string: "+s):s}}(e);return new Jn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const $he=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ra(n){if(He(!!n),"string"==typeof n){let e=0;const t=$he.exec(n);if(He(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pa(n){return"string"==typeof n?Jn.fromBase64String(n):Jn.fromUint8Array(n)}function Bw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jw(n){const e=n.mapValue.fields.__previous_value__;return Bw(e)?jw(e):e}function v_(n){const e=Ra(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class Hhe{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Xc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}const Jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$w={nullValue:"NULL_VALUE"};function el(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bw(n)?4:U3(n)?9007199254740991:Gw(n)?10:11:ke()}function Ho(n,e){if(n===e)return!0;const t=el(n);if(t!==el(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return v_(n).isEqual(v_(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ra(i.timestampValue),a=Ra(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Pa(n.bytesValue).isEqual(Pa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Un(i.geoPointValue.latitude)===Un(s.geoPointValue.latitude)&&Un(i.geoPointValue.longitude)===Un(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Un(i.integerValue)===Un(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Un(i.doubleValue),a=Un(s.doubleValue);return o===a?y_(o)===y_(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Cf(n.arrayValue.values||[],e.arrayValue.values||[],Ho);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(P3(o)!==P3(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!Ho(o[c],a[c])))return!1;return!0}(n,e);default:return ke()}var s}function E_(n,e){return void 0!==(n.values||[]).find(t=>Ho(t,e))}function tl(n,e){if(n===e)return 0;const t=el(n),r=el(e);if(t!==r)return ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Un(s.integerValue||s.doubleValue),c=Un(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return k3(n.timestampValue,e.timestampValue);case 4:return k3(v_(n),v_(e));case 5:return ct(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Pa(s),c=Pa(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const f=ct(a[u],c[u]);if(0!==f)return f}return ct(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ct(Un(s.latitude),Un(o.latitude));return 0!==a?a:ct(Un(s.longitude),Un(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return F3(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,f;const E=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,w=null===(c=(o.fields||{}).value)||void 0===c?void 0:c.arrayValue,b=ct((null===(u=E?.values)||void 0===u?void 0:u.length)||0,(null===(f=w?.values)||void 0===f?void 0:f.length)||0);return 0!==b?b:F3(E,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Jc.mapValue&&o===Jc.mapValue)return 0;if(s===Jc.mapValue)return 1;if(o===Jc.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const _=ct(c[m],f[m]);if(0!==_)return _;const E=tl(a[c[m]],u[f[m]]);if(0!==E)return E}return ct(c.length,f.length)}(n.mapValue,e.mapValue);default:throw ke()}}function k3(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ct(n,e);const t=Ra(n),r=Ra(e),i=ct(t.seconds,r.seconds);return 0!==i?i:ct(t.nanos,r.nanos)}function F3(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=tl(t[i],r[i]);if(s)return s}return ct(t.length,r.length)}function Af(n){return aP(n)}function aP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ra(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pa(n.bytesValue).toBase64():"referenceValue"in n?Re.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=aP(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${aP(t.fields[o])}`;return i+"}"}(n.mapValue):ke()}function zu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cP(n){return!!n&&"integerValue"in n}function I_(n){return!!n&&"arrayValue"in n}function L3(n){return!!n&&"nullValue"in n}function V3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zw(n){return!!n&&"mapValue"in n}function Gw(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function w_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=w_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=w_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function U3(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const B3={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function zhe(n){return"nullValue"in n?$w:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zu(Xc.empty(),Re.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Gw(n)?B3:{mapValue:{}}:ke()}function Ghe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zu(Xc.empty(),Re.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?B3:"mapValue"in n?Gw(n)?{mapValue:{}}:Jc:ke()}function j3(n,e){const t=tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $3(n,e){const t=tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=w_(t)}setAll(e){let t=Rn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=w_(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());zw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ho(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ti(w_(this.value))}}function H3(n){const e=[];return Zc(n.fields,(t,r)=>{const i=new Rn([t]);if(zw(r)){const s=H3(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ki(e)}class Pn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pn(e,0,qe.min(),qe.min(),qe.min(),ti.empty(),0)}static newFoundDocument(e,t,r,i){return new Pn(e,1,t,qe.min(),r,i,0)}static newNoDocument(e,t){return new Pn(e,2,t,qe.min(),qe.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,qe.min(),qe.min(),ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nl{constructor(e,t){this.position=e,this.inclusive=t}}function z3(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Re.comparator(Re.fromName(o.referenceValue),t.key):tl(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function G3(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ho(n.position[t],e.position[t]))return!1;return!0}class C_{constructor(e,t="asc"){this.field=e,this.dir=t}}function qhe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class q3{}class Mt extends q3{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Whe(e,t,r):"array-contains"===t?new Yhe(e,r):"in"===t?new X3(e,r):"not-in"===t?new Zhe(e,r):"array-contains-any"===t?new Xhe(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Khe(e,r):new Qhe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tl(t,this.value)):null!==t&&el(this.value)===el(t)&&this.matchesComparison(tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends q3{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new sn(e,t)}matches(e){return Sf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sf(n){return"and"===n.op}function lP(n){return"or"===n.op}function uP(n){return W3(n)&&Sf(n)}function W3(n){for(const e of n.filters)if(e instanceof sn)return!1;return!0}function dP(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Af(n.value);if(uP(n))return n.filters.map(e=>dP(e)).join(",");{const e=n.filters.map(t=>dP(t)).join(",");return`${n.op}(${e})`}}function K3(n,e){return n instanceof Mt?(r=n,(i=e)instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&Ho(r.value,i.value)):n instanceof sn?function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&K3(o,i.filters[a]),!0)}(n,e):void ke();var r,i}function Q3(n,e){const t=n.filters.concat(e);return sn.create(t,n.op)}function Y3(n){return n instanceof Mt?`${(t=n).field.canonicalString()} ${t.op} ${Af(t.value)}`:n instanceof sn?function(t){return t.op.toString()+" {"+t.getFilters().map(Y3).join(" ,")+"}"}(n):"Filter";var t}class Whe extends Mt{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class Khe extends Mt{constructor(e,t){super(e,"in",t),this.keys=Z3(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qhe extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=Z3(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Z3(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Re.fromName(r.referenceValue))}class Yhe extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return I_(t)&&E_(t.arrayValue,this.value)}}class X3 extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&E_(this.value.arrayValue,t)}}class Zhe extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(E_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!E_(this.value.arrayValue,t)}}class Xhe extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!I_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>E_(this.value.arrayValue,r))}}class Jhe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function hP(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Jhe(n,e,t,r,i,s,o)}function Gu(n){const e=Te(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dP(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),__(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Af(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Af(r)).join(",")),e.ue=t}return e.ue}function b_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qhe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!K3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!G3(n.startAt,e.startAt)&&G3(n.endAt,e.endAt)}function qw(n){return Re.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ww(n,e){return n.filters.filter(t=>t instanceof Mt&&t.field.isEqual(e))}function J3(n,e,t){let r=$w,i=!0;for(const s of Ww(n,e)){let o=$w,a=!0;switch(s.op){case"<":case"<=":o=zhe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=$w}j3({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];j3({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function eG(n,e,t){let r=Jc,i=!0;for(const s of Ww(n,e)){let o=Jc,a=!0;switch(s.op){case">=":case">":o=Ghe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Jc}$3({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];$3({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Ma{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function tG(n,e,t,r,i,s,o,a){return new Ma(n,e,t,r,i,s,o,a)}function Rf(n){return new Ma(n)}function nG(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fP(n){return null!==n.collectionGroup}function Pf(n){const e=Te(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ln(Rn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new C_(s,r))}),t.has(Rn.keyField().canonicalString())||e.ce.push(new C_(Rn.keyField(),r))}return e.ce}function mi(n){const e=Te(n);return e.le||(e.le=function iG(n,e){if("F"===n.limitType)return hP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new C_(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new nl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nl(n.startAt.position,n.startAt.inclusive):null;return hP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Pf(n))),e.le}function pP(n,e){const t=n.filters.concat([e]);return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kw(n,e,t){return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function T_(n,e){return b_(mi(n),mi(e))&&n.limitType===e.limitType}function sG(n){return`${Gu(mi(n))}|lt:${n.limitType}`}function Mf(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Y3(i)).join(", ")}]`),__(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Af(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Af(i)).join(",")),`Target(${r})`}(mi(n))}; limitType=${n.limitType})`}function D_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Pf(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=z3(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Pf(r),i)||r.endAt&&!function(o,a,c){const u=z3(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Pf(r),i)));var r,i}function oG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aG(n){return(e,t)=>{let r=!1;for(const i of Pf(n)){const s=efe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function efe(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?tl(c,u):ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return x3(this.inner)}size(){return this.innerSize}}const tfe=new Dn(Re.comparator);function Qi(){return tfe}const cG=new Dn(Re.comparator);function A_(...n){let e=cG;for(const t of n)e=e.insert(t.key,t);return e}function lG(n){let e=cG;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zo(){return S_()}function uG(){return S_()}function S_(){return new xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const nfe=new Dn(Re.comparator),rfe=new ln(Re.comparator);function vt(...n){let e=rfe;for(const t of n)e=e.add(t);return e}const ife=new ln(ct);function gP(){return ife}function mP(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:y_(e)?"-0":e}}function dG(n){return{integerValue:""+n}}function hG(n,e){return C3(e)?dG(e):mP(n,e)}class Qw{constructor(){this._=void 0}}function sfe(n,e,t){return n instanceof xf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bw(s)&&(s=jw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof qu?pG(n,e):n instanceof Wu?gG(n,e):function(i,s){const o=fG(i,s),a=mG(o)+mG(i.Pe);return cP(o)&&cP(i.Pe)?dG(a):mP(i.serializer,a)}(n,e)}function ofe(n,e,t){return n instanceof qu?pG(n,e):n instanceof Wu?gG(n,e):t}function fG(n,e){return n instanceof Nf?cP(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class xf extends Qw{}class qu extends Qw{constructor(e){super(),this.elements=e}}function pG(n,e){const t=_G(e);for(const r of n.elements)t.some(i=>Ho(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wu extends Qw{constructor(e){super(),this.elements=e}}function gG(n,e){let t=_G(e);for(const r of n.elements)t=t.filter(i=>!Ho(i,r));return{arrayValue:{values:t}}}class Nf extends Qw{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function mG(n){return Un(n.integerValue||n.doubleValue)}function _G(n){return I_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class R_{constructor(e,t){this.field=e,this.transform=t}}class cfe{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zw{}function yG(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new kf(n.key,Bn.none()):new Of(n.key,n.data,Bn.none());{const t=n.data,r=ti.empty();let i=new ln(Rn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Na(n.key,r,new Ki(i.toArray()),Bn.none())}}function lfe(n,e,t){n instanceof Of?function(i,s,o){const a=i.value.clone(),c=IG(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Na?function(i,s,o){if(!Yw(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=IG(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(EG(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function P_(n,e,t,r){return n instanceof Of?function(s,o,a,c){if(!Yw(s.precondition,o))return a;const u=s.value.clone(),f=wG(s.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Na?function(s,o,a,c){if(!Yw(s.precondition,o))return a;const u=wG(s.fieldTransforms,c,o),f=o.data;return f.setAll(EG(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Yw(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function ufe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=fG(r.transform,i||null);null!=s&&(null===t&&(t=ti.empty()),t.set(r.field,s))}return t||null}function vG(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Cf(r,i,(s,o)=>function afe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof qu&&i instanceof qu||r instanceof Wu&&i instanceof Wu?Cf(r.elements,i.elements,Ho):r instanceof Nf&&i instanceof Nf?Ho(r.Pe,i.Pe):r instanceof xf&&i instanceof xf);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Of extends Zw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Na extends Zw{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function IG(n,e,t){const r=new Map;He(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ofe(o,a,t[i]))}return r}function wG(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,sfe(s,o,e))}return r}class kf extends Zw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _P extends Zw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lfe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=P_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=P_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uG();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=yG(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(qe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vt())}isEqual(e){return this.batchId===e.batchId&&Cf(this.mutations,e.mutations,(t,r)=>vG(t,r))&&Cf(this.baseMutations,e.baseMutations,(t,r)=>vG(t,r))}}class vP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){He(e.mutations.length===r.length);let i=function(){return nfe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new vP(e,t,r,i)}}class EP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dfe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ir,Vt;function bG(n){switch(n){default:return ke();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function TG(n){if(void 0===n)return ur("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Ir.OK:return Z.OK;case Ir.CANCELLED:return Z.CANCELLED;case Ir.UNKNOWN:return Z.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return Z.INTERNAL;case Ir.UNAVAILABLE:return Z.UNAVAILABLE;case Ir.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ir.NOT_FOUND:return Z.NOT_FOUND;case Ir.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ir.ABORTED:return Z.ABORTED;case Ir.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ir.DATA_LOSS:return Z.DATA_LOSS;default:return ke()}}(Vt=Ir||(Ir={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";function DG(){return new TextEncoder}const hfe=new Bu([4294967295,4294967295],0);function AG(n){const e=DG().encode(n),t=new s3;return t.update(e),new Uint8Array(t.digest())}function SG(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bu([t,r],0),new Bu([i,s],0)]}class IP{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new M_(`Invalid padding: ${t}`);if(r<0)throw new M_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new M_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new M_(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Bu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Bu.fromNumber(r)));return 1===i.compare(hfe)&&(i=new Bu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=AG(e),[r,i]=SG(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new IP(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=AG(e),[r,i]=SG(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class M_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class x_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,N_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new x_(qe.min(),i,new Dn(ct),Qi(),vt())}}class N_{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new N_(r,t,vt(),vt(),vt())}}class Jw{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class RG{constructor(e,t){this.targetId=e,this.me=t}}class PG{constructor(e,t,r=Jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class MG{constructor(){this.fe=0,this.ge=NG(),this.pe=Jn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=vt(),t=vt(),r=vt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke()}}),new N_(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=NG()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ffe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qi(),this.qe=xG(),this.Qe=new Dn(ct)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(qw(s))if(0===r){const o=new Re(s.path);this.Ue(t,o,Pn.newNoDocument(o,qe.min()))}else He(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Pa(r).toUint8Array()}catch(c){if(c instanceof O3)return Wi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new IP(o,i,s)}catch(c){return Wi(c instanceof M_?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qw(a.target)){const c=new Re(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Pn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=vt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new x_(e,t,this.Qe,this.ke,r);return this.ke=Qi(),this.qe=xG(),this.Qe=new Dn(ct),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new MG,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ln(ct),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new MG),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xG(){return new Dn(Re.comparator)}function NG(){return new Dn(Re.comparator)}const pfe={asc:"ASCENDING",desc:"DESCENDING"},gfe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mfe={and:"AND",or:"OR"};class _fe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wP(n,e){return n.useProto3Json||__(e)?e:{value:e}}function Ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OG(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yfe(n,e){return Ff(n,e.toTimestamp())}function dr(n){return He(!!n),qe.fromTimestamp(function(t){const r=Ra(t);return new Vn(r.seconds,r.nanos)}(n))}function CP(n,e){return bP(n,e).canonicalString()}function bP(n,e){const t=(i=n,new Pt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function kG(n){const e=Pt.fromString(n);return He(qG(e)),e}function O_(n,e){return CP(n.databaseId,e.path)}function Go(n,e){const t=kG(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(VG(t))}function FG(n,e){return CP(n.databaseId,e)}function LG(n){const e=kG(n);return 4===e.length?Pt.emptyPath():VG(e)}function TP(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VG(n){return He(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function UG(n,e,t){return{name:O_(n,e),fields:t.value.mapValue.fields}}function BG(n,e,t){const r=Go(n,e.name),i=dr(e.updateTime),s=e.createTime?dr(e.createTime):qe.min(),o=new ti({mapValue:{fields:e.fields}}),a=Pn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function k_(n,e){let t;if(e instanceof Of)t={update:UG(n,e.key,e.value)};else if(e instanceof kf)t={delete:O_(n,e.key)};else if(e instanceof Na)t={update:UG(n,e.key,e.data),updateMask:Dfe(e.fieldMask)};else{if(!(e instanceof _P))return ke();t={verify:O_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof xf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:yfe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ke()),t;var s}function DP(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Bn.updateTime(dr(s.updateTime)):void 0!==s.exists?Bn.exists(s.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(He("REQUEST_TIME"===a.setToServerValue),c=new xf):"appendMissingElements"in a?c=new qu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Wu(a.removeAllFromArray.values||[]):"increment"in a?c=new Nf(o,a.increment):ke();const u=Rn.fromServerFormat(a.fieldPath);return new R_(u,c)}(n,i)):[];var s;if(e.update){const i=Go(n,e.update.name),s=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ki((e.updateMask.fieldPaths||[]).map(f=>Rn.fromServerFormat(f)));return new Na(i,s,o,t,r)}return new Of(i,s,t,r)}if(e.delete){const i=Go(n,e.delete);return new kf(i,t)}if(e.verify){const i=Go(n,e.verify);return new _P(i,t)}return ke()}function jG(n,e){return{documents:[FG(n,e.path)]}}function eC(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FG(n,i);const s=function(u){if(0!==u.length)return GG(sn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(f=>{return{field:rl((_=f).field),direction:Cfe(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=wP(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function HG(n){let e=LG(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){He(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const _=zG(m);return _ instanceof sn&&uP(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new C_(Lf((w=_).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,__(_)?null:_}(t.limit));let c=null;var m;t.startAt&&(c=new nl((m=t.startAt).values||[],!!m.before));let u=null;return t.endAt&&(u=function(m){return new nl(m.values||[],!m.before)}(t.endAt)),tG(e,i,o,s,a,"F",c,u)}function zG(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Lf(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lf(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lf(t.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lf(t.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(n):void 0!==n.fieldFilter?Mt.create(Lf((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return sn.create(t.compositeFilter.filters.map(r=>zG(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(t.compositeFilter.op))}(n):ke();var t}function Cfe(n){return pfe[n]}function bfe(n){return gfe[n]}function Tfe(n){return mfe[n]}function rl(n){return{fieldPath:n.canonicalString()}}function Lf(n){return Rn.fromServerFormat(n.fieldPath)}function GG(n){return n instanceof Mt?function(t){if("=="===t.op){if(V3(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(L3(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(V3(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(L3(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:bfe(t.op),value:t.value}}}(n):n instanceof sn?function(t){const r=t.getFilters().map(i=>GG(i));return 1===r.length?r[0]:{compositeFilter:{op:Tfe(t.op),filters:r}}}(n):ke()}function Dfe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qG(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Oa{constructor(e,t,r,i,s=qe.min(),o=qe.min(),a=Jn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WG{constructor(e){this.ct=e}}function KG(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:O_(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Ff(s,o.version.toTimestamp()),createTime:Ff(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ku(e.version)};else{if(!e.isUnknownDocument())return ke();r.unknownDocument={path:t.path.toArray(),version:Ku(e.version)}}var s,o;return r}function tC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ku(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qu(n){const e=new Vn(n.seconds,n.nanoseconds);return qe.fromTimestamp(e)}function Yu(n,e){const t=(e.baseMutations||[]).map(s=>DP(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>DP(n.ct,s)),i=Vn.fromMillis(e.localWriteTimeMs);return new yP(e.batchId,i,t,r)}function F_(n){const e=Qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qu(n.lastLimboFreeSnapshotVersion):qe.min();let r;return r=void 0!==n.query.documents?(He(1===(s=n.query).documents.length),mi(Rf(LG(s.documents[0])))):function(s){return mi(HG(s))}(n.query),new Oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Jn.fromBase64String(n.resumeToken));var s}function QG(n,e){const t=Ku(e.snapshotVersion),r=Ku(e.lastLimboFreeSnapshotVersion);let i;i=qw(e.target)?jG(n.ct,e.target):eC(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function AP(n){const e=HG({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Kw(e,e.limit,"L"):e}function SP(n,e){return new EP(e.largestBatchId,DP(n.ct,e.overlayMutation))}function YG(n,e){const t=e.path.lastSegment();return[n,gi(e.path.popLast()),t]}function ZG(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ku(r.readTime),documentKey:gi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Sfe{getBundleMetadata(e,t){return XG(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Qu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return XG(e).put({bundleId:(i=t).id,createTime:Ku(dr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return JG(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:AP(s.bundledQuery),readTime:Qu(s.readTime)};var s})}saveNamedQuery(e,t){return JG(e).put({name:(i=t).name,readTime:Ku(dr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function XG(n){return Or(n,"bundles")}function JG(n){return Or(n,"namedQueries")}class nC{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new nC(e,t.uid||"")}getOverlay(e,t){return L_(e).get(YG(this.userId,t)).next(r=>r?SP(this.serializer,r):null)}getOverlays(e,t){const r=zo();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new EP(t,o);i.push(this.ht(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(gi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(L_(e).j("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=zo(),s=gi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return L_(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=SP(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=zo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return L_(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,f)=>{const m=SP(this.serializer,u);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return L_(e).put(function(i,s,o){const[a,c,u]=YG(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:k_(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function L_(n){return Or(n,"documentOverlays")}class Rfe{Pt(e){return Or(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Jn.fromUint8Array(r):Jn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Zu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),y_(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Ra(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Pa(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?U3(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Gw(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ke()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Un(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Re.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Pfe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function e4(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Pfe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Zu.vt=new Zu;class Mfe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=e4(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=e4(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xfe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Nfe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class V_{constructor(){this.jt=new Mfe,this.Ht=new xfe(this.jt),this.Jt=new Nfe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Xu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xu(this.indexId,this.documentKey,this.arrayValue,r)}}function il(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=t4(n.arrayValue,e.arrayValue),0!==t?t:(t=t4(n.directionalValue,e.directionalValue),0!==t?t:Re.comparator(n.documentKey,e.documentKey)))}function t4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class n4{constructor(e){this.Xt=new ln((t,r)=>Rn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(He(e.collectionGroup===this.collectionId),this.nn)return!1;const t=tP(e);if(void 0!==t&&!this.sn(t))return!1;const r=ju(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new ln(Rn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new $u(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new $u(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new $u(r.field,"asc"===r.dir?0:1)));return new bf(bf.UNKNOWN_ID,this.collectionId,t,Tf.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function r4(n){var e,t;if(He(n instanceof Mt||n instanceof sn),n instanceof Mt){if(n instanceof X3){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Mt.create(n.field,"==",s)))||[];return sn.create(i,"or")}return n}const r=n.filters.map(i=>r4(i));return sn.create(r,n.op)}function Ofe(n){if(0===n.getFilters().length)return[];const e=MP(r4(n));return He(i4(e)),RP(e)||PP(e)?[e]:e.getFilters()}function RP(n){return n instanceof Mt}function PP(n){return n instanceof sn&&uP(n)}function i4(n){return RP(n)||PP(n)||function(t){if(t instanceof sn&&lP(t)){for(const r of t.getFilters())if(!RP(r)&&!PP(r))return!1;return!0}return!1}(n)}function MP(n){if(He(n instanceof Mt||n instanceof sn),n instanceof Mt)return n;if(1===n.filters.length)return MP(n.filters[0]);const e=n.filters.map(r=>MP(r));let t=sn.create(e,n.op);return t=rC(t),i4(t)?t:(He(t instanceof sn),He(Sf(t)),He(t.filters.length>1),t.filters.reduce((r,i)=>xP(r,i)))}function xP(n,e){let t;return He(n instanceof Mt||n instanceof sn),He(e instanceof Mt||e instanceof sn),t=n instanceof Mt?e instanceof Mt?sn.create([n,e],"and"):s4(n,e):e instanceof Mt?s4(e,n):function(i,s){if(He(i.filters.length>0&&s.filters.length>0),Sf(i)&&Sf(s))return Q3(i,s.getFilters());const o=lP(i)?i:s,a=lP(i)?s:i,c=o.filters.map(u=>xP(u,a));return sn.create(c,"or")}(n,e),rC(t)}function s4(n,e){if(Sf(e))return Q3(e,n.getFilters());{const t=e.filters.map(r=>xP(n,r));return sn.create(t,"or")}}function rC(n){if(He(n instanceof Mt||n instanceof sn),n instanceof Mt)return n;const e=n.getFilters();if(1===e.length)return rC(e[0]);if(W3(n))return n;const t=e.map(i=>rC(i)),r=[];return t.forEach(i=>{i instanceof Mt?r.push(i):i instanceof sn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:sn.create(r,n.op)}class kfe{constructor(){this.un=new NP}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(fs.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class NP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ln(Pt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(Pt.comparator)).toArray()}}const iC=new Uint8Array(0);class Ffe{constructor(e,t){this.databaseId=t,this.cn=new NP,this.ln=new xa(r=>Gu(r),(r,i)=>b_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:gi(i)};return o4(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[m3(t),""],!1,!0);return o4(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push($o(o.parent))}return r})}addFieldIndex(e,t){const r=U_(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Uf(e);return s.next(a=>{o.put(ZG(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=U_(e),i=Uf(e),s=Vf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=U_(e),r=Vf(e),i=Uf(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new n4(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Vf(e);let i=!0;const s=new Map;return q.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=vt();const a=[];return q.forEach(s,(c,u)=>{var V;_e("IndexedDbIndexManager",`Using index ${V=c,`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`} to execute ${Gu(t)}`);const f=function(V,J){const me=tP(J);if(void 0===me)return null;for(const Ee of Ww(V,me.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null}(u,c),m=function(V,J){const me=new Map;for(const Ee of ju(J))for(const F of Ww(V,Ee.fieldPath))switch(F.op){case"==":case"in":me.set(Ee.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return me.set(Ee.fieldPath.canonicalString(),F.value),Array.from(me.values())}return null}(u,c),_=function(V,J){const me=[];let Ee=!0;for(const F of ju(J)){const S=0===F.kind?J3(V,F.fieldPath,V.startAt):eG(V,F.fieldPath,V.startAt);me.push(S.value),Ee&&(Ee=S.inclusive)}return new nl(me,Ee)}(u,c),E=function(V,J){const me=[];let Ee=!0;for(const F of ju(J)){const S=0===F.kind?eG(V,F.fieldPath,V.endAt):J3(V,F.fieldPath,V.endAt);me.push(S.value),Ee&&(Ee=S.inclusive)}return new nl(me,Ee)}(u,c),w=this.In(c,u,_),b=this.In(c,u,E),D=this.Tn(c,u,m),k=this.En(c.indexId,f,w,_.inclusive,b,E.inclusive,D);return q.forEach(k,x=>r.G(x,t.limit).next(V=>{V.forEach(J=>{const me=Re.fromSegments(J.documentKey);o.has(me)||(o=o.add(me),a.push(me))})}))}).next(()=>a)}return q.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Ofe(sn.create(e.filters,"and")).map(r=>hP(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),f=[];for(let m=0;m<c;++m){const _=t?this.dn(t[m/u]):iC,E=this.An(e,_,r[m%u],i),w=this.Rn(e,_,s[m%u],o),b=a.map(D=>this.An(e,_,D,!0));f.push(...this.createRange(E,w,b))}return f}An(e,t,r,i){const s=new Xu(e,Re.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Xu(e,Re.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new n4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return q.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new ln(Rn.comparator),f=!1;for(const m of c.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:u=u.add(_.field));for(const m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new V_;for(const i of ju(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Zu.vt.It(s,o)}return r.zt()}dn(e){const t=new V_;return Zu.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new V_;return Zu.vt.It(zu(this.databaseId,t),r.Yt(function(s){const o=ju(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new V_);let s=0;for(const o of ju(e)){const a=r[s++];for(const c of i)if(this.fn(t,o.fieldPath)&&I_(a))i=this.gn(i,o,a);else{const u=c.Yt(o.kind);Zu.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new V_;c.seed(a.zt()),Zu.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Mt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=U_(e),i=Uf(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(f,m){const _=m?new Tf(m.sequenceNumber,new fs(Qu(m.readTime),new Re($o(m.documentKey)),m.largestBatchId)):Tf.empty(),E=f.fields.map(([w,b])=>new $u(Rn.fromServerFormat(w),b));return new bf(f.indexId,f.collectionGroup,E,_)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ct(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=U_(e),s=Uf(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>q.forEach(a,c=>s.put(ZG(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,c=>this.wn(e,i,c).next(u=>{const f=this.Sn(s,c);return u.isEqual(f)?q.resolve():this.bn(e,s,c,u,f)}))))})}Dn(e,t,r,i){return Vf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Vf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Vf(e);let s=new ln(il);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Xu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new ln(il);const i=this.Vn(t,e);if(null==i)return r;const s=tP(t);if(null!=s){const o=e.data.field(s.fieldPath);if(I_(o))for(const a of o.arrayValue.values||[])r=r.add(new Xu(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Xu(t.indexId,e.key,iC,i));return r}bn(e,t,r,i,s){_e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,m,_){const E=c.getIterator(),w=u.getIterator();let b=Df(E),D=Df(w);for(;b||D;){let k=!1,x=!1;if(b&&D){const V=f(b,D);V<0?x=!0:V>0&&(k=!0)}else null!=b?x=!0:k=!0;k?(m(D),D=Df(w)):x?(_(b),b=Df(E)):(b=Df(E),D=Df(w))}}(i,s,il,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),q.waitFor(o)}yn(e){let t=1;return Uf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>il(o,a)).filter((o,a,c)=>!a||0!==il(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=il(o,e),c=il(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,iC,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,iC,[]]))}return s}Cn(e,t){return il(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(a4)}getMinOffset(e,t){return q.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ke())).next(a4)}}function o4(n){return Or(n,"collectionParents")}function Vf(n){return Or(n,"indexEntries")}function U_(n){return Or(n,"indexConfiguration")}function Uf(n){return Or(n,"indexState")}function a4(n){He(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;nP(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const c4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _i{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new _i(e,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function l4(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(f,m,_)=>(a++,_.delete()));s.push(c.next(()=>{He(1===a)}));const u=[];for(const f of t.mutations){const m=D3(e,f.key.path,t.batchId);s.push(i.delete(m)),u.push(f.key)}return q.waitFor(s).next(()=>u)}function sC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ke();e=n.noDocument}return JSON.stringify(e).length}_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(41943040,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);class oC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){He(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new oC(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sl(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Bf(e),o=sl(e);return o.add({}).next(a=>{He("number"==typeof a);const c=new yP(a,t,r,i),u=function(E,w,b){const D=b.baseMutations.map(x=>k_(E.ct,x)),k=b.mutations.map(x=>k_(E.ct,x));return{userId:w,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:D,mutations:k}}(this.serializer,this.userId,c),f=[];let m=new ln((_,E)=>ct(_.canonicalString(),E.canonicalString()));for(const _ of i){const E=D3(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),f.push(o.put(u)),f.push(s.put(E,Che))}return m.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),q.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return sl(e).get(t).next(r=>r?(He(r.userId===this.userId),Yu(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return sl(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(He(a.batchId>=r),s=Yu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sl(e).U("userMutationsIndex",t).next(r=>r.map(i=>Yu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bf(e).J({range:i},(o,a,c)=>{const[u,f,m]=o,_=$o(f);if(u===this.userId&&t.path.isEqual(_))return sl(e).get(m).next(E=>{if(!E)throw ke();He(E.userId===this.userId),s.push(Yu(this.serializer,E))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(ct);const i=[];return t.forEach(s=>{const o=Vw(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Bf(e).J({range:a},(u,f,m)=>{const[_,E,w]=u,b=$o(E);_===this.userId&&s.path.isEqual(b)?r=r.add(w):m.done()});i.push(c)}),q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Vw(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ln(ct);return Bf(e).J({range:o},(c,u,f)=>{const[m,_,E]=c,w=$o(_);m===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(E)):f.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(sl(e).get(s).next(o=>{if(null===o)throw ke();He(o.userId===this.userId),r.push(Yu(this.serializer,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return l4(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Bf(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=$o(s[1]);i.push(c)}else a.done()}).next(()=>{He(0===i.length)})})}containsKey(e,t){return u4(e,this.userId,t)}Nn(e){return d4(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u4(n,e,t){const r=Vw(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Bf(n).J({range:s,H:!0},(a,c,u)=>{const[f,m,_]=a;f===e&&m===i&&(o=!0),u.done()}).next(()=>o)}function sl(n){return Or(n,"mutations")}function Bf(n){return Or(n,"documentMutations")}function d4(n){return Or(n,"mutationQueues")}class Ju{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ju(0)}static kn(){return new Ju(-1)}}class Lfe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Ju(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>qe.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jf(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(He(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return jf(e).J((o,a)=>{const c=F_(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,t){return jf(e).J((r,i)=>{const s=F_(i);t(s)})}qn(e){return h4(e).get("targetGlobalKey").next(t=>(He(null!==t),t))}Qn(e,t){return h4(e).put("targetGlobalKey",t)}Kn(e,t){return jf(e).put(QG(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return jf(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=F_(a);b_(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ol(e);return t.forEach(o=>{const a=gi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=ol(e);return q.forEach(t,s=>{const o=gi(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ol(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ol(e);let s=vt();return i.J({range:r,H:!0},(o,a,c)=>{const u=$o(o[1]),f=new Re(u);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=gi(t.path),i=IDBKeyRange.bound([r],[m3(r)],!1,!0);let s=0;return ol(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return jf(e).get(t).next(r=>r?F_(r):null)}}function jf(n){return Or(n,"targets")}function h4(n){return Or(n,"targetGlobal")}function ol(n){return Or(n,"targetDocuments")}function f4([n,e],[t,r]){const i=ct(n,t);return 0===i?ct(e,r):i}class Vfe{constructor(e){this.Un=e,this.buffer=new ln(f4),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();f4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;_e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Yc(r)?_e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Qc(r)}yield t.Hn(3e5)}))}}class Ufe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(ps.oe);const r=new Vfe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(c4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c4):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),wf()<=Bo.$b.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(u-c)+`ms\nTotal Duration: ${u-f}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class Bfe{constructor(e,t){this.db=e,this.garbageCollector=function g4(n,e){return new Ufe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return aC(e,r)}removeReference(e,t,r){return aC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aC(e,t)}nr(e,t){return function(i,s){let o=!1;return d4(i).Y(a=>u4(i,a,s).next(c=>(c&&(o=!0),q.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const c=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,qe.min()),ol(e).delete([0,gi(o.path)])))});i.push(c)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aC(e,t)}tr(e,t){const r=ol(e);let i,s=ps.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==ps.oe&&t(new Re($o(i)),s),s=u,i=c):s=ps.oe}).next(()=>{s!==ps.oe&&t(new Re($o(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aC(n,e){return ol(n).put((i=n.currentSequenceNumber,{targetId:0,path:gi(e.path),sequenceNumber:i}));var i}class m4{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jfe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ed(e).put(r)}removeEntry(e,t,r){return ed(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tC(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return ed(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(B_(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return ed(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(B_(t))},(i,s)=>{r={document:this.ir(t,s),size:sC(s)}}).next(()=>r)}getEntries(e,t){let r=Qi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Qi(),i=new Dn(Re.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,sC(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return q.resolve();let i=new ln(E4);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(B_(i.first()),B_(i.last())),o=i.getIterator();let a=o.getNext();return ed(e).J({index:"documentKeyIndex",range:s},(c,u,f)=>{const m=Re.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&E4(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?f.$(B_(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),tC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ed(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let f=Qi();for(const m of u){const _=this.ir(Re.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(D_(t,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Qi();const o=v4(t,r),a=v4(t,fs.max());return ed(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,f)=>{const m=this.ir(Re.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new $fe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return y4(e).get("remoteDocumentGlobalKey").next(t=>(He(!!t),t))}rr(e,t){return y4(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function Afe(n,e){let t;if(e.document)t=BG(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Re.fromSegments(e.noDocument.path),i=Qu(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ke();{const r=Re.fromSegments(e.unknownDocument.path),i=Qu(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Vn(i[0],i[1]);return qe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(qe.min()))return r}return Pn.newInvalidDocument(e)}}function _4(n){return new jfe(n)}class $fe extends m4{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new xa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ln((s,o)=>ct(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=KG(this.cr.serializer,o);i=i.add(s.path.popLast());const u=sC(c);r+=u-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=KG(this.cr.serializer,o.convertToNoDocument(qe.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function y4(n){return Or(n,"remoteDocumentGlobal")}function ed(n){return Or(n,"remoteDocumentsV14")}function B_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function v4(n,e){const t=e.documentKey.path.toArray();return[n,tC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function E4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ct(t[s],r[s]),i)return i;return i=ct(t.length,r.length),i||(i=ct(t[t.length-2],r[r.length-2]),i||ct(t[t.length-1],r[r.length-1]))}class Hfe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class I4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&P_(r.mutation,i,Ki.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=vt()){const i=zo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=A_();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=zo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,vt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Qi();const o=S_(),a=S_();return t.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(void 0===f||f.mutation instanceof Na)?s=s.insert(u.key,u):void 0!==f?(o.set(u.key,f.mutation.getFieldMask()),P_(f.mutation,u,f.mutation.getFieldMask(),Vn.now())):o.set(u.key,Ki.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new Hfe(f,null!==(m=o.get(u))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=S_();let i=new Dn((o,a)=>o-a),s=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let f=r.get(c)||Ki.empty();f=a.applyToLocalView(u,f),r.set(c,f);const m=(i.get(a.batchId)||vt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,m=uG();f.forEach(_=>{if(!s.has(_)){const E=yG(t.get(_),r.get(_));null!==E&&m.set(_,E),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Re.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(zo());let a=-1,c=s;return o.next(u=>q.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{c=c.insert(f,_)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,vt())).next(f=>({batchId:a,changes:lG(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(r=>{let i=A_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=A_();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,c=>{const u=(m=t,_=c.child(s),new Ma(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const f=u.getKey();null===o.get(f)&&(o=o.insert(f,Pn.newInvalidDocument(f)))});let a=A_();return o.forEach((c,u)=>{const f=s.get(c);void 0!==f&&P_(f.mutation,u,Ki.empty(),Vn.now()),D_(t,u)&&(a=a.insert(c,u))}),a})}}class zfe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:dr(i.createTime)}),q.resolve();var i}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:AP(i.bundledQuery),readTime:dr(i.readTime)}),q.resolve();var i}}class Gfe{constructor(){this.overlays=new Dn(Re.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zo();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=zo(),s=t.length+1,o=new Re(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Dn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);null===f&&(f=zo(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=zo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new EP(t,r));let s=this.Ir.get(t);void 0===s&&(s=vt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class qfe{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class OP{constructor(){this.Tr=new ln(Gr.Er),this.dr=new ln(Gr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Gr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Re(new Pt([])),r=new Gr(t,e),i=new Gr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Re(new Pt([])),r=new Gr(t,e),i=new Gr(t,e+1);let s=vt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Gr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Re.comparator(e.key,t.key)||ct(e.wr,t.wr)}static Ar(e,t){return ct(e.wr,t.wr)||Re.comparator(e.key,t.key)}}class Wfe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ln(Gr.Er)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new yP(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Gr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),i=new Gr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(ct);return t.forEach(i=>{const s=new Gr(i,0),o=new Gr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Re.isDocumentKey(s)||(s=s.child(""));const o=new Gr(new Re(s),0);let a=new ln(ct);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){He(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return q.forEach(t.mutations,i=>{const s=new Gr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Gr(t,0),i=this.br.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kfe{constructor(e){this.Mr=e,this.docs=new Dn(Re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=Qi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Qi();const o=t.path,a=new Re(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||nP(y3(f),r)<=0||(i.has(f.key)||D_(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ke()}Or(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Qfe(this)}getSize(e){return q.resolve(this.size)}}class Qfe extends m4{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Yfe{constructor(e){this.persistence=e,this.Nr=new xa(t=>Gu(t),b_),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new OP,this.targetCount=0,this.kr=Ju.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ju(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}}class kP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ps(0),this.Kr=!1,this.Kr=!0,this.$r=new qfe,this.referenceDelegate=e(this),this.Ur=new Yfe(this),this.indexManager=new kfe,this.remoteDocumentCache=new Kfe(r=>this.referenceDelegate.Wr(r)),this.serializer=new WG(t),this.Gr=new zfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gfe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Wfe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new Zfe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Zfe extends E3{constructor(e){super(),this.currentSequenceNumber=e}}class cC{constructor(e){this.persistence=e,this.Jr=new OP,this.Yr=null}static Zr(e){return new cC(e)}get Xr(){if(this.Yr)return this.Yr;throw ke()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=Re.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,qe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Xfe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Lw("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T3,{unique:!0}),c.createObjectStore("documentMutations"),w4(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),w4(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T3,{unique:!0});const m=u.store("mutations"),_=f.map(E=>m.put(E));return q.waitFor(_)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:khe});u.createIndex("collectionPathOverlayIndex",Fhe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Lhe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:bhe});u.createIndex("documentKeyIndex",The),u.createIndex("collectionGroupIndex",Dhe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Mhe}).createIndex("sequenceNumberIndex",xhe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Nhe}).createIndex("documentKeyIndex",Ohe,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=sC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>q.forEach(a,c=>{He(c.userId===s.userId);const u=Yu(this.serializer,c);return l4(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new Pt(o),u=[0,gi(c)];s.push(t.get(u).next(f=>f?q.resolve():t.put({targetId:0,path:gi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>q.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Phe});const r=t.store("collectionParents"),i=new NP,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:gi(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Pt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const f=$o(a);return s(f.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=F_(i),o=QG(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(m=o,m.document?new Re(Pt.fromString(m.document.name).popFirst(5)):m.noDocument?Re.fromSegments(m.noDocument.path):m.unknownDocument?Re.fromSegments(m.unknownDocument.path):ke()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(u))}).next(()=>q.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=_4(this.serializer),s=new kP(cC.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let f=null!==(u=a.get(c.userId))&&void 0!==u?u:vt();Yu(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),q.forEach(a,(c,u)=>{const f=new zr(u),m=nC.lt(this.serializer,f),_=s.getIndexManager(f),E=oC.lt(f,this.serializer,_,s.referenceDelegate);return new I4(i,E,m,_).recalculateAndSaveOverlaysForDocumentKeys(new oP(t,ps.oe),c).next()})})}}function w4(n){n.createObjectStore("targetDocuments",{keyPath:She}).createIndex("documentTargetsIndex",Rhe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ahe,{unique:!0}),n.createObjectStore("targetGlobal")}const FP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class LP{constructor(e,t,r,i,s,o,a,c,u,f,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=f,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!LP.D())throw new ge(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bfe(this,i),this.Ai=t+"main",this.serializer=new WG(c),this.Ri=new jo(this.Ai,this.hi,new Xfe(this.serializer)),this.$r=new Rfe,this.Ur=new Lfe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_4(this.serializer),this.Gr=new Sfe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===f&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(Z.FAILED_PRECONDITION,FP);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ps(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,ae.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,ae.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ae.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Yc(e))return _e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return j_(e).get("owner").next(t=>q.resolve(this.vi(t)))}Ci(e){return uC(e).delete(this.clientId)}Fi(){var e=this;return(0,ae.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Or(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return q.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?q.resolve(!0):j_(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ge(Z.FAILED_PRECONDITION,FP);return!1}}return!(!this.networkEnabled||!this.inForeground)||uC(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&_e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new oP(t,ps.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>uC(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return oC.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ffe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nC.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){_e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(c=this.hi)?Bhe:16===c?Uhe:15===c?sP:14===c?R3:13===c?S3:12===c?Vhe:11===c?A3:void ke();var c;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new oP(a,this.Qr?this.Qr.next():ps.oe),"readwrite-primary"===t?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ge(Z.FAILED_PRECONDITION,v3);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return j_(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(Z.FAILED_PRECONDITION,FP)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return j_(e).put("owner",t)}static D(){return jo.D()}bi(e){const t=j_(e);return t.get("owner").next(r=>this.vi(r)?(_e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Yt.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return _e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function j_(n){return Or(n,"owner")}function uC(n){return Or(n,"clientMetadata")}function VP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class UP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=vt(),i=vt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new UP(e,t.fromCache,r,i)}}class Jfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class C4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Yt.nr)()?8:I3((0,Yt.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Jfe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(wf()<=Bo.$b.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Mf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(wf()<=Bo.$b.DEBUG&&_e("QueryEngine","Query:",Mf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(wf()<=Bo.$b.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Mf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(t))):q.resolve())}Yi(e,t){if(nG(t))return q.resolve(null);let r=mi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Kw(t,null,"F"),r=mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=vt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,Kw(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return nG(t)||i.isEqual(qe.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?q.resolve(null):(wf()<=Bo.$b.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mf(t)),this.rs(e,o,t,_3(i,-1)).next(a=>a))})}ts(e,t){let r=new ln(aG(e));return t.forEach((i,s)=>{D_(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return wf()<=Bo.$b.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Mf(t)),this.Ji.getDocumentsMatchingQuery(e,t,fs.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class epe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Dn(ct),this._s=new xa(s=>Gu(s),b_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function b4(n,e,t,r){return new epe(n,e,t,r)}function T4(n,e){return BP.apply(this,arguments)}function BP(){return(BP=(0,ae.A)(function*(n,e){const t=Te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=vt();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function D4(n){const e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function A4(n,e,t){let r=vt(),i=vt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Qi();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(qe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):_e("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function rpe(n,e){const t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $f(n,e){const t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Hf(n,e,t){return jP.apply(this,arguments)}function jP(){return(jP=(0,ae.A)(function*(n,e,t){const r=Te(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Yc(o))throw o;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function dC(n,e,t){const r=Te(n);let i=qe.min(),s=vt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const m=Te(c),_=m._s.get(f);return void 0!==_?q.resolve(m.os.get(_)):m.Ur.getTargetData(u,f)}(r,o,mi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:qe.min(),t?s:vt())).next(a=>(P4(r,oG(e),a),{documents:a,Ts:s})))}function S4(n,e){const t=Te(n),r=Te(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function R4(n,e){const t=Te(n),r=t.us.get(e)||qe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,_3(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(P4(t,e,i),i))}function P4(n,e,t){let r=n.us.get(e)||qe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function $P(){return($P=(0,ae.A)(function*(n,e,t,r){const i=Te(n);let s=vt(),o=Qi();for(const u of t){const f=e.Es(u.metadata.name);u.document&&(s=s.add(f));const m=e.ds(u);m.setReadTime(e.As(u.metadata.readTime)),o=o.insert(f,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield $f(i,(f=r,mi(Rf(Pt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>A4(u,a,o).next(f=>(a.apply(u),f)).next(f=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,f.Ps,f.Is)).next(()=>f.Ps)))})).apply(this,arguments)}function spe(n,e){return HP.apply(this,arguments)}function HP(){return(HP=(0,ae.A)(function*(n,e,t=vt()){const r=yield $f(n,mi(AP(e.bundledQuery))),i=Te(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=dr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Jn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function M4(n,e){return`firestore_clients_${n}_${e}`}function x4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zP(n,e){return`firestore_targets_${n}_${e}`}class hC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ge(i.error.code,i.error.message))),o?new hC(e,t,i.state,s):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ge(r.error.code,r.error.message))),s?new $_(e,r.state,i):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=gP();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=C3(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new fC(e,s):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GP{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GP(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qP{constructor(){this.activeTargetIds=gP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WP{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Dn(ct),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=M4(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new qP),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(M4(e.persistenceKey,i));if(s){const o=fC.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(zP(this.persistenceKey,e));if(r){const i=$_.Rs(e,r);i&&(t=i.state)}}return this.Ks.fs(e),this.Ns(),t}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zP(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _e("SharedClientState","READ",e,t),t}setItem(e,t){_e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(_e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ae.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ps.oe;if(null!=o)try{const c=JSON.parse(o);He("number"==typeof c),a=c}catch(c){ur("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ps.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new hC(this.currentUser,e,t,r),s=x4(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=x4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=zP(this.persistenceKey,e),s=new $_(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return fC.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return hC.Rs(new zr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return $_.Rs(i,t)}Ls(e){return GP.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,ae.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);_e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=gP();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class N4{constructor(){this.so=new qP,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ope{_o(e){}shutdown(){}}class O4{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pC=null;function KP(){return null===pC?pC=268435456+Math.round(2147483648*Math.random()):pC++,"0x"+pC.toString(16)}const ape={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cpe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const yi="WebChannelConnection";class lpe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=KP(),c=this.xo(t,r.toUriEncodedString());_e("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,c,u,i).then(f=>(_e("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Wi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+If,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${ape[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=KP();return new Promise((o,a)=>{const c=new o3;c.setWithCredentials(!0),c.listenOnce(c3.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fw.NO_ERROR:const f=c.getResponseJson();_e(yi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Fw.TIMEOUT:_e(yi,`RPC '${e}' ${s} timed out`),a(new ge(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Fw.HTTP_ERROR:const m=c.getStatus();if(_e(yi,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_?.error;if(E&&E.status&&E.message){const w=function(D){const k=D.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(k)>=0?k:Z.UNKNOWN}(E.status);a(new ge(w,E.message))}else a(new ge(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ge(Z.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{_e(yi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);_e(yi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=KP(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=d3(),a=u3(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new a3({})),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");_e(yi,`Creating RPC '${e}' stream ${i}: ${f}`,c);const m=o.createWebChannel(f,c);let _=!1,E=!1;const w=new cpe({Io:D=>{E?_e(yi,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(_e(yi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),_e(yi,`RPC '${e}' stream ${i} sending:`,D),m.send(D))},To:()=>m.close()}),b=(D,k,x)=>{D.listen(k,V=>{try{x(V)}catch(J){setTimeout(()=>{throw J},0)}})};return b(m,p_.EventType.OPEN,()=>{E||(_e(yi,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),b(m,p_.EventType.CLOSE,()=>{E||(E=!0,_e(yi,`RPC '${e}' stream ${i} transport closed`),w.So())}),b(m,p_.EventType.ERROR,D=>{E||(E=!0,Wi(yi,`RPC '${e}' stream ${i} transport errored:`,D),w.So(new ge(Z.UNAVAILABLE,"The operation could not be completed")))}),b(m,p_.EventType.MESSAGE,D=>{var k;if(!E){const x=D.data[0];He(!!x);const J=x.error||(null===(k=x[0])||void 0===k?void 0:k.error);if(J){_e(yi,`RPC '${e}' stream ${i} received error:`,J);const me=J.status;let Ee=function(O){const U=Ir[O];if(void 0!==U)return TG(U)}(me),F=J.message;void 0===Ee&&(Ee=Z.INTERNAL,F="Unknown error status: "+me+" with message "+J.message),E=!0,w.So(new ge(Ee,F)),m.close()}else _e(yi,`RPC '${e}' stream ${i} received:`,x),w.bo(x)}}),b(a,l3.STAT_EVENT,D=>{D.stat===JR.PROXY?_e(yi,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===JR.NOPROXY&&_e(yi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function k4(){return typeof window<"u"?window:null}function gC(){return typeof document<"u"?document:null}function H_(n){return new _fe(n,!0)}class QP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class F4{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new QP(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ae.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ae.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,ae.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ge(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,ae.A)(function*(){e.state=0,e.start()}))}I_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class upe extends F4{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function Efe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:ke(),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(He(void 0===f||"string"==typeof f),Jn.fromBase64String(f||"")):(He(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Jn.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=void 0===u.code?Z.UNKNOWN:TG(u.code);return new ge(f,u.message||"")}(o);t=new PG(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Go(n,r.document.name),s=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):qe.min(),a=new ti({mapValue:{fields:r.document.fields}}),c=Pn.newFoundDocument(i,s,o,a);t=new Jw(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Go(n,r.document),s=r.readTime?dr(r.readTime):qe.min(),o=Pn.newNoDocument(i,s);t=new Jw([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Go(n,r.document);t=new Jw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ke();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new dfe(i,s);t=new RG(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return qe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?qe.min():o.readTime?dr(o.readTime):qe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=TP(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=qw(c)?{documents:jG(s,c)}:{query:eC(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OG(s,o.resumeToken);const u=wP(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(qe.min())>0){a.readTime=Ff(s,o.snapshotVersion.toTimestamp());const u=wP(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function wfe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=TP(this.serializer),t.removeTarget=e,this.a_(t)}}class dpe extends F4{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function Ife(n,e){return n&&n.length>0?(He(void 0!==e),n.map(t=>function(i,s){let o=dr(i.updateTime?i.updateTime:s);return o.isEqual(qe.min())&&(o=dr(s)),new cfe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=TP(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>k_(this.serializer,r))};this.a_(t)}}class hpe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,bP(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(Z.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,bP(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fpe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ur(t),this.D_=!1):_e("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ppe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,ae.A)(function*(){var c;al(o)&&(_e("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ae.A)(function*(f){const m=Te(f);m.L_.add(4),yield zf(m),m.q_.set("Unknown"),m.L_.delete(4),yield z_(m)}),function u(f){return c.apply(this,arguments)})(o))}))}),this.q_=new fpe(r,i)}}function z_(n){return YP.apply(this,arguments)}function YP(){return(YP=(0,ae.A)(function*(n){if(al(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function zf(n){return ZP.apply(this,arguments)}function ZP(){return(ZP=(0,ae.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function mC(n,e){const t=Te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),eM(t)?JP(t):Wf(t).r_()&&XP(t,e))}function Gf(n,e){const t=Te(n),r=Wf(t);t.N_.delete(e),r.r_()&&L4(t,e),0===t.N_.size&&(r.r_()?r.o_():al(t)&&t.q_.set("Unknown"))}function XP(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wf(n).A_(e)}function L4(n,e){n.Q_.xe(e),Wf(n).R_(e)}function JP(n){n.Q_=new ffe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Wf(n).start(),n.q_.v_()}function eM(n){return al(n)&&!Wf(n).n_()&&n.N_.size>0}function al(n){return 0===Te(n).L_.size}function V4(n){n.Q_=void 0}function gpe(n){return tM.apply(this,arguments)}function tM(){return(tM=(0,ae.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function mpe(n){return nM.apply(this,arguments)}function nM(){return(nM=(0,ae.A)(function*(n){n.N_.forEach((e,t)=>{XP(n,e)})})).apply(this,arguments)}function _pe(n,e){return rM.apply(this,arguments)}function rM(){return(rM=(0,ae.A)(function*(n,e){V4(n),eM(n)?(n.q_.M_(e),JP(n)):n.q_.set("Unknown")})).apply(this,arguments)}function ype(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,ae.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof PG&&2===e.state&&e.cause)try{yield(r=(0,ae.A)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _C(n,r)}else if(e instanceof Jw?n.Q_.Ke(e):e instanceof RG?n.Q_.He(e):n.Q_.We(e),!t.isEqual(qe.min()))try{const r=yield D4(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.N_.get(u);f&&s.N_.set(u,f.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const f=s.N_.get(c);if(!f)return;s.N_.set(c,f.withResumeToken(Jn.EMPTY_BYTE_STRING,f.snapshotVersion)),L4(s,c);const m=new Oa(f.target,c,u,f.sequenceNumber);XP(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){_e("RemoteStore","Failed to raise snapshot:",r),yield _C(n,r)}var r}),iM.apply(this,arguments)}function _C(n,e,t){return sM.apply(this,arguments)}function sM(){return(sM=(0,ae.A)(function*(n,e,t){if(!Yc(e))throw e;n.L_.add(1),yield zf(n),n.q_.set("Offline"),t||(t=()=>D4(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.A)(function*(){_e("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield z_(n)}))})).apply(this,arguments)}function U4(n,e){return e().catch(t=>_C(n,t,e))}function qf(n){return oM.apply(this,arguments)}function oM(){return(oM=(0,ae.A)(function*(n){const e=Te(n),t=cl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vpe(e);)try{const i=yield rpe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,Epe(e,i)}catch(i){yield _C(e,i)}B4(e)&&j4(e)})).apply(this,arguments)}function vpe(n){return al(n)&&n.O_.length<10}function Epe(n,e){n.O_.push(e);const t=cl(n);t.r_()&&t.V_&&t.m_(e.mutations)}function B4(n){return al(n)&&!cl(n).n_()&&n.O_.length>0}function j4(n){cl(n).start()}function Ipe(n){return aM.apply(this,arguments)}function aM(){return(aM=(0,ae.A)(function*(n){cl(n).p_()})).apply(this,arguments)}function wpe(n){return cM.apply(this,arguments)}function cM(){return(cM=(0,ae.A)(function*(n){const e=cl(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function Cpe(n,e,t){return lM.apply(this,arguments)}function lM(){return(lM=(0,ae.A)(function*(n,e,t){const r=n.O_.shift(),i=vP.from(r,e,t);yield U4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qf(n)})).apply(this,arguments)}function bpe(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,ae.A)(function*(n,e){var t;e&&cl(n).V_&&(yield(t=(0,ae.A)(function*(i,s){if(bG(a=s.code)&&a!==Z.ABORTED){const o=i.O_.shift();cl(i).s_(),yield U4(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield qf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),B4(n)&&j4(n)}),uM.apply(this,arguments)}function $4(n,e){return dM.apply(this,arguments)}function dM(){return(dM=(0,ae.A)(function*(n,e){const t=Te(n);t.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const r=al(t);t.L_.add(3),yield zf(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield z_(t)})).apply(this,arguments)}function hM(n,e){return fM.apply(this,arguments)}function fM(){return(fM=(0,ae.A)(function*(n,e){const t=Te(n);e?(t.L_.delete(2),yield z_(t)):e||(t.L_.add(2),yield zf(t),t.q_.set("Unknown"))})).apply(this,arguments)}function Wf(n){return n.K_||(n.K_=function(t,r,i){const s=Te(t);return s.w_(),new upe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:gpe.bind(null,n),Ro:mpe.bind(null,n),mo:_pe.bind(null,n),d_:ype.bind(null,n)}),n.B_.push(function(){var e=(0,ae.A)(function*(t){t?(n.K_.s_(),eM(n)?JP(n):n.q_.set("Unknown")):(yield n.K_.stop(),V4(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function cl(n){return n.U_||(n.U_=function(t,r,i){const s=Te(t);return s.w_(),new dpe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ipe.bind(null,n),mo:bpe.bind(null,n),f_:wpe.bind(null,n),g_:Cpe.bind(null,n)}),n.B_.push(function(){var e=(0,ae.A)(function*(t){t?(n.U_.s_(),yield qf(n)):(yield n.U_.stop(),n.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class pM{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new pM(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kf(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Yc(n))return new ge(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class Qf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=A_(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new Qf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class H4{constructor(){this.W_=new Dn(Re.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ke():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yf{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Yf(e,t,Qf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&T_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Tpe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Dpe{constructor(){this.queries=z4(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Te(t),s=i.queries;i.queries=z4(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})}(this,new ge(Z.ABORTED,"Firestore shutting down"))}}function z4(){return new xa(n=>sG(n),T_)}function gM(n,e){return mM.apply(this,arguments)}function mM(){return(mM=(0,ae.A)(function*(n,e){const t=Te(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Tpe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Kf(o,`Initialization of query '${Mf(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&vM(t)})).apply(this,arguments)}function _M(n,e){return yM.apply(this,arguments)}function yM(){return(yM=(0,ae.A)(function*(n,e){const t=Te(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Ape(n,e){const t=Te(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&vM(t)}function Spe(n,e,t){const r=Te(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function vM(n){n.Y_.forEach(e=>{e.next()})}var EM,G4;(G4=EM||(EM={})).ea="default",G4.Cache="cache";class IM{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Yf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==EM.Cache}}class Rpe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class q4{constructor(e){this.serializer=e}Es(e){return Go(this.serializer,e)}ds(e){return e.metadata.exists?BG(this.serializer,e.document,!1):Pn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dr(e)}}class Ppe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=W4(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Pt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new q4(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||vt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ae.A)(function*(){const t=yield function ipe(n,e,t,r){return $P.apply(this,arguments)}(e.localStore,new q4(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield spe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function W4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class K4{constructor(e){this.key=e}}class Q4{constructor(e){this.key=e}}class Y4{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=vt(),this.mutatedKeys=vt(),this.Aa=aG(e),this.Ra=new Qf(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new H4,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const _=i.get(f),E=D_(this.query,m)?m:null,w=!!_&&this.mutatedKeys.has(_.key),b=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;_&&E?_.data.isEqual(E.data)?w!==b&&(r.track({type:3,doc:E}),D=!0):this.ga(_,E)||(r.track({type:2,doc:E}),D=!0,(c&&this.Aa(E,c)>0||u&&this.Aa(E,u)<0)&&(a=!0)):!_&&E?(r.track({type:0,doc:E}),D=!0):_&&!E&&(r.track({type:1,doc:_}),D=!0,(c||u)&&(a=!0)),D&&(E?(o=o.add(E),s=b?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(E,w){const b=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return b(E)-b(w)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],c=0===this.da.size&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,0!==o.length||u?{snapshot:new Yf(this.query,e.Ra,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new H4,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=vt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Q4(r))}),this.da.forEach(r=>{e.has(r)||t.push(new K4(r))}),t}ba(e){this.Ta=e.Ts,this.da=vt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Yf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Mpe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xpe{constructor(e){this.key=e,this.va=!1}}class Npe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xa(a=>sG(a),T_),this.Ma=new Map,this.xa=new Set,this.Oa=new Dn(Re.comparator),this.Na=new Map,this.La=new OP,this.Ba={},this.ka=new Map,this.qa=Ju.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Ope(n,e){return wM.apply(this,arguments)}function wM(){return(wM=(0,ae.A)(function*(n,e,t=!0){const r=yC(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Z4(r,e,t,!0),i})).apply(this,arguments)}function kpe(n,e){return CM.apply(this,arguments)}function CM(){return(CM=(0,ae.A)(function*(n,e){const t=yC(n);yield Z4(t,e,!0,!1)})).apply(this,arguments)}function Z4(n,e,t,r){return bM.apply(this,arguments)}function bM(){return(bM=(0,ae.A)(function*(n,e,t,r){const i=yield $f(n.localStore,mi(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield TM(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&mC(n.remoteStore,i),a})).apply(this,arguments)}function TM(n,e,t,r,i){return DM.apply(this,arguments)}function DM(){return DM=(0,ae.A)(function*(n,e,t,r,i){n.Ka=(m,_,E)=>{return(w=(0,ae.A)(function*(D,k,x,V){let J=k.view.ma(x);J.ns&&(J=yield dC(D.localStore,k.query,!1).then(({documents:S})=>k.view.ma(S,J)));const me=V&&V.targetChanges.get(k.targetId),Ee=V&&null!=V.targetMismatches.get(k.targetId),F=k.view.applyChanges(J,D.isPrimaryClient,me,Ee);return LM(D,k.targetId,F.wa),F.snapshot}),function b(D,k,x,V){return w.apply(this,arguments)})(n,m,_,E);var w};const s=yield dC(n.localStore,e,!0),o=new Y4(e,s.Ts),a=o.ma(s.documents),c=N_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);LM(n,t,u.wa);const f=new Mpe(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}),DM.apply(this,arguments)}function Fpe(n,e,t){return AM.apply(this,arguments)}function AM(){return(AM=(0,ae.A)(function*(n,e,t){const r=Te(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!T_(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gf(r.remoteStore,i.targetId),Zf(r,i.targetId)}).catch(Qc))):(Zf(r,i.targetId),yield Hf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Lpe(n,e){return SM.apply(this,arguments)}function SM(){return(SM=(0,ae.A)(function*(n,e){const t=Te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gf(t.remoteStore,r.targetId))})).apply(this,arguments)}function RM(){return(RM=(0,ae.A)(function*(n,e,t){const r=KM(n);try{const i=yield function(o,a){const c=Te(o),u=Vn.now(),f=a.reduce((E,w)=>E.add(w.key),vt());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let w=Qi(),b=vt();return c.cs.getEntries(E,f).next(D=>{w=D,w.forEach((k,x)=>{x.isValidDocument()||(b=b.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,w)).next(D=>{m=D;const k=[];for(const x of a){const V=ufe(x,m.get(x.key).overlayedDocument);null!=V&&k.push(new Na(x.key,V,H3(V.value.mapValue),Bn.exists(!0)))}return c.mutationQueue.addMutationBatch(E,u,k,a)}).next(D=>{_=D;const k=D.applyToLocalDocumentSet(m,b);return c.documentOverlayCache.saveOverlays(E,D.batchId,k)})}).then(()=>({batchId:_.batchId,changes:lG(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Dn(ct)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield ka(r,i.changes),yield qf(r.remoteStore)}catch(i){const s=Kf(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function X4(n,e){return PM.apply(this,arguments)}function PM(){return(PM=(0,ae.A)(function*(n,e){const t=Te(n);try{const r=yield function npe(n,e){const t=Te(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((f,m)=>{const _=i.get(m);if(!_)return;a.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,m)));let E=_.withSequenceNumber(s.currentSequenceNumber);var b,D,k;null!==e.targetMismatches.get(m)?E=E.withResumeToken(Jn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),D=E,k=f,(0===(b=_).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,E))});let c=Qi(),u=vt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(A4(s,o,e.documentUpdates).next(f=>{c=f.Ps,u=f.Is})),!r.isEqual(qe.min())){const f=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?He(o.va):i.removedDocuments.size>0&&(He(o.va),o.va=!1))}),yield ka(t,r,e)}catch(r){yield Qc(r)}})).apply(this,arguments)}function J4(n,e,t){const r=Te(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Te(o);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(const _ of m.j_)_.Z_(a)&&(u=!0)}),u&&vM(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Upe(n,e,t){return MM.apply(this,arguments)}function MM(){return(MM=(0,ae.A)(function*(n,e,t){const r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Dn(Re.comparator);o=o.insert(s,Pn.newNoDocument(s,qe.min()));const a=vt().add(s),c=new x_(qe.min(),new Map,new Dn(ct),o,a);yield X4(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),VM(r)}else yield Hf(r.localStore,e,!1).then(()=>Zf(r,e,t)).catch(Qc)})).apply(this,arguments)}function Bpe(n,e){return xM.apply(this,arguments)}function xM(){return(xM=(0,ae.A)(function*(n,e){const t=Te(n),r=e.batch.batchId;try{const i=yield function tpe(n,e){const t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,f){const m=u.batch,_=m.keys();let E=q.resolve();return _.forEach(w=>{E=E.next(()=>f.getEntry(c,w)).next(b=>{const D=u.docVersions.get(w);He(null!==D),b.version.compareTo(D)<0&&(m.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),f.addEntry(b)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=vt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);FM(t,r,null),kM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ka(t,i)}catch(i){yield Qc(i)}})).apply(this,arguments)}function jpe(n,e,t){return NM.apply(this,arguments)}function NM(){return(NM=(0,ae.A)(function*(n,e,t){const r=Te(n);try{const i=yield function(o,a){const c=Te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(He(null!==m),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);FM(r,e,t),kM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ka(r,i)}catch(i){yield Qc(i)}})).apply(this,arguments)}function OM(){return(OM=(0,ae.A)(function*(n,e){const t=Te(n);al(t.remoteStore)||_e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Te(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Kf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function kM(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function FM(n,e,t){const r=Te(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Zf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||eq(n,r)})}function eq(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Gf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),VM(n))}function LM(n,e,t){for(const r of t)r instanceof K4?(n.La.addReference(r.key,e),Hpe(n,r)):r instanceof Q4?(_e("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||eq(n,r.key)):ke()}function Hpe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(_e("SyncEngine","New document in limbo: "+t),n.xa.add(r),VM(n))}function VM(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Re(Pt.fromString(e)),r=n.qa.next();n.Na.set(r,new xpe(t)),n.Oa=n.Oa.insert(t,r),mC(n.remoteStore,new Oa(mi(Rf(t.path)),r,"TargetPurposeLimboResolution",ps.oe))}}function ka(n,e,t){return UM.apply(this,arguments)}function UM(){return UM=(0,ae.A)(function*(n,e,t){const r=Te(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(u=>{var f;if((u||t)&&r.isPrimaryClient){const m=u?!u.fromCache:null===(f=t?.targetChanges.get(c.targetId))||void 0===f?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){i.push(u);const m=UP.Wi(c.targetId,u);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,ae.A)(function*(u,f){const m=Te(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>q.forEach(f,E=>q.forEach(E.$i,w=>m.persistence.referenceDelegate.addReference(_,E.targetId,w)).next(()=>q.forEach(E.Ui,w=>m.persistence.referenceDelegate.removeReference(_,E.targetId,w)))))}catch(_){if(!Yc(_))throw _;_e("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const E=_.targetId;if(!_.fromCache){const w=m.os.get(E),D=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);m.os=m.os.insert(E,D)}}}),function c(u,f){return a.apply(this,arguments)})(r.localStore,s))}),UM.apply(this,arguments)}function zpe(n,e){return BM.apply(this,arguments)}function BM(){return(BM=(0,ae.A)(function*(n,e){const t=Te(n);if(!t.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());const r=yield T4(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(c=>{c.reject(new ge(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ka(t,r.hs)}var s})).apply(this,arguments)}function Gpe(n,e){const t=Te(n),r=t.Na.get(e);if(r&&r.va)return vt().add(r.key);{let i=vt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function qpe(n,e){return jM.apply(this,arguments)}function jM(){return(jM=(0,ae.A)(function*(n,e){const t=Te(n),r=yield dC(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&LM(t,e.targetId,i.wa),i})).apply(this,arguments)}function Wpe(n,e){return $M.apply(this,arguments)}function $M(){return($M=(0,ae.A)(function*(n,e){const t=Te(n);return R4(t.localStore,e).then(r=>ka(t,r))})).apply(this,arguments)}function Kpe(n,e,t,r){return HM.apply(this,arguments)}function HM(){return(HM=(0,ae.A)(function*(n,e,t,r){const i=Te(n),s=yield function(a,c){const u=Te(a),f=Te(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.Mn(m,c).next(_=>_?u.localDocuments.getDocuments(m,_):q.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield qf(i.remoteStore):"acknowledged"===t||"rejected"===t?(FM(i,e,r||null),kM(i,e),c=e,Te(Te(i.localStore).mutationQueue).On(c)):ke(),yield ka(i,s)):_e("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function zM(){return(zM=(0,ae.A)(function*(n,e){const t=Te(n);if(yC(t),KM(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tq(t,r.toArray());t.Qa=!0,yield hM(t.remoteStore,!0);for(const s of i)mC(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Zf(t,o),Hf(t.localStore,o,!0))),Gf(t.remoteStore,o)}),yield i,yield tq(t,r),function(o){const a=Te(o);a.Na.forEach((c,u)=>{Gf(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Dn(Re.comparator)}(t),t.Qa=!1,yield hM(t.remoteStore,!1)}})).apply(this,arguments)}function tq(n,e,t){return GM.apply(this,arguments)}function GM(){return(GM=(0,ae.A)(function*(n,e,t){const r=Te(n),i=[],s=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&0!==c.length){a=yield $f(r.localStore,mi(c[0]));for(const u of c){const f=r.Fa.get(u),m=yield qpe(r,f);m.snapshot&&s.push(m.snapshot)}}else{const u=yield S4(r.localStore,o);a=yield $f(r.localStore,u),yield TM(r,nq(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function nq(n){return tG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ype(n){return t=Te(n).localStore,Te(Te(t).persistence).Qi();var t}function Zpe(n,e,t,r){return qM.apply(this,arguments)}function qM(){return(qM=(0,ae.A)(function*(n,e,t,r){const i=Te(n);if(i.Qa)return void _e("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield R4(i.localStore,oG(s[0])),a=x_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Jn.EMPTY_BYTE_STRING);yield ka(i,o,a);break}case"rejected":yield Hf(i.localStore,e,!0),Zf(i,e,r);break;default:ke()}})).apply(this,arguments)}function Xpe(n,e,t){return WM.apply(this,arguments)}function WM(){return(WM=(0,ae.A)(function*(n,e,t){const r=yC(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){_e("SyncEngine","Adding an already active target "+i);continue}const s=yield S4(r.localStore,i),o=yield $f(r.localStore,s);yield TM(r,nq(s),o.targetId,!1,o.resumeToken),mC(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Hf(r.localStore,i,!1).then(()=>{Gf(r.remoteStore,i),Zf(r,i)}).catch(Qc))}})).apply(this,arguments)}function yC(n){const e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=X4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gpe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Upe.bind(null,e),e.Ca.d_=Ape.bind(null,e.eventManager),e.Ca.$a=Spe.bind(null,e.eventManager),e}function KM(n){const e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bpe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jpe.bind(null,e),e}class Xf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.A)(function*(){t.serializer=H_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return b4(this.persistence,new C4,e.initialUser,this.serializer)}createPersistence(e){return new kP(cC.Zr,this.serializer)}createSharedClientState(e){return new N4}terminate(){var e=this;return(0,ae.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QM extends Xf{constructor(e,t,r){super(),this.Wa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.A)(function*(){yield t().call(r,e),yield r.Wa.initialize(r,e),yield KM(r.Wa.syncEngine),yield qf(r.Wa.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return b4(this.persistence,new C4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new p4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Ihe(t,this.persistence);return new Ehe(e.asyncQueue,r)}createPersistence(e){const t=VP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new LP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,k4(),gC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new N4}}class rq extends QM{constructor(e,t){super(e,t,!1),this.Wa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.A)(function*(){yield t().call(r,e);const i=r.Wa.syncEngine;r.sharedClientState instanceof WP&&(r.sharedClientState.syncEngine={no:Kpe.bind(null,i),ro:Zpe.bind(null,i),io:Xpe.bind(null,i),Qi:Ype.bind(null,i),eo:Wpe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,ae.A)(function*(o){yield function Qpe(n,e){return zM.apply(this,arguments)}(r.Wa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=k4();if(!WP.D(t))throw new ge(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=VP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jf{initialize(e,t){var r=this;return(0,ae.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>J4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zpe.bind(null,r.syncEngine),yield hM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dpe}createDatastore(e){const t=H_(e.databaseInfo.databaseId),r=new lpe(e.databaseInfo);return new hpe(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>J4(this.syncEngine,t,0),a=O4.D()?new O4:new ope,new ppe(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,c,u,f){const m=new Npe(i,s,o,a,c,u);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.A)(function*(){var t,r,i;yield(i=(0,ae.A)(function*(o){const a=Te(o);_e("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield zf(a),a.k_.shutdown(),a.q_.set("Unknown")}),function s(o){return i.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(r=e.eventManager)||void 0===r||r.terminate()})()}}function iq(n,e=10240){let t=0;return{read:()=>(0,ae.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tge{constructor(e,t){this.ja=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){var e=this;return(0,ae.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ae.A)(function*(){return yield e.getMetadata(),e.Ja()})()}Ja(){var e=this;return(0,ae.A)(function*(){const t=yield e.Ya();if(null===t)return null;const r=e.Ha.decode(t),i=Number(r);isNaN(i)&&e.Za(`length string (${r}) is not valid number`);const s=yield e.Xa(i);return new Rpe(JSON.parse(s),t.length+i)})()}eu(){return this.buffer.findIndex(e=>123===e)}Ya(){var e=this;return(0,ae.A)(function*(){for(;e.eu()<0&&!(yield e.tu()););if(0===e.buffer.length)return null;const t=e.eu();t<0&&e.Za("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Xa(e){var t=this;return(0,ae.A)(function*(){for(;t.buffer.length<e;)(yield t.tu())&&t.Za("Reached the end of bundle when more is expected.");const r=t.Ha.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){var e=this;return(0,ae.A)(function*(){const t=yield e.ja.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nge{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ge(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.A)(function*(o,a){const c=Te(o),u={documents:a.map(E=>O_(c.serializer,E))},f=yield c.Lo("BatchGetDocuments",c.serializer.databaseId,Pt.emptyPath(),u,a.length),m=new Map;f.forEach(E=>{const w=function vfe(n,e){return"found"in e?function(r,i){He(!!i.found);const s=Go(r,i.found.name),o=dr(i.found.updateTime),a=i.found.createTime?dr(i.found.createTime):qe.min(),c=new ti({mapValue:{fields:i.found.fields}});return Pn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){He(!!i.missing),He(!!i.readTime);const s=Go(r,i.missing),o=dr(i.readTime);return Pn.newNoDocument(s,o)}(n,e):ke()}(c.serializer,E);m.set(w.key.toString(),w)});const _=[];return a.forEach(E=>{const w=m.get(E.toString());He(!!w),_.push(w)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Re.fromPath(i);e.mutations.push(new _P(s,e.precondition(s)))}),yield(r=(0,ae.A)(function*(s,o){const a=Te(s),c={writes:o.map(u=>k_(a.serializer,u))};yield a.Mo("Commit",a.serializer.databaseId,Pt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke();t=qe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ge(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qe.min())?Bn.exists(!1):Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qe.min()))throw new ge(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rge{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new QP(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var e=this;this.t_.Go((0,ae.A)(function*(){const t=new nge(e.datastore),r=e.su(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ou(s)}))}).catch(i=>{e.ou(i)})}))}su(e){try{const t=this.updateFunction(e);return!__(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bG(t)}return!1}}class ige{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=g3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ae.A)(function*(a){_e("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(_e("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Kf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function EC(n,e){return YM.apply(this,arguments)}function YM(){return YM=(0,ae.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.A)(function*(s){r.isEqual(s)||(yield T4(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),YM.apply(this,arguments)}function ZM(n,e){return XM.apply(this,arguments)}function XM(){return(XM=(0,ae.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JM(n);_e("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$4(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function sq(n){return"FirebaseError"===n.name?n.code===Z.FAILED_PRECONDITION||n.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function JM(n){return ex.apply(this,arguments)}function ex(){return(ex=(0,ae.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield EC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!sq(t))throw t;Wi("Error using user provided cache. Falling back to memory cache: "+t),yield EC(n,new Xf)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),yield EC(n,new Xf);return n._offlineComponents})).apply(this,arguments)}function IC(n){return tx.apply(this,arguments)}function tx(){return(tx=(0,ae.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),yield ZM(n,n._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),yield ZM(n,new Jf))),n._onlineComponents})).apply(this,arguments)}function oq(n){return JM(n).then(e=>e.persistence)}function ep(n){return JM(n).then(e=>e.localStore)}function aq(n){return IC(n).then(e=>e.remoteStore)}function nx(n){return IC(n).then(e=>e.syncEngine)}function tp(n){return rx.apply(this,arguments)}function rx(){return(rx=(0,ae.A)(function*(n){const e=yield IC(n),t=e.eventManager;return t.onListen=Ope.bind(null,e.syncEngine),t.onUnlisten=Fpe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kpe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lpe.bind(null,e.syncEngine),t})).apply(this,arguments)}function lq(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(s,o,a,c,u){const f=new vC({next:_=>{o.enqueueAndForget(()=>_M(s,m));const E=_.docs.has(a);!E&&_.fromCache?u.reject(new ge(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&c&&"server"===c.source?u.reject(new ge(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new IM(Rf(a.path),f,{includeMetadataChanges:!0,_a:!0});return gM(s,m)}(yield tp(n),n.asyncQueue,e,t,r)})),r.promise}function uq(n,e,t={}){const r=new Nr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(s,o,a,c,u){const f=new vC({next:_=>{o.enqueueAndForget(()=>_M(s,m)),_.fromCache&&"server"===c.source?u.reject(new ge(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new IM(a,f,{includeMetadataChanges:!0,_a:!0});return gM(s,m)}(yield tp(n),n.asyncQueue,e,t,r)})),r.promise}function dq(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const hq=new Map;function ix(n,e,t){if(!t)throw new ge(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fq(n,e,t,r){if(!0===e&&!0===r)throw new ge(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pq(n){if(!Re.isDocumentKey(n))throw new ge(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gq(n){if(Re.isDocumentKey(n))throw new ge(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ke()}function Tt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wC(n);throw new ge(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mq(n,e){if(e<=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _q{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=dq(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class G_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _q({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _q(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new che;switch(r.type){case"firstParty":return new hhe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hq.get(t);r&&(_e("ComponentProvider","Removing Datastore"),hq.delete(t),r.terminate())}(this),Promise.resolve()}}class ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class Mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class qo extends ni{constructor(e,t,r){super(e,t,Rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Re(e))}withConverter(e){return new qo(this.firestore,e,this._path)}}function vq(n,e,...t){if(n=(0,Yt.Ku)(n),ix("collection","path",e),n instanceof G_){const r=Pt.fromString(e,...t);return gq(r),new qo(n,null,r)}{if(!(n instanceof Mn||n instanceof qo))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return gq(r),new qo(n.firestore,null,r)}}function CC(n,e,...t){if(n=(0,Yt.Ku)(n),1===arguments.length&&(e=g3.newId()),ix("doc","path",e),n instanceof G_){const r=Pt.fromString(e,...t);return pq(r),new Mn(n,null,new Re(r))}{if(!(n instanceof Mn||n instanceof qo))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return pq(r),new Mn(n.firestore,n instanceof qo?n.converter:null,new Re(r))}}function Eq(n,e){return n=(0,Yt.Ku)(n),e=(0,Yt.Ku)(e),(n instanceof Mn||n instanceof qo)&&(e instanceof Mn||e instanceof qo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sx(n,e){return n=(0,Yt.Ku)(n),e=(0,Yt.Ku)(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&T_(n._query,e._query)&&n.converter===e.converter}class _ge{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new QP(this,"async_queue_retry"),this.Eu=()=>{const t=gC();t&&_e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};const e=gC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const t=gC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const t=new Nr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){var e=this;return(0,ae.A)(function*(){if(0!==e.uu.length){try{yield e.uu[0](),e.uu.shift(),e.t_.reset()}catch(t){if(!Yc(t))throw t;_e("AsyncQueue","Operation failed with retryable error: "+t)}e.uu.length>0&&e.t_.Go(()=>e.Ru())}})()}Au(e){const t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{throw this.hu=r,this.Pu=!1,ur("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);const i=pM.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&ke()}verifyOperationInProgress(){}mu(){var e=this;return(0,ae.A)(function*(){let t;do{t=e.au,yield t}while(t!==e.au)})()}fu(e){for(const t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.lu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const t=this.lu.indexOf(e);this.lu.splice(t,1)}}function ox(n){return function(t){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class yge{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class un extends G_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _ge,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Iq(this),this._firestoreClient.terminate()}}function jn(n){return n._firestoreClient||Iq(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Iq(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Hhe(n._databaseId,c,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,dq(f.experimentalLongPollingOptions),f.useFetchStreams));var c,f;n._firestoreClient=new ige(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function wq(n,e,t){const r=new Nr;return n.asyncQueue.enqueue((0,ae.A)(function*(){try{yield EC(n,t),yield ZM(n,e),r.resolve()}catch(i){const s=i;if(!sq(s))throw s;Wi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function Cq(n){if(n._initialized||n._terminated)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wo(Jn.fromBase64String(e))}catch(t){throw new ge(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wo(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ge(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class td{constructor(e){this._methodName=e}}class bC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}class TC{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const Rge=/^__.*__$/;class Pge{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Na(e,this.data,this.fieldMask,t,this.fieldTransforms):new Of(e,this.data,t,this.fieldTransforms)}}class bq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tq(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class DC{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new DC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return RC(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(0===e.length)throw this.Mu("Document fields must not be empty");if(Tq(this.wu)&&Rge.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class Mge{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||H_(e)}Nu(e,t,r,i=!1){return new DC({wu:e,methodName:t,Ou:r,path:Rn.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nd(n){const e=n._freezeSettings(),t=H_(n._databaseId);return new Mge(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AC(n,e,t,r,i,s={}){const o=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);fx("Data must be an object, but it was:",o,r);const a=Sq(r,o);let c,u;if(s.merge)c=new Ki(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const _=K_(e,m,t);if(!o.contains(_))throw new ge(Z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Pq(f,_)||f.push(_)}c=new Ki(f),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new Pge(new ti(a),c,u)}class W_ extends td{_toFieldTransform(e){if(2!==e.wu)throw e.Mu(1===e.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof W_}}function Dq(n,e,t){return new DC({wu:3,Ou:e.settings.Ou,methodName:n._methodName,Du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ax extends td{_toFieldTransform(e){return new R_(e.path,new xf)}isEqual(e){return e instanceof ax}}class cx extends td{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=Dq(this,e,!0),r=this.Lu.map(s=>rd(s,t)),i=new qu(r);return new R_(e.path,i)}isEqual(e){return e instanceof cx&&(0,Yt.bD)(this.Lu,e.Lu)}}class lx extends td{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=Dq(this,e,!0),r=this.Lu.map(s=>rd(s,t)),i=new Wu(r);return new R_(e.path,i)}isEqual(e){return e instanceof lx&&(0,Yt.bD)(this.Lu,e.Lu)}}class ux extends td{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=new Nf(e.serializer,hG(e.serializer,this.Bu));return new R_(e.path,t)}isEqual(e){return e instanceof ux&&this.Bu===e.Bu}}function dx(n,e,t,r){const i=n.Nu(1,e,t);fx("Data must be an object, but it was:",i,r);const s=[],o=ti.empty();Zc(r,(c,u)=>{const f=SC(e,c,t);u=(0,Yt.Ku)(u);const m=i.Cu(f);if(u instanceof W_)s.push(f);else{const _=rd(u,m);null!=_&&(s.push(f),o.set(f,_))}});const a=new Ki(s);return new bq(o,a,i.fieldTransforms)}function hx(n,e,t,r,i,s){const o=n.Nu(1,e,t),a=[K_(e,r,t)],c=[i];if(s.length%2!=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(K_(e,s[_])),c.push(s[_+1]);const u=[],f=ti.empty();for(let _=a.length-1;_>=0;--_)if(!Pq(u,a[_])){const E=a[_];let w=c[_];w=(0,Yt.Ku)(w);const b=o.Cu(E);if(w instanceof W_)u.push(E);else{const D=rd(w,b);null!=D&&(u.push(E),f.set(E,D))}}const m=new Ki(u);return new bq(f,m,o.fieldTransforms)}function Aq(n,e,t,r=!1){return rd(t,n.Nu(r?4:3,e))}function rd(n,e){if(Rq(n=(0,Yt.Ku)(n)))return fx("Unsupported field value:",e,n),Sq(n,e);if(n instanceof td)return function(r,i){if(!Tq(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&4!==e.wu)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=rd(a,i.Fu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Yt.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return hG(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Vn.fromDate(r);return{timestampValue:Ff(i.serializer,s)}}if(r instanceof Vn){const s=new Vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ff(i.serializer,s)}}if(r instanceof bC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wo)return{bytesValue:OG(i.serializer,r._byteString)};if(r instanceof Mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:CP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof TC)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if("number"!=typeof c)throw a.Mu("VectorValues must only contain numeric values.");return mP(a.serializer,c)})}}}}};var a;throw i.Mu(`Unsupported field value: ${wC(r)}`)}(n,e)}function Sq(n,e){const t={};return x3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zc(n,(r,i)=>{const s=rd(i,e.bu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Rq(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof bC||n instanceof Wo||n instanceof Mn||n instanceof td||n instanceof TC)}function fx(n,e,t){if(!Rq(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=wC(t);throw e.Mu("an object"===r?n+" a custom object":n+" "+r)}var i}function K_(n,e,t){if((e=(0,Yt.Ku)(e))instanceof Fa)return e._internalPath;if("string"==typeof e)return SC(n,e);throw RC("Field path arguments must be of type string or ",n,!1,void 0,t)}const xge=new RegExp("[~\\*/\\[\\]]");function SC(n,e,t){if(e.search(xge)>=0)throw RC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fa(...e.split("."))._internalPath}catch{throw RC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RC(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ge(Z.INVALID_ARGUMENT,a+n+c)}function Pq(n,e){return n.some(t=>t.isEqual(e))}class Q_{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Nge(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(PC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Nge extends Q_{data(){return super.data()}}function PC(n,e){return"string"==typeof e?SC(n,e):e instanceof Fa?e._internalPath:e._delegate._internalPath}function Mq(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ge(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class px{}class Y_ extends px{}function ll(n,e,...t){let r=[];e instanceof px&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof np).length,a=s.filter(c=>c instanceof Z_).length;if(o>1||o>0&&a>0)throw new ge(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Z_ extends Y_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Z_(e,t,r)}_apply(e){const t=this._parse(e);return kq(e._query,t),new ni(e.firestore,e.converter,pP(e._query,t))}_parse(e){const t=nd(e.firestore);return function(s,o,a,c,u,f,m){let _;if(u.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){Oq(m,f);const E=[];for(const w of m)E.push(Nq(c,s,w));_={arrayValue:{values:E}}}else _=Nq(c,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||Oq(m,f),_=Aq(a,"where",m,"in"===f||"not-in"===f);return Mt.create(u,f,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class np extends px{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new np(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)kq(o,c),o=pP(o,c)}(e._query,t),new ni(e.firestore,e.converter,pP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class gx extends Y_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gx(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new C_(s,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ma(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class MC extends Y_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new MC(e,t,r)}_apply(e){return new ni(e.firestore,e.converter,Kw(e._query,this._limit,this._limitType))}}class xC extends Y_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xC(e,t,r)}_apply(e){const t=xq(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,(s=t,new Ma((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class NC extends Y_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new NC(e,t,r)}_apply(e){const t=xq(e,this.type,this._docOrFields,this._inclusive);return new ni(e.firestore,e.converter,(s=t,new Ma((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function xq(n,e,t,r){if(t[0]=(0,Yt.Ku)(t[0]),t[0]instanceof Q_)return function(s,o,a,c,u){if(!c)throw new ge(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Pf(s))if(m.field.isKeyField())f.push(zu(o,c.key));else{const _=c.data.field(m.field);if(Bw(_))throw new ge(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const E=m.field.canonicalString();throw new ge(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(_)}return new nl(f,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=nd(n.firestore);return function(o,a,c,u,f,m){const _=o.explicitOrderBy;if(f.length>_.length)throw new ge(Z.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let w=0;w<f.length;w++){const b=f[w];if(_[w].field.isKeyField()){if("string"!=typeof b)throw new ge(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof b}`);if(!fP(o)&&-1!==b.indexOf("/"))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${b}' contains a slash.`);const D=o.path.child(Pt.fromString(b));if(!Re.isDocumentKey(D))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const k=new Re(D);E.push(zu(a,k))}else{const D=Aq(c,u,b);E.push(D)}}return new nl(E,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Nq(n,e,t){if("string"==typeof(t=(0,Yt.Ku)(t))){if(""===t)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fP(e)&&-1!==t.indexOf("/"))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pt.fromString(t));if(!Re.isDocumentKey(r))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zu(n,new Re(r))}if(t instanceof Mn)return zu(n,t._key);throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wC(t)}.`)}function Oq(n,e){if(!Array.isArray(n)||0===n.length)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kq(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ge(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mx{convertValue(e,t="none"){switch(el(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Un(o.doubleValue));return new TC(s)}convertGeoPoint(e){return new bC(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(v_(e));default:return null}}convertTimestamp(e){const t=Ra(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);He(qG(r));const i=new Xc(r.get(1),r.get(3)),s=new Re(r.popFirst(5));return i.isEqual(t)||ur(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function OC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $ge extends mx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}class id{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class La extends Q_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(PC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X_ extends La{data(e={}){return super.data(e)}}class ul{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new id(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new X_(this._firestore,this._userDataWriter,r.key,r,new id(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new X_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new id(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new X_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new id(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:zge(a.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zge(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function Lq(n,e){return n instanceof La&&e instanceof La?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ul&&e instanceof ul&&n._firestore===e._firestore&&sx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class dl extends mx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function Vq(n,e,t){n=Tt(n,Mn);const r=Tt(n.firestore,un),i=OC(n.converter,e,t);return rp(r,[AC(nd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Bn.none())])}function Uq(n,e,t,...r){n=Tt(n,Mn);const i=Tt(n.firestore,un),s=nd(i);let o;return o="string"==typeof(e=(0,Yt.Ku)(e))||e instanceof Fa?hx(s,"updateDoc",n._key,e,t,r):dx(s,"updateDoc",n._key,e),rp(i,[o.toMutation(n._key,Bn.exists(!0))])}function Bq(n,...e){var t,r,i;n=(0,Yt.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||ox(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ox(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,u,f;if(n instanceof Mn)u=Tt(n.firestore,un),f=Rf(n._key.path),c={next:m=>{e[o]&&e[o](_x(u,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Tt(n,ni);u=Tt(m.firestore,un),f=m._query;const _=new dl(u);c={next:E=>{e[o]&&e[o](new ul(u,_,m,E))},error:e[o+1],complete:e[o+2]},Mq(n._query)}return function(_,E,w,b){const D=new vC(b),k=new IM(E,D,w);return _.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return gM(yield tp(_),k)})),()=>{D.za(),_.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return _M(yield tp(_),k)}))}}(jn(u),f,a,c)}function rp(n,e){return function(r,i){const s=new Nr;return r.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function Vpe(n,e,t){return RM.apply(this,arguments)}(yield nx(r),i,s)})),s.promise}(jn(n),e)}function _x(n,e,t){const r=t.docs.get(e._key),i=new dl(n);return new La(n,i,e._key,r,new id(t.hasPendingWrites,t.fromCache),e.converter)}const cme={maxAttempts:5};class jq{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nd(e)}set(e,t,r){this._verifyNotCommitted();const i=hl(e,this._firestore),s=OC(i.converter,t,r),o=AC(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Bn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=hl(e,this._firestore);let o;return o="string"==typeof(t=(0,Yt.Ku)(t))||t instanceof Fa?hx(this._dataReader,"WriteBatch.update",s._key,t,r,i):dx(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hl(e,this._firestore);return this._mutations=this._mutations.concat(new kf(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hl(n,e){if((n=(0,Yt.Ku)(n)).firestore!==e)throw new ge(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lme extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=nd(t)}get(t){const r=hl(t,this._firestore),i=new $ge(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ke();const o=s[0];if(o.isFoundDocument())return new Q_(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Q_(this._firestore,i,r._key,null,r.converter);throw ke()})}set(t,r,i){const s=hl(t,this._firestore),o=OC(s.converter,r,i),a=AC(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=hl(t,this._firestore);let a;return a="string"==typeof(r=(0,Yt.Ku)(r))||r instanceof Fa?hx(this._dataReader,"Transaction.update",o._key,r,i,s):dx(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=hl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hl(e,this._firestore),r=new dl(this._firestore);return super.get(e).then(i=>new La(this._firestore,r,t._key,i._document,new id(!1,!1),t.converter))}}function vx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Gq(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function qq(){if(!function jhe(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){If=yf.SDK_VERSION,(0,yf._registerComponent)(new n3.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new un(new uhe(r.getProvider("auth-internal")),new fhe(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ge(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,yf.registerVersion)(h3,"4.7.1",e),(0,yf.registerVersion)(h3,"4.7.1","esm2017")}();class J_{constructor(e){this._delegate=e}static fromBase64String(e){return qq(),new J_(Wo.fromBase64String(e))}static fromUint8Array(e){return Gq(),new J_(Wo.fromUint8Array(e))}toBase64(){return qq(),this._delegate.toBase64()}toUint8Array(){return Gq(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ex(n){return function vme(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Eme{enableIndexedDbPersistence(e,t){return function Ege(n,e){Cq(n=Tt(n,un));const t=jn(n);if(t._uninitializedComponentsProvider)throw new ge(Z.FAILED_PRECONDITION,"SDK cache is already specified.");Wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Jf;return wq(t,i,new QM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ige(n){Cq(n=Tt(n,un));const e=jn(n);if(e._uninitializedComponentsProvider)throw new ge(Z.FAILED_PRECONDITION,"SDK cache is already specified.");Wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Jf;return wq(e,r,new rq(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wge(n){if(n._initialized&&!n._terminated)throw new ge(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{yield(t=(0,ae.A)(function*(i){if(!jo.D())return Promise.resolve();const s=i+"main";yield jo.delete(s)}),function r(i){return t.apply(this,arguments)})(VP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Wq{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function yq(n,e,t,r={}){var i;const s=(n=Tt(n,G_))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=zr.MOCK_USER;else{a=(0,Yt.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ge(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new zr(u)}n._authCredentials=new lhe(new f3(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function bge(n){return function sge(n){return n.asyncQueue.enqueue((0,ae.A)(function*(){const e=yield oq(n),t=yield aq(n);return e.setNetworkEnabled(!0),function(i){const s=Te(i);return s.L_.delete(0),z_(s)}(t)}))}(jn(n=Tt(n,un)))}(this._delegate)}disableNetwork(){return function Tge(n){return function oge(n){return n.asyncQueue.enqueue((0,ae.A)(function*(){const e=yield oq(n),t=yield aq(n);return e.setNetworkEnabled(!1),(r=(0,ae.A)(function*(s){const o=Te(s);o.L_.add(0),yield zf(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(jn(n=Tt(n,un)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fq("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Cge(n){return function(t){const r=new Nr;return t.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function $pe(n,e){return OM.apply(this,arguments)}(yield nx(t),r)})),r.promise}(jn(n=Tt(n,un)))}(this._delegate)}onSnapshotsInSync(e){return function Jge(n,e){return function uge(n,e){const t=new vC(e);return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return i=yield tp(n),s=t,Te(i).Y_.add(s),void s.next();var i,s})),()=>{t.za(),n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return i=yield tp(n),s=t,void Te(i).Y_.delete(s);var i,s}))}}(jn(n=Tt(n,un)),ox(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ip(this,vq(this._delegate,e))}catch(t){throw ki(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vs(this,CC(this._delegate,e))}catch(t){throw ki(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fi(this,function mge(n,e){if(n=Tt(n,G_),ix("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,(r=e,new Ma(Pt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ki(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ume(n,e,t){n=Tt(n,un);const r=Object.assign(Object.assign({},cme),t);return function(s){if(s.maxAttempts<1)throw new ge(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Nr;return s.asyncQueue.enqueueAndForget((0,ae.A)(function*(){const u=yield function cq(n){return IC(n).then(e=>e.datastore)}(s);new rge(s.asyncQueue,u,a,o,c).ru()})),c.promise}(jn(n),i=>e(new lme(n,i)),r)}(this._delegate,t=>e(new Kq(this,t)))}batch(){return jn(this._delegate),new Qq(new jq(this._delegate,e=>rp(this._delegate,e)))}loadBundle(e){return function Dge(n,e){const t=jn(n=Tt(n,un)),r=new yge;return function dge(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?DG().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return iq(f,m);if(f instanceof ArrayBuffer)return iq(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new tge(f,a);var f}(t,H_(e));n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){!function Jpe(n,e,t){const r=Te(n);var i;(i=(0,ae.A)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(w,b){const D=Te(w),k=dr(b.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",x=>D.Gr.getBundleMetadata(x,b.id)).then(x=>!!x&&x.createTime.compareTo(k)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(w=u).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);c._updateProgress(W4(u));const f=new Ppe(u,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const E=yield f.la(m);E&&c._updateProgress(E),m=yield a.Ua()}const _=yield f.complete();return yield ka(o,_.Ia,void 0),yield function(w,b){const D=Te(w);return D.persistence.runTransaction("Save bundle","readwrite",k=>D.Gr.saveBundleMetadata(k,b))}(o.localStore,u),c._completeWith(_.progress),Promise.resolve(_.Pa)}catch(u){return Wi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var w}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Age(n,e){return function hge(n,e){return n.asyncQueue.enqueue((0,ae.A)(function*(){return function(r,i){const s=Te(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield ep(n),e)}))}(jn(n=Tt(n,un)),e).then(t=>t?new ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Fi(this,t):null)}}class FC extends mx{constructor(e){super(),this.firestore=e}convertBytes(e){return new J_(new Wo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vs.forKey(t,this.firestore,null)}}class Kq{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FC(e)}get(e){const t=od(e);return this._delegate.get(t).then(r=>new ey(this._firestore,new La(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=od(e);return r?(vx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=od(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=od(e);return this._delegate.delete(t),this}}class Qq{constructor(e){this._delegate=e}set(e,t,r){const i=od(e);return r?(vx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=od(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=od(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new X_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ty(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new sd(e,new FC(e),t),i.set(t,s)),s}}sd.INSTANCES=new WeakMap;class Vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vs(t,new Mn(t._delegate,r,new Re(e)))}static forKey(e,t,r){return new Vs(t,new Mn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ip(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ip(this.firestore,vq(this._delegate,e))}catch(t){throw ki(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.Ku)(e))instanceof Mn&&Eq(this._delegate,e)}set(e,t){t=vx("DocumentReference.set",t);try{return t?Vq(this._delegate,e,t):Vq(this._delegate,e)}catch(r){throw ki(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Uq(this._delegate,e):Uq(this._delegate,e,t,...r)}catch(i){throw ki(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Zge(n){return rp(Tt(n.firestore,un),[new kf(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=Yq(e),r=Zq(e,i=>new ey(this.firestore,new La(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Bq(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qge(n){n=Tt(n,Mn);const e=Tt(n.firestore,un),t=jn(e),r=new dl(e);return function age(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(r=(0,ae.A)(function*(s,o,a){try{const c=yield function(f,m){const _=Te(f);return _.persistence.runTransaction("read document","readonly",E=>_.localDocuments.getDocument(E,m))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new ge(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=Kf(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ep(n),e,t);var r})),t.promise}(t,n._key).then(i=>new La(e,r,n._key,i,new id(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Wge(n){n=Tt(n,Mn);const e=Tt(n.firestore,un);return lq(jn(e),n._key,{source:"server"}).then(t=>_x(e,n,t))}(this._delegate):function Gge(n){n=Tt(n,Mn);const e=Tt(n.firestore,un);return lq(jn(e),n._key).then(t=>_x(e,n,t))}(this._delegate),t.then(r=>new ey(this.firestore,new La(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vs(this.firestore,this._delegate.withConverter(e?sd.getInstance(this.firestore,e):null))}}function ki(n,e,t){return n.message=n.message.replace(e,t),n}function Yq(n){for(const e of n)if("object"==typeof e&&!Ex(e))return e;return{}}function Zq(n,e){var t,r;let i;return i=Ex(n[0])?n[0]:Ex(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ey{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Lq(this._delegate,e._delegate)}}class ty extends ey{data(e){const t=this._delegate.data(e);return this._delegate._converter||function ahe(n){n||ke()}(void 0!==t),t}}class Fi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FC(e)}where(e,t,r){try{return new Fi(this.firestore,ll(this._delegate,function Oge(n,e,t){const r=e,i=PC("where",n);return Z_._create(i,r,t)}(e,t,r)))}catch(i){throw ki(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fi(this.firestore,ll(this._delegate,function kge(n,e="asc"){const t=e,r=PC("orderBy",n);return gx._create(r,t)}(e,t)))}catch(r){throw ki(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fi(this.firestore,ll(this._delegate,function Fge(n){return mq("limit",n),MC._create("limit",n,"F")}(e)))}catch(t){throw ki(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fi(this.firestore,ll(this._delegate,function Lge(n){return mq("limitToLast",n),MC._create("limitToLast",n,"L")}(e)))}catch(t){throw ki(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fi(this.firestore,ll(this._delegate,function Vge(...n){return xC._create("startAt",n,!0)}(...e)))}catch(t){throw ki(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fi(this.firestore,ll(this._delegate,function Uge(...n){return xC._create("startAfter",n,!1)}(...e)))}catch(t){throw ki(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fi(this.firestore,ll(this._delegate,function Bge(...n){return NC._create("endBefore",n,!1)}(...e)))}catch(t){throw ki(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fi(this.firestore,ll(this._delegate,function jge(...n){return NC._create("endAt",n,!0)}(...e)))}catch(t){throw ki(t,"endAt()","Query.endAt()")}}isEqual(e){return sx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Qge(n){n=Tt(n,ni);const e=Tt(n.firestore,un),t=jn(e),r=new dl(e);return function cge(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(r=(0,ae.A)(function*(s,o,a){try{const c=yield dC(s,o,!0),u=new Y4(o,c.Ts),f=u.ma(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){const u=Kf(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ep(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ul(e,r,n,i))}(this._delegate):"server"===e?.source?function Yge(n){n=Tt(n,ni);const e=Tt(n.firestore,un),t=jn(e),r=new dl(e);return uq(t,n._query,{source:"server"}).then(i=>new ul(e,r,n,i))}(this._delegate):function Kge(n){n=Tt(n,ni);const e=Tt(n.firestore,un),t=jn(e),r=new dl(e);return Mq(n._query),uq(t,n._query).then(i=>new ul(e,r,n,i))}(this._delegate),t.then(r=>new Ix(this.firestore,new ul(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Yq(e),r=Zq(e,i=>new Ix(this.firestore,new ul(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Bq(this._delegate,t,r)}withConverter(e){return new Fi(this.firestore,this._delegate.withConverter(e?sd.getInstance(this.firestore,e):null))}}class wme{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ty(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ix{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ty(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wme(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ty(this._firestore,r))})}isEqual(e){return Lq(this._delegate,e._delegate)}}class ip extends Fi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vs(this.firestore,e):null}doc(e){try{return new Vs(this.firestore,void 0===e?CC(this._delegate):CC(this._delegate,e))}catch(t){throw ki(t,"doc()","CollectionReference.doc()")}}add(e){return function Xge(n,e){const t=Tt(n.firestore,un),r=CC(n),i=OC(n.converter,e);return rp(t,[AC(nd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Vs(this.firestore,t))}isEqual(e){return Eq(this._delegate,e._delegate)}withConverter(e){return new ip(this.firestore,this._delegate.withConverter(e?sd.getInstance(this.firestore,e):null))}}function od(n){return Tt(n,Mn)}class wx{constructor(...e){this._delegate=new Fa(...e)}static documentId(){return new wx(Rn.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.Ku)(e))instanceof Fa&&this._delegate._internalPath.isEqual(e._internalPath)}}class ad{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hme(){return new ax("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ad(e)}static delete(){const e=function dme(){return new W_("deleteField")}();return e._methodName="FieldValue.delete",new ad(e)}static arrayUnion(...e){const t=function fme(...n){return new cx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ad(t)}static arrayRemove(...e){const t=function pme(...n){return new lx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ad(t)}static increment(e){const t=function gme(n){return new ux("increment",n)}(e);return t._methodName="FieldValue.increment",new ad(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Cme={Firestore:Wq,GeoPoint:bC,Timestamp:Vn,Blob:J_,Transaction:Kq,WriteBatch:Qq,DocumentReference:Vs,DocumentSnapshot:ey,Query:Fi,QueryDocumentSnapshot:ty,QuerySnapshot:Ix,CollectionReference:ip,FieldPath:wx,FieldValue:ad,setLogLevel:function Ime(n){!function ohe(n){Kc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Xq(n,e){return function Dme(n,e=Su){return new St(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Cx(n,e){return Xq(n,e).pipe(Ce(t=>({payload:t,type:"query"})))}!function Tme(n){(function bme(n,e){n.INTERNAL.registerComponent(new n3.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Cme)))})(n,(e,t)=>new Wq(e,t,new Eme)),n.registerVersion("@firebase/firestore-compat","0.3.36")}(Wc.A);class Jq{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=sW(r,t);return new nW(i,s,this.afs)}snapshotChanges(){return function Ame(n,e){return Xq(n,e).pipe(Zh(void 0),XR(),Ce(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hs)}valueChanges(e={}){return this.snapshotChanges().pipe(Ce(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return Tn(this.ref.get(e)).pipe(hs)}}function LC(n,e){return Cx(n,e).pipe(Zh(void 0),XR(),Ce(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function eW(n,e,t){return LC(n,t).pipe(Xh((r,i)=>function Sme(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Rme(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),QB(),Ce(r=>r.map(i=>({type:i.type,payload:i}))))}function bx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function tW(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class nW{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=LC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ce(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Zh(void 0),XR(),Qn(([r,i])=>i.length>0||!r),Ce(([,r])=>r),hs)}auditTrail(e){return this.stateChanges(e).pipe(Xh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tW(e);return eW(this.query,t,this.afs.schedulers.outsideAngular).pipe(hs)}valueChanges(e={}){return Cx(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),hs)}get(e){return Tn(this.query.get(e)).pipe(hs)}add(e){return this.ref.add(e)}doc(e){return new Jq(this.ref.doc(e),this.afs)}}class Pme{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?LC(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qn(t=>t.length>0),hs):LC(this.query,this.afs.schedulers.outsideAngular).pipe(hs)}auditTrail(e){return this.stateChanges(e).pipe(Xh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tW(e);return eW(this.query,t,this.afs.schedulers.outsideAngular).pipe(hs)}valueChanges(e={}){return Cx(this.query,this.afs.schedulers.outsideAngular).pipe(Ce(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),hs)}get(e){return Tn(this.query.get(e)).pipe(hs)}}const rW=new Y("angularfire2.enableFirestorePersistence"),iW=new Y("angularfire2.firestore.persistenceSettings"),Mme=new Y("angularfire2.firestore.settings"),xme=new Y("angularfire2.firestore.use-emulator");function sW(n,e=t=>t){return{query:e(n),ref:n}}let oW=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,f,m,_,E,w,b,D,k,x){this.schedulers=c;const V=YR(t,a,r),J=f;m&&t3(V,a,_,w,b,D,E,k),[this.firestore,this.persistenceEnabled$]=Gz(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const me=a.runOutsideAngular(()=>V.firestore());if(s&&me.settings(s),J&&me.useEmulator(...J),i&&!yI(o)){const Ee=()=>{try{return Tn(me.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(F){return typeof console<"u"&&console.warn(F),ze(!1)}};return[me,a.runOutsideAngular(Ee)]}return[me,ze(!1)]},[s,J,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=sW(i,r),a=this.schedulers.ngZone.run(()=>s);return new nW(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Pme(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Jq(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(j(Nw),j(Ow,8),j(rW,8),j(Mme,8),j(ss),j(st),j(Hz),j(iW,8),j(xme,8),j(ZR,8),j(Qz,8),j(Yz,8),j(Zz,8),j(Xz,8),j(Jz,8),j(e3,8),j(jz,8))};static \u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Nme=(()=>{class n{constructor(){Wc.A.registerVersion("angularfire",QR.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:rW,useValue:!0},{provide:iW,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=qt({type:n});static \u0275inj=$t({providers:[oW]})}return n})(),Ome=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(o=>{o?(this.userData=o,localStorage.setItem("toDoom-user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("toDoom-user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("toDoom-user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate([""])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("toDoom-user"));return null!==t&&!1!==t.emailVerified}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("toDoom-user"),this.router.navigate(["auth"])})}static#e=this.\u0275fac=function(r){return new(r||n)(j(oW),j(ZR),j(uo),j(st))};static#t=this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kme_firebaseConfig={};let Fme=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n});static#n=this.\u0275inj=$t({providers:[Ome],imports:[vm,nhe.initializeApp(kme_firebaseConfig),Nme]})}return n})(),Lme=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=qt({type:n,bootstrap:[Hie]});static#n=this.\u0275inj=$t({imports:[qte,qB.forRoot([{path:"**",redirectTo:""}]),bj.forRoot({},{}),Ioe.instrument({maxAge:25,logOnly:!0,connectInZone:!0}),Bde,Fme]})}return n})();zte().bootstrapModule(Lme).catch(n=>console.error(n))},345:(Us,kr,pt)=>{pt.d(kr,{A:()=>hr});var A=pt(76),Fe=pt(362),xe=pt(852),ne=pt(41);class Bt{constructor(it,It){this._delegate=it,this.firebase=It,(0,xe._addComponent)(it,new Fe.uA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,xe.deleteApp)(this._delegate)))}_getService(it,It=xe._DEFAULT_ENTRY_NAME){var tr;this._delegate.checkDestroyed();const wr=this._delegate.container.getProvider(it);return!wr.isInitialized()&&"EXPLICIT"===(null===(tr=wr.getComponent())||void 0===tr?void 0:tr.instantiationMode)&&wr.initialize(),wr.getImmediate({identifier:It})}_removeServiceInstance(it,It=xe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(It)}_addComponent(it){(0,xe._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,xe._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const An=new A.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function jt(){const Ut=function Fr(Ut){const it={},It={__esModule:!0,initializeApp:function dn(tt,Nn={}){const _n=xe.initializeApp(tt,Nn);if((0,A.gR)(it,_n.name))return it[_n.name];const pe=new Ut(_n,It);return it[_n.name]=pe,pe},app:wr,registerVersion:xe.registerVersion,setLogLevel:xe.setLogLevel,onLog:xe.onLog,apps:null,SDK_VERSION:xe.SDK_VERSION,INTERNAL:{registerComponent:function Lt(tt){const Nn=tt.name,_n=Nn.replace("-compat","");if(xe._registerComponent(tt)&&"PUBLIC"===tt.type){const pe=(yn=wr())=>{if("function"!=typeof yn[_n])throw An.create("invalid-app-argument",{appName:Nn});return yn[_n]()};void 0!==tt.serviceProps&&(0,A.zw)(pe,tt.serviceProps),It[_n]=pe,Ut.prototype[_n]=function(...yn){return this._getService.bind(this,Nn).apply(this,tt.multipleInstances?yn:[])}}return"PUBLIC"===tt.type?It[_n]:null},removeApp:function tr(tt){delete it[tt]},useAsService:function ii(tt,Nn){return"serverAuth"===Nn?null:Nn},modularAPIs:xe}};function wr(tt){if(!(0,A.gR)(it,tt=tt||xe._DEFAULT_ENTRY_NAME))throw An.create("no-app",{appName:tt});return it[tt]}return It.default=It,Object.defineProperty(It,"apps",{get:function Ft(){return Object.keys(it).map(tt=>it[tt])}}),wr.App=Ut,It}(Bt);return Ut.INTERNAL=Object.assign(Object.assign({},Ut.INTERNAL),{createFirebaseNamespace:jt,extendNamespace:function it(It){(0,A.zw)(Ut,It)},createSubscribe:A.tD,ErrorFactory:A.FA,deepExtend:A.zw}),Ut}(),ve=new ne.Vy("@firebase/app-compat");try{const Ut=(0,A.mS)();if(void 0!==Ut.firebase){ve.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const it=Ut.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&ve.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const hr=fe;!function Rt(Ut){(0,xe.registerVersion)("@firebase/app-compat","0.2.40",Ut)}()},852:(Us,kr,pt)=>{pt.r(kr),pt.d(kr,{FirebaseError:()=>ne.g,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>oi,_addComponent:()=>Lr,_addOrOverwriteComponent:()=>Yo,_apps:()=>bi,_clearComponents:()=>Vr,_components:()=>ai,_getProvider:()=>$s,_isFirebaseApp:()=>vs,_isFirebaseServerApp:()=>El,_registerComponent:()=>ys,_removeServiceInstance:()=>Hs,_serverApps:()=>Yi,deleteApp:()=>fo,getApp:()=>Jo,getApps:()=>St,initializeApp:()=>Ur,initializeServerApp:()=>Il,onLog:()=>M,registerVersion:()=>N,setLogLevel:()=>R});var A=pt(467),Fe=pt(362),xe=pt(41),ne=pt(76);const Bt=(X,H)=>H.some(le=>X instanceof le);let Be,An;const fe=new WeakMap,ve=new WeakMap,Ue=new WeakMap,Et=new WeakMap,Rt=new WeakMap;let it={get(X,H,le){if(X instanceof IDBTransaction){if("done"===H)return ve.get(X);if("objectStoreNames"===H)return X.objectStoreNames||Ue.get(X);if("store"===H)return le.objectStoreNames[1]?void 0:le.objectStore(le.objectStoreNames[0])}return dn(X[H])},set:(X,H,le)=>(X[H]=le,!0),has:(X,H)=>X instanceof IDBTransaction&&("done"===H||"store"===H)||H in X};function wr(X){return"function"==typeof X?function tr(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jt(){return An||(An=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...H){return X.apply(Ft(this),H),dn(fe.get(this))}:function(...H){return dn(X.apply(Ft(this),H))}:function(H,...le){const Se=X.call(Ft(this),H,...le);return Ue.set(Se,H.sort?H.sort():[H]),dn(Se)}}(X):(X instanceof IDBTransaction&&function Ut(X){if(ve.has(X))return;const H=new Promise((le,Se)=>{const nt=()=>{X.removeEventListener("complete",ut),X.removeEventListener("error",Ct),X.removeEventListener("abort",Ct)},ut=()=>{le(),nt()},Ct=()=>{Se(X.error||new DOMException("AbortError","AbortError")),nt()};X.addEventListener("complete",ut),X.addEventListener("error",Ct),X.addEventListener("abort",Ct)});ve.set(X,H)}(X),Bt(X,function Fr(){return Be||(Be=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,it):X)}function dn(X){if(X instanceof IDBRequest)return function hr(X){const H=new Promise((le,Se)=>{const nt=()=>{X.removeEventListener("success",ut),X.removeEventListener("error",Ct)},ut=()=>{le(dn(X.result)),nt()},Ct=()=>{Se(X.error),nt()};X.addEventListener("success",ut),X.addEventListener("error",Ct)});return H.then(le=>{le instanceof IDBCursor&&fe.set(le,X)}).catch(()=>{}),Rt.set(H,X),H}(X);if(Et.has(X))return Et.get(X);const H=wr(X);return H!==X&&(Et.set(X,H),Rt.set(H,X)),H}const Ft=X=>Rt.get(X),tt=["get","getKey","getAll","getAllKeys","count"],Nn=["put","add","delete","clear"],_n=new Map;function pe(X,H){if(!(X instanceof IDBDatabase)||H in X||"string"!=typeof H)return;if(_n.get(H))return _n.get(H);const le=H.replace(/FromIndex$/,""),Se=H!==le,nt=Nn.includes(le);if(!(le in(Se?IDBIndex:IDBObjectStore).prototype)||!nt&&!tt.includes(le))return;const ut=function(){var Ct=(0,A.A)(function*(hn,...dt){const Ui=this.transaction(hn,nt?"readwrite":"readonly");let ra=Ui.store;return Se&&(ra=ra.index(dt.shift())),(yield Promise.all([ra[le](...dt),nt&&Ui.done]))[0]});return function(dt){return Ct.apply(this,arguments)}}();return _n.set(H,ut),ut}!function It(X){it=X(it)}(X=>({...X,get:(H,le,Se)=>pe(H,le)||X.get(H,le,Se),has:(H,le)=>!!pe(H,le)||X.has(H,le)}));class yn{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(le=>{if(function $n(X){const H=X.getComponent();return"VERSION"===H?.type}(le)){const Se=le.getImmediate();return`${Se.library}/${Se.version}`}return null}).filter(le=>le).join(" ")}}const si="@firebase/app",ms="0.10.10",Cr=new xe.Vy("@firebase/app"),Ko="@firebase/app-compat",_l="@firebase/analytics-compat",Q="@firebase/analytics",ee="@firebase/app-check-compat",oe="@firebase/app-check",de="@firebase/auth",we="@firebase/auth-compat",ue="@firebase/database",Ae="@firebase/database-compat",Dt="@firebase/functions",On="@firebase/functions-compat",Je="@firebase/installations",At="@firebase/installations-compat",Jt="@firebase/messaging",_s="@firebase/messaging-compat",je="@firebase/performance",Hn="@firebase/performance-compat",kn="@firebase/remote-config",nr="@firebase/remote-config-compat",gt="@firebase/storage",Qo="@firebase/storage-compat",yl="@firebase/firestore",Bs="@firebase/vertexai-preview",Ci="@firebase/firestore-compat",js="firebase",oi="[DEFAULT]",vl={[si]:"fire-core",[Ko]:"fire-core-compat",[Q]:"fire-analytics",[_l]:"fire-analytics-compat",[oe]:"fire-app-check",[ee]:"fire-app-check-compat",[de]:"fire-auth",[we]:"fire-auth-compat",[ue]:"fire-rtdb",[Ae]:"fire-rtdb-compat",[Dt]:"fire-fn",[On]:"fire-fn-compat",[Je]:"fire-iid",[At]:"fire-iid-compat",[Jt]:"fire-fcm",[_s]:"fire-fcm-compat",[je]:"fire-perf",[Hn]:"fire-perf-compat",[kn]:"fire-rc",[nr]:"fire-rc-compat",[gt]:"fire-gcs",[Qo]:"fire-gcs-compat",[yl]:"fire-fst",[Ci]:"fire-fst-compat",[Bs]:"fire-vertex","fire-js":"fire-js",[js]:"fire-js-all"},bi=new Map,Yi=new Map,ai=new Map;function Lr(X,H){try{X.container.addComponent(H)}catch(le){Cr.debug(`Component ${H.name} failed to register with FirebaseApp ${X.name}`,le)}}function Yo(X,H){X.container.addOrOverwriteComponent(H)}function ys(X){const H=X.name;if(ai.has(H))return Cr.debug(`There were multiple attempts to register component ${H}.`),!1;ai.set(H,X);for(const le of bi.values())Lr(le,X);for(const le of Yi.values())Lr(le,X);return!0}function $s(X,H){const le=X.container.getProvider("heartbeat").getImmediate({optional:!0});return le&&le.triggerHeartbeat(),X.container.getProvider(H)}function Hs(X,H,le=oi){$s(X,H).clearInstance(le)}function vs(X){return void 0!==X.options}function El(X){return void 0!==X.settings}function Vr(){ai.clear()}const qr=new ne.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Zo{constructor(H,le,Se){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},le),this._name=le.name,this._automaticDataCollectionEnabled=le.automaticDataCollectionEnabled,this._container=Se,this.container.addComponent(new Fe.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}class Xo extends Zo{constructor(H,le,Se,nt){const ut=void 0!==le.automaticDataCollectionEnabled&&le.automaticDataCollectionEnabled,Ct={name:Se,automaticDataCollectionEnabled:ut};super(void 0!==H.apiKey?H:H.options,Ct,nt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ut},le),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,le.releaseOnDeref=void 0,N(si,ms,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(H){this.isDeleted||(this._refCount++,void 0!==H&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(H,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){fo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw qr.create("server-app-deleted")}}const Zi="10.13.1";function Ur(X,H={}){let le=X;"object"!=typeof H&&(H={name:H});const Se=Object.assign({name:oi,automaticDataCollectionEnabled:!1},H),nt=Se.name;if("string"!=typeof nt||!nt)throw qr.create("bad-app-name",{appName:String(nt)});if(le||(le=(0,ne.T9)()),!le)throw qr.create("no-options");const ut=bi.get(nt);if(ut){if((0,ne.bD)(le,ut.options)&&(0,ne.bD)(Se,ut.config))return ut;throw qr.create("duplicate-app",{appName:nt})}const Ct=new Fe.h1(nt);for(const dt of ai.values())Ct.addComponent(dt);const hn=new Zo(le,Se,Ct);return bi.set(nt,hn),hn}function Il(X,H){if((0,ne.Bd)()&&!(0,ne.p7)())throw qr.create("invalid-server-app-environment");let le;void 0===H.automaticDataCollectionEnabled&&(H.automaticDataCollectionEnabled=!1),le=vs(X)?X.options:X;const Se=Object.assign(Object.assign({},H),le);if(void 0!==Se.releaseOnDeref&&delete Se.releaseOnDeref,void 0!==H.releaseOnDeref&&typeof FinalizationRegistry>"u")throw qr.create("finalization-registry-not-supported",{});const ut=""+(Ui=JSON.stringify(Se),[...Ui].reduce((ra,en)=>Math.imul(31,ra)+en.charCodeAt(0)|0,0)),Ct=Yi.get(ut);var Ui;if(Ct)return Ct.incRefCount(H.releaseOnDeref),Ct;const hn=new Fe.h1(ut);for(const Ui of ai.values())hn.addComponent(Ui);const dt=new Xo(le,H,ut,hn);return Yi.set(ut,dt),dt}function Jo(X=oi){const H=bi.get(X);if(!H&&X===oi&&(0,ne.T9)())return Ur();if(!H)throw qr.create("no-app",{appName:X});return H}function St(){return Array.from(bi.values())}function fo(X){return ea.apply(this,arguments)}function ea(){return(ea=(0,A.A)(function*(X){let H=!1;const le=X.name;bi.has(le)?(H=!0,bi.delete(le)):Yi.has(le)&&X.decRefCount()<=0&&(Yi.delete(le),H=!0),H&&(yield Promise.all(X.container.getProviders().map(Se=>Se.delete())),X.isDeleted=!0)})).apply(this,arguments)}function N(X,H,le){var Se;let nt=null!==(Se=vl[X])&&void 0!==Se?Se:X;le&&(nt+=`-${le}`);const ut=nt.match(/\s|\//),Ct=H.match(/\s|\//);if(ut||Ct){const hn=[`Unable to register library "${nt}" with version "${H}":`];return ut&&hn.push(`library name "${nt}" contains illegal characters (whitespace or "/")`),ut&&Ct&&hn.push("and"),Ct&&hn.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void Cr.warn(hn.join(" "))}ys(new Fe.uA(`${nt}-version`,()=>({library:nt,version:H}),"VERSION"))}function M(X,H){if(null!==X&&"function"!=typeof X)throw qr.create("invalid-log-argument");(0,xe.Ey)(X,H)}function R(X){(0,xe.He)(X)}const ce="firebase-heartbeat-database",$=1,Pe="firebase-heartbeat-store";let Ne=null;function Le(){return Ne||(Ne=function Lt(X,H,{blocked:le,upgrade:Se,blocking:nt,terminated:ut}={}){const Ct=indexedDB.open(X,H),hn=dn(Ct);return Se&&Ct.addEventListener("upgradeneeded",dt=>{Se(dn(Ct.result),dt.oldVersion,dt.newVersion,dn(Ct.transaction),dt)}),le&&Ct.addEventListener("blocked",dt=>le(dt.oldVersion,dt.newVersion,dt)),hn.then(dt=>{ut&&dt.addEventListener("close",()=>ut()),nt&&dt.addEventListener("versionchange",Ui=>nt(Ui.oldVersion,Ui.newVersion,Ui))}).catch(()=>{}),hn}(ce,$,{upgrade:(X,H)=>{if(0===H)try{X.createObjectStore(Pe)}catch(le){console.warn(le)}}}).catch(X=>{throw qr.create("idb-open",{originalErrorMessage:X.message})})),Ne}function Ce(){return(Ce=(0,A.A)(function*(X){try{const le=(yield Le()).transaction(Pe),Se=yield le.objectStore(Pe).get(Br(X));return yield le.done,Se}catch(H){if(H instanceof ne.g)Cr.warn(H.message);else{const le=qr.create("idb-get",{originalErrorMessage:H?.message});Cr.warn(le.message)}}})).apply(this,arguments)}function rr(X,H){return lt.apply(this,arguments)}function lt(){return(lt=(0,A.A)(function*(X,H){try{const Se=(yield Le()).transaction(Pe,"readwrite");yield Se.objectStore(Pe).put(H,Br(X)),yield Se.done}catch(le){if(le instanceof ne.g)Cr.warn(le.message);else{const Se=qr.create("idb-set",{originalErrorMessage:le?.message});Cr.warn(Se.message)}}})).apply(this,arguments)}function Br(X){return`${X.name}!${X.options.appId}`}class $a{constructor(H){this.container=H,this._heartbeatsCache=null;const le=this.container.getProvider("app").getImmediate();this._storage=new lp(le),this._heartbeatsCachePromise=this._storage.read().then(Se=>(this._heartbeatsCache=Se,Se))}triggerHeartbeat(){var H=this;return(0,A.A)(function*(){var le,Se;try{const ut=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=wl();return null==(null===(le=H._heartbeatsCache)||void 0===le?void 0:le.heartbeats)&&(H._heartbeatsCache=yield H._heartbeatsCachePromise,null==(null===(Se=H._heartbeatsCache)||void 0===Se?void 0:Se.heartbeats))||H._heartbeatsCache.lastSentHeartbeatDate===Ct||H._heartbeatsCache.heartbeats.some(hn=>hn.date===Ct)?void 0:(H._heartbeatsCache.heartbeats.push({date:Ct,agent:ut}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(hn=>{const dt=new Date(hn.date).valueOf();return Date.now()-dt<=2592e6}),H._storage.overwrite(H._heartbeatsCache))}catch(nt){Cr.warn(nt)}})()}getHeartbeatsHeader(){var H=this;return(0,A.A)(function*(){var le;try{if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null==(null===(le=H._heartbeatsCache)||void 0===le?void 0:le.heartbeats)||0===H._heartbeatsCache.heartbeats.length)return"";const Se=wl(),{heartbeatsToSend:nt,unsentEntries:ut}=function na(X,H=1024){const le=[];let Se=X.slice();for(const nt of X){const ut=le.find(Ct=>Ct.agent===nt.agent);if(ut){if(ut.dates.push(nt.date),Ge(le)>H){ut.dates.pop();break}}else if(le.push({agent:nt.agent,dates:[nt.date]}),Ge(le)>H){le.pop();break}Se=Se.slice(1)}return{heartbeatsToSend:le,unsentEntries:Se}}(H._heartbeatsCache.heartbeats),Ct=(0,ne.Uj)(JSON.stringify({version:2,heartbeats:nt}));return H._heartbeatsCache.lastSentHeartbeatDate=Se,ut.length>0?(H._heartbeatsCache.heartbeats=ut,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),Ct}catch(Se){return Cr.warn(Se),""}})()}}function wl(){return(new Date).toISOString().substring(0,10)}class lp{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,A.A)(function*(){return!!(0,ne.zW)()&&(0,ne.eX)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,A.A)(function*(){if(yield H._canUseIndexedDBPromise){const Se=yield function ci(X){return Ce.apply(this,arguments)}(H.app);return Se?.heartbeats?Se:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(H){var le=this;return(0,A.A)(function*(){var Se;if(yield le._canUseIndexedDBPromise){const ut=yield le.read();return rr(le.app,{lastSentHeartbeatDate:null!==(Se=H.lastSentHeartbeatDate)&&void 0!==Se?Se:ut.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var le=this;return(0,A.A)(function*(){var Se;if(yield le._canUseIndexedDBPromise){const ut=yield le.read();return rr(le.app,{lastSentHeartbeatDate:null!==(Se=H.lastSentHeartbeatDate)&&void 0!==Se?Se:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...H.heartbeats]})}})()}}function Ge(X){return(0,ne.Uj)(JSON.stringify({version:2,heartbeats:X})).length}!function Ha(X){ys(new Fe.uA("platform-logger",H=>new yn(H),"PRIVATE")),ys(new Fe.uA("heartbeat",H=>new $a(H),"PRIVATE")),N(si,ms,X),N(si,ms,"esm2017"),N("fire-js","")}("")},362:(Us,kr,pt)=>{pt.d(kr,{h1:()=>Fr,uA:()=>xe});var A=pt(467),Fe=pt(76);class xe{constructor(fe,ve,Ue){this.name=fe,this.instanceFactory=ve,this.type=Ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const ne="[DEFAULT]";class Bt{constructor(fe,ve){this.name=fe,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const ve=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(ve)){const Ue=new Fe.cY;if(this.instancesDeferred.set(ve,Ue),this.isInitialized(ve)||this.shouldAutoInitialize())try{const Et=this.getOrInitializeService({instanceIdentifier:ve});Et&&Ue.resolve(Et)}catch{}}return this.instancesDeferred.get(ve).promise}getImmediate(fe){var ve;const Ue=this.normalizeInstanceIdentifier(fe?.identifier),Et=null!==(ve=fe?.optional)&&void 0!==ve&&ve;if(!this.isInitialized(Ue)&&!this.shouldAutoInitialize()){if(Et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ue})}catch(Rt){if(Et)return null;throw Rt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function An(jt){return"EAGER"===jt.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[ve,Ue]of this.instancesDeferred.entries()){const Et=this.normalizeInstanceIdentifier(ve);try{const Rt=this.getOrInitializeService({instanceIdentifier:Et});Ue.resolve(Rt)}catch{}}}}clearInstance(fe=ne){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,A.A)(function*(){const ve=Array.from(fe.instances.values());yield Promise.all([...ve.filter(Ue=>"INTERNAL"in Ue).map(Ue=>Ue.INTERNAL.delete()),...ve.filter(Ue=>"_delete"in Ue).map(Ue=>Ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=ne){return this.instances.has(fe)}getOptions(fe=ne){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:ve={}}=fe,Ue=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Ue))throw Error(`${this.name}(${Ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Et=this.getOrInitializeService({instanceIdentifier:Ue,options:ve});for(const[Rt,hr]of this.instancesDeferred.entries())Ue===this.normalizeInstanceIdentifier(Rt)&&hr.resolve(Et);return Et}onInit(fe,ve){var Ue;const Et=this.normalizeInstanceIdentifier(ve),Rt=null!==(Ue=this.onInitCallbacks.get(Et))&&void 0!==Ue?Ue:new Set;Rt.add(fe),this.onInitCallbacks.set(Et,Rt);const hr=this.instances.get(Et);return hr&&fe(hr,Et),()=>{Rt.delete(fe)}}invokeOnInitCallbacks(fe,ve){const Ue=this.onInitCallbacks.get(ve);if(Ue)for(const Et of Ue)try{Et(fe,ve)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:ve={}}){let Ue=this.instances.get(fe);if(!Ue&&this.component&&(Ue=this.component.instanceFactory(this.container,{instanceIdentifier:(jt=fe,jt===ne?void 0:jt),options:ve}),this.instances.set(fe,Ue),this.instancesOptions.set(fe,ve),this.invokeOnInitCallbacks(Ue,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Ue)}catch{}var jt;return Ue||null}normalizeInstanceIdentifier(fe=ne){return this.component?this.component.multipleInstances?fe:ne:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fr{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const ve=this.getProvider(fe.name);if(ve.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);ve.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const ve=new Bt(fe,this);return this.providers.set(fe,ve),ve}getProviders(){return Array.from(this.providers.values())}}},41:(Us,kr,pt)=>{pt.d(kr,{$b:()=>Fe,Ey:()=>jt,He:()=>Fr,Vy:()=>An});const A=[];var Fe=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(Fe||{});const xe={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},ne=Fe.INFO,Bt={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Be=(fe,ve,...Ue)=>{if(ve<fe.logLevel)return;const Et=(new Date).toISOString(),Rt=Bt[ve];if(!Rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[Rt](`[${Et}]  ${fe.name}:`,...Ue)};class An{constructor(ve){this.name=ve,this._logLevel=ne,this._logHandler=Be,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in Fe))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?xe[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...ve),this._logHandler(this,Fe.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...ve),this._logHandler(this,Fe.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...ve),this._logHandler(this,Fe.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...ve),this._logHandler(this,Fe.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...ve),this._logHandler(this,Fe.ERROR,...ve)}}function Fr(fe){A.forEach(ve=>{ve.setLogLevel(fe)})}function jt(fe,ve){for(const Ue of A){let Et=null;ve&&ve.level&&(Et=xe[ve.level]),Ue.userLogHandler=null===fe?null:(Rt,hr,...Ut)=>{const it=Ut.map(It=>{if(null==It)return null;if("string"==typeof It)return It;if("number"==typeof It||"boolean"==typeof It)return It.toString();if(It instanceof Error)return It.message;try{return JSON.stringify(It)}catch{return null}}).filter(It=>It).join(" ");hr>=(Et??Rt.logLevel)&&fe({level:Fe[hr].toLowerCase(),message:it,args:Ut,type:Rt.name})}}}},200:(Us,kr,pt)=>{var A=pt(467),Fe=pt(345),xe=pt(852),ne=pt(76),Bt=pt(41),Be=pt(635),An=pt(362);const jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const hr=function Et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ut=function Rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new ne.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tr=new Bt.Vy("@firebase/auth");function dn(p,...l){tr.logLevel<=Bt.$b.ERROR&&tr.error(`Auth (${xe.SDK_VERSION}): ${p}`,...l)}function Ft(p,...l){throw _n(p,...l)}function Lt(p,...l){return _n(p,...l)}function ii(p,l,d){const g=Object.assign(Object.assign({},Ut()),{[l]:d});return new ne.FA("auth","Firebase",g).create(l,{appName:p.name})}function tt(p){return ii(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nn(p,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&Ft(p,"argument-error"),ii(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _n(p,...l){if("string"!=typeof p){const d=l[0],g=[...l.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return it.create(p,...l)}function pe(p,l,...d){if(!p)throw _n(l,...d)}function yn(p){const l="INTERNAL ASSERTION FAILED: "+p;throw dn(l),new Error(l)}function $n(p,l){p||yn(l)}function si(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ms(){return"http:"===Cr()||"https:"===Cr()}function Cr(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Q{constructor(l,d){this.shortDelay=l,this.longDelay=d,$n(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,ne.jZ)()||(0,ne.lV)()}get(){return function Ko(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ms()||(0,ne.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ee(p,l){$n(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class oe{static initialize(l,d,g){this.fetchImpl=l,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new Q(3e4,6e4);function ue(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function Ae(p,l,d,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,A.A)(function*(p,l,d,g,v={}){return On(p,v,(0,A.A)(function*(){let C={},P={};g&&("GET"===l?P=g:C={body:JSON.stringify(g)});const B=(0,ne.Am)(Object.assign({key:p.config.apiKey},P)).slice(1),se=yield p._getAdditionalHeaders();return se["Content-Type"]="application/json",p.languageCode&&(se["X-Firebase-Locale"]=p.languageCode),oe.fetch()(_s(p,p.config.apiHost,d,B),Object.assign({method:l,headers:se,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function On(p,l,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,A.A)(function*(p,l,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},de),l);try{const v=new Hn(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const P=yield C.json();if("needConfirmation"in P)throw kn(p,"account-exists-with-different-credential",P);if(C.ok&&!("errorMessage"in P))return P;{const B=C.ok?P.errorMessage:P.error.message,[se,be]=B.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===se)throw kn(p,"credential-already-in-use",P);if("EMAIL_EXISTS"===se)throw kn(p,"email-already-in-use",P);if("USER_DISABLED"===se)throw kn(p,"user-disabled",P);const Me=g[se]||se.toLowerCase().replace(/[_\s]+/g,"-");if(be)throw ii(p,Me,be);Ft(p,Me)}}catch(v){if(v instanceof ne.g)throw v;Ft(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function At(p,l,d,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,A.A)(function*(p,l,d,g,v={}){const C=yield Ae(p,l,d,g,v);return"mfaPendingCredential"in C&&Ft(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function _s(p,l,d,g){const v=`${l}${d}?${g}`;return p.config.emulator?ee(p.config,v):`${p.config.apiScheme}://${v}`}function je(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Lt(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(p,l,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Lt(p,l,g);return v.customData._tokenResponse=d,v}function nr(p){return void 0!==p&&void 0!==p.getResponse}function gt(p){return void 0!==p&&void 0!==p.enterprise}class Qo{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return je(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Bs(){return(Bs=(0,A.A)(function*(p){return(yield Ae(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ci(p,l){return js.apply(this,arguments)}function js(){return(js=(0,A.A)(function*(p,l){return Ae(p,"GET","/v2/recaptchaConfig",ue(p,l))})).apply(this,arguments)}function oi(){return(oi=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function bi(){return(bi=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Yi(p,l){return ai.apply(this,arguments)}function ai(){return(ai=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function Lr(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function $s(){return($s=(0,A.A)(function*(p,l=!1){const d=(0,ne.Ku)(p),g=yield d.getIdToken(l),v=vs(g);pe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,P=C?.sign_in_provider;return{claims:v,token:g,authTime:Lr(Hs(v.auth_time)),issuedAtTime:Lr(Hs(v.iat)),expirationTime:Lr(Hs(v.exp)),signInProvider:P||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function Hs(p){return 1e3*Number(p)}function vs(p){const[l,d,g]=p.split(".");if(void 0===l||void 0===d||void 0===g)return dn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,ne.u)(d);return v?JSON.parse(v):(dn("Failed to decode base64 JWT payload"),null)}catch(v){return dn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function El(p){const l=vs(p);return pe(l,"internal-error"),pe(typeof l.exp<"u","internal-error"),pe(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function Vr(p,l){return zs.apply(this,arguments)}function zs(){return(zs=(0,A.A)(function*(p,l,d=!1){if(d)return l;try{return yield l}catch(g){throw g instanceof ne.g&&function qr({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Zo{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(l);this.timerId=setTimeout((0,A.A)(function*(){yield d.iteration()}),g)}iteration(){var l=this;return(0,A.A)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class Xo{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zi(p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,A.A)(function*(p){var l;const d=p.auth,g=yield p.getIdToken(),v=yield Vr(p,Yi(d,{idToken:g}));pe(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const P=null!==(l=C.providerUserInfo)&&void 0!==l&&l.length?fo(C.providerUserInfo):[],B=function St(p,l){return[...p.filter(g=>!l.some(v=>v.providerId===g.providerId)),...l]}(p.providerData,P),Me=!!p.isAnonymous&&!(p.email&&C.passwordHash||B?.length),Oe={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:B,metadata:new Xo(C.createdAt,C.lastLoginAt),isAnonymous:Me};Object.assign(p,Oe)})).apply(this,arguments)}function Jo(){return(Jo=(0,A.A)(function*(p){const l=(0,ne.Ku)(p);yield Zi(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function fo(p){return p.map(l=>{var{providerId:d}=l,g=(0,Be.Tt)(l,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function N(){return(N=(0,A.A)(function*(p,l){const d=yield On(p,{},(0,A.A)(function*(){const g=(0,ne.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,P=_s(p,v,"/v1/token",`key=${C}`),B=yield p._getAdditionalHeaders();return B["Content-Type"]="application/x-www-form-urlencoded",oe.fetch()(P,{method:"POST",headers:B,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function R(){return(R=(0,A.A)(function*(p,l){return Ae(p,"POST","/v2/accounts:revokeToken",ue(p,l))})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){pe(l.idToken,"internal-error"),pe(typeof l.idToken<"u","internal-error"),pe(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):El(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){pe(0!==l.length,"internal-error");const d=El(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var g=this;return(0,A.A)(function*(){return d||!g.accessToken||g.isExpired?(pe(g.refreshToken,l,"user-token-expired"),g.refreshToken?(yield g.refresh(l,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var g=this;return(0,A.A)(function*(){const{accessToken:v,refreshToken:C,expiresIn:P}=yield function ea(p,l){return N.apply(this,arguments)}(l,d);g.updateTokensAndExpiration(v,C,Number(P))})()}updateTokensAndExpiration(l,d,g){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(l,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,P=new ce;return g&&(pe("string"==typeof g,"internal-error",{appName:l}),P.refreshToken=g),v&&(pe("string"==typeof v,"internal-error",{appName:l}),P.accessToken=v),C&&(pe("number"==typeof C,"internal-error",{appName:l}),P.expirationTime=C),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return yn("not implemented")}}function $(p,l){pe("string"==typeof p||typeof p>"u","internal-error",{appName:l})}class Pe{constructor(l){var{uid:d,auth:g,stsTokenManager:v}=l,C=(0,Be.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new Xo(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,A.A)(function*(){const g=yield Vr(d,d.stsTokenManager.getToken(d.auth,l));return pe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(l){return function ys(p){return $s.apply(this,arguments)}(this,l)}reload(){return function Il(p){return Jo.apply(this,arguments)}(this)}_assign(l){this!==l&&(pe(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new Pe(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var g=this;return(0,A.A)(function*(){let v=!1;l.idToken&&l.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(l),v=!0),d&&(yield Zi(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var l=this;return(0,A.A)(function*(){if((0,xe._isFirebaseServerApp)(l.auth.app))return Promise.reject(tt(l.auth));const d=yield l.getIdToken();return yield Vr(l,function ja(p,l){return oi.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var g,v,C,P,B,se,be,Me;const Oe=null!==(g=d.displayName)&&void 0!==g?g:void 0,Sn=null!==(v=d.email)&&void 0!==v?v:void 0,is=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,th=null!==(P=d.photoURL)&&void 0!==P?P:void 0,xv=null!==(B=d.tenantId)&&void 0!==B?B:void 0,re=null!==(se=d._redirectEventId)&&void 0!==se?se:void 0,mt=null!==(be=d.createdAt)&&void 0!==be?be:void 0,fn=null!==(Me=d.lastLoginAt)&&void 0!==Me?Me:void 0,{uid:an,emailVerified:Ht,isAnonymous:lg,providerData:fa,stsTokenManager:Hi}=d;pe(an&&Hi,l,"internal-error");const ug=ce.fromJSON(this.name,Hi);pe("string"==typeof an,l,"internal-error"),$(Oe,l.name),$(Sn,l.name),pe("boolean"==typeof Ht,l,"internal-error"),pe("boolean"==typeof lg,l,"internal-error"),$(is,l.name),$(th,l.name),$(xv,l.name),$(re,l.name),$(mt,l.name),$(fn,l.name);const Xl=new Pe({uid:an,auth:l,email:Sn,emailVerified:Ht,displayName:Oe,isAnonymous:lg,photoURL:th,phoneNumber:is,tenantId:xv,stsTokenManager:ug,createdAt:mt,lastLoginAt:fn});return fa&&Array.isArray(fa)&&(Xl.providerData=fa.map(Nv=>Object.assign({},Nv))),re&&(Xl._redirectEventId=re),Xl}static _fromIdTokenResponse(l,d,g=!1){return(0,A.A)(function*(){const v=new ce;v.updateFromServerResponse(d);const C=new Pe({uid:d.localId,auth:l,stsTokenManager:v,isAnonymous:g});return yield Zi(C),C})()}static _fromGetAccountInfoResponse(l,d,g){return(0,A.A)(function*(){const v=d.users[0];pe(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?fo(v.providerUserInfo):[],P=!(v.email&&v.passwordHash||C?.length),B=new ce;B.updateFromIdToken(g);const se=new Pe({uid:v.localId,auth:l,stsTokenManager:B,isAnonymous:P}),be={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new Xo(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(se,be),se})()}}const Ne=new Map;function Le(p){$n(p instanceof Function,"Expected a class definition");let l=Ne.get(p);return l?($n(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,Ne.set(p,l),l)}const Ce=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,A.A)(function*(){return!0})()}_set(d,g){var v=this;return(0,A.A)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,A.A)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,A.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function rr(p,l,d){return`firebase:${p}:${l}:${d}`}class lt{constructor(l,d,g){this.persistence=l,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=rr(this.userKey,v.apiKey,C),this.fullPersistenceKey=rr("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,A.A)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?Pe._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,A.A)(function*(){if(d.persistence===l)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,g="authUser"){return(0,A.A)(function*(){if(!d.length)return new lt(Le(Ce),l,g);const v=(yield Promise.all(d.map(function(){var be=(0,A.A)(function*(Me){if(yield Me._isAvailable())return Me});return function(Me){return be.apply(this,arguments)}}()))).filter(be=>be);let C=v[0]||Le(Ce);const P=rr(g,l.config.apiKey,l.name);let B=null;for(const be of d)try{const Me=yield be._get(P);if(Me){const Oe=Pe._fromJSON(l,Me);be!==C&&(B=Oe),C=be;break}}catch{}const se=v.filter(be=>be._shouldAllowMigration);return C._shouldAllowMigration&&se.length?(C=se[0],B&&(yield C._set(P,B.toJSON())),yield Promise.all(d.map(function(){var be=(0,A.A)(function*(Me){if(Me!==C)try{yield Me._remove(P)}catch{}});return function(Me){return be.apply(this,arguments)}}())),new lt(C,l,g)):new lt(C,l,g)})()}}function Br(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(wl(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Es(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(lp(l))return"Blackberry";if(Ge(l))return"Webos";if(ta(l))return"Safari";if((l.includes("chrome/")||$a(l))&&!l.includes("edge/"))return"Chrome";if(na(l))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Es(p=(0,ne.ZQ)()){return/firefox\//i.test(p)}function ta(p=(0,ne.ZQ)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function $a(p=(0,ne.ZQ)()){return/crios\//i.test(p)}function wl(p=(0,ne.ZQ)()){return/iemobile/i.test(p)}function na(p=(0,ne.ZQ)()){return/android/i.test(p)}function lp(p=(0,ne.ZQ)()){return/blackberry/i.test(p)}function Ge(p=(0,ne.ZQ)()){return/webos/i.test(p)}function Ha(p=(0,ne.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Se(p=(0,ne.ZQ)()){return Ha(p)||na(p)||Ge(p)||lp(p)||/windows phone/i.test(p)||wl(p)}function nt(p,l=[]){let d;switch(p){case"Browser":d=Br((0,ne.ZQ)());break;case"Worker":d=`${Br((0,ne.ZQ)())}-${p}`;break;default:d=p}const g=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${xe.SDK_VERSION}/${g}`}class ut{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const g=C=>new Promise((P,B)=>{try{P(l(C))}catch(se){B(se)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,A.A)(function*(){if(d.auth.currentUser===l)return;const g=[];try{for(const v of d.queue)yield v(l),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function hn(){return(hn=(0,A.A)(function*(p,l={}){return Ae(p,"GET","/v2/passwordPolicy",ue(p,l))})).apply(this,arguments)}class Ui{constructor(l){var d,g,v,C;const P=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=P.minPasswordLength)&&void 0!==d?d:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=l.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=l.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,g,v,C,P,B;const se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,se),this.validatePasswordCharacterOptions(l,se),se.isValid&&(se.isValid=null===(d=se.meetsMinPasswordLength)||void 0===d||d),se.isValid&&(se.isValid=null===(g=se.meetsMaxPasswordLength)||void 0===g||g),se.isValid&&(se.isValid=null===(v=se.containsLowercaseLetter)||void 0===v||v),se.isValid&&(se.isValid=null===(C=se.containsUppercaseLetter)||void 0===C||C),se.isValid&&(se.isValid=null===(P=se.containsNumericCharacter)||void 0===P||P),se.isValid&&(se.isValid=null===(B=se.containsNonAlphanumericCharacter)||void 0===B||B),se}validatePasswordLengthOptions(l,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=l.length>=g),v&&(d.meetsMaxPasswordLength=l.length<=v)}validatePasswordCharacterOptions(l,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<l.length;v++)g=l.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(l,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=C))}}class ra{constructor(l,d,g,v){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tb(this),this.idTokenSubscription=new tb(this),this.beforeStateQueue=new ut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,d){var g=this;return d&&(this._popupRedirectResolver=Le(d)),this._initializationPromise=this.queue((0,A.A)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield lt.create(g,l),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,A.A)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,A.A)(function*(){try{const g=yield Yi(d,{idToken:l}),v=yield Pe._fromGetAccountInfoResponse(d,g,l);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,A.A)(function*(){var g;if((0,xe._isFirebaseServerApp)(d.app)){const B=d.app.settings.authIdToken;return B?new Promise(se=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(B).then(se,se))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,P=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const B=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,se=C?._redirectEventId,be=yield d.tryRedirectSignIn(l);(!B||B===se)&&be?.user&&(C=be.user,P=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(P)try{yield d.beforeStateQueue.runMiddleware(C)}catch(B){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(B))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return pe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(l){var d=this;return(0,A.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,A.A)(function*(){try{yield Zi(l)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function _l(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,A.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,A.A)(function*(){if((0,xe._isFirebaseServerApp)(d.app))return Promise.reject(tt(d));const g=l?(0,ne.Ku)(l):null;return g&&pe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(l,d=!1){var g=this;return(0,A.A)(function*(){if(!g._deleted)return l&&pe(g.tenantId===l.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(l)),g.queue((0,A.A)(function*(){yield g.directlySetCurrentUser(l),g.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,A.A)(function*(){return(0,xe._isFirebaseServerApp)(l.app)?Promise.reject(tt(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,xe._isFirebaseServerApp)(this.app)?Promise.reject(tt(this)):this.queue((0,A.A)(function*(){yield d.assertedPersistence.setPersistence(Le(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,A.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,A.A)(function*(){const d=yield function Ct(p){return hn.apply(this,arguments)}(l),g=new Ui(d);null===l.tenantId?l._projectPasswordPolicy=g:l._tenantPasswordPolicies[l.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new ne.FA("auth","Firebase",l())}onAuthStateChanged(l,d,g){return this.registerStateListener(this.authStateSubscription,l,d,g)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,g){return this.registerStateListener(this.idTokenSubscription,l,d,g)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const g=this.onAuthStateChanged(()=>{g(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,A.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function M(p,l){return R.apply(this,arguments)}(d,v)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var g=this;return(0,A.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===l?v.removeCurrentUser():v.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,A.A)(function*(){if(!d.redirectPersistenceManager){const g=l&&Le(l)||d._popupRedirectResolver;pe(g,d,"argument-error"),d.redirectPersistenceManager=yield lt.create(d,[Le(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,A.A)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,A.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===l?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,A.A)(function*(){if(l===d.currentUser)return d.queue((0,A.A)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let P=!1;const B=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(B,this,"internal-error"),B.then(()=>{P||C(this.currentUser)}),"function"==typeof d){const se=l.addObserver(d,g,v);return()=>{P=!0,se()}}{const se=l.addObserver(d);return()=>{P=!0,se()}}}directlySetCurrentUser(l){var d=this;return(0,A.A)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=nt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,A.A)(function*(){var d;const g={"X-Client-Version":l.clientVersion};l.app.options.appId&&(g["X-Firebase-gmpid"]=l.app.options.appId);const v=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield l._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var l=this;return(0,A.A)(function*(){var d;const g=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function wr(p,...l){tr.logLevel<=Bt.$b.WARN&&tr.warn(`Auth (${xe.SDK_VERSION}): ${p}`,...l)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function en(p){return(0,ne.Ku)(p)}class tb{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,ne.tD)(d=>this.observer=d)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cl={loadJS:()=>(0,A.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bl(p){return Cl.loadJS(p)}function sb(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Iy{constructor(l){this.type="recaptcha-enterprise",this.auth=en(l)}verify(l="verify",d=!1){var g=this;return(0,A.A)(function*(){function C(){return C=(0,A.A)(function*(B){if(!d){if(null==B.tenantId&&null!=B._agentRecaptchaConfig)return B._agentRecaptchaConfig.siteKey;if(null!=B.tenantId&&void 0!==B._tenantRecaptchaConfigs[B.tenantId])return B._tenantRecaptchaConfigs[B.tenantId].siteKey}return new Promise(function(){var se=(0,A.A)(function*(be,Me){Ci(B,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Oe=>{if(void 0!==Oe.recaptchaKey){const Sn=new Qo(Oe);return null==B.tenantId?B._agentRecaptchaConfig=Sn:B._tenantRecaptchaConfigs[B.tenantId]=Sn,be(Sn.siteKey)}Me(new Error("recaptcha Enterprise site key undefined"))}).catch(Oe=>{Me(Oe)})});return function(be,Me){return se.apply(this,arguments)}}())}),C.apply(this,arguments)}function P(B,se,be){const Me=window.grecaptcha;gt(Me)?Me.enterprise.ready(()=>{Me.enterprise.execute(B,{action:l}).then(Oe=>{se(Oe)}).catch(()=>{se("NO_RECAPTCHA")})}):be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((B,se)=>{(function v(B){return C.apply(this,arguments)})(g.auth).then(be=>{if(!d&&gt(window.grecaptcha))P(be,B,se);else{if(typeof window>"u")return void se(new Error("RecaptchaVerifier is only supported in browser"));let Me=function rb(){return Cl.recaptchaEnterpriseScript}();0!==Me.length&&(Me+=be),bl(Me).then(()=>{P(be,B,se)}).catch(Oe=>{se(Oe)})}}).catch(be=>{se(be)})})})()}}function ab(p,l,d){return wy.apply(this,arguments)}function wy(){return(wy=(0,A.A)(function*(p,l,d,g=!1){const v=new Iy(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const P=Object.assign({},l);return Object.assign(P,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Tl(p,l,d,g){return dp.apply(this,arguments)}function dp(){return dp=(0,A.A)(function*(p,l,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield ab(p,l,d,"getOobCode"===d);return g(p,C)}return g(p,l).catch(function(){var C=(0,A.A)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const B=yield ab(p,l,d,"getOobCode"===d);return g(p,B)}return Promise.reject(P)});return function(P){return C.apply(this,arguments)}}())}),dp.apply(this,arguments)}function db(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function Ty(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class ia{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return yn("not implemented")}_getIdTokenResponse(l){return yn("not implemented")}_linkToIdToken(l,d){return yn("not implemented")}_getReauthenticationResolver(l){return yn("not implemented")}}function hp(p,l){return hd.apply(this,arguments)}function hd(){return(hd=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:resetPassword",ue(p,l))})).apply(this,arguments)}function fp(){return(fp=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function gb(p,l){return pp.apply(this,arguments)}function pp(){return(pp=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function Dy(){return(Dy=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:update",ue(p,l))})).apply(this,arguments)}function _b(p,l){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithPassword",ue(p,l))})).apply(this,arguments)}function fd(p,l){return Is.apply(this,arguments)}function Is(){return(Is=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:sendOobCode",ue(p,l))})).apply(this,arguments)}function za(){return(za=(0,A.A)(function*(p,l){return fd(p,l)})).apply(this,arguments)}function Ry(p,l){return pd.apply(this,arguments)}function pd(){return(pd=(0,A.A)(function*(p,l){return fd(p,l)})).apply(this,arguments)}function Py(p,l){return gd.apply(this,arguments)}function gd(){return(gd=(0,A.A)(function*(p,l){return fd(p,l)})).apply(this,arguments)}function gp(){return(gp=(0,A.A)(function*(p,l){return fd(p,l)})).apply(this,arguments)}function Ga(){return(Ga=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithEmailLink",ue(p,l))})).apply(this,arguments)}function Dl(){return(Dl=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithEmailLink",ue(p,l))})).apply(this,arguments)}class md extends ia{constructor(l,d,g,v=null){super("password",g),this._email=l,this._password=d,this._tenantId=v}static _fromEmailAndPassword(l,d){return new md(l,d,"password")}static _fromEmailAndCode(l,d,g=null){return new md(l,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,A.A)(function*(){switch(d.signInMethod){case"password":return Tl(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",_b);case"emailLink":return function vb(p,l){return Ga.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:Ft(l,"internal-error")}})()}_linkToIdToken(l,d){var g=this;return(0,A.A)(function*(){switch(g.signInMethod){case"password":return Tl(l,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gb);case"emailLink":return function My(p,l){return Dl.apply(this,arguments)}(l,{idToken:d,email:g._email,oobCode:g._password});default:Ft(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Bi(p,l){return mp.apply(this,arguments)}function mp(){return(mp=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithIdp",ue(p,l))})).apply(this,arguments)}class Gs extends ia{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new Gs(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):Ft("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v}=d,C=(0,Be.Tt)(d,["providerId","signInMethod"]);if(!g||!v)return null;const P=new Gs(g,v);return P.idToken=C.idToken||void 0,P.accessToken=C.accessToken||void 0,P.secret=C.secret,P.nonce=C.nonce,P.pendingToken=C.pendingToken||null,P}_getIdTokenResponse(l){return Bi(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Bi(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Bi(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,ne.Am)(d)}return l}}function _d(){return(_d=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:sendVerificationCode",ue(p,l))})).apply(this,arguments)}function _p(){return(_p=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,l))})).apply(this,arguments)}function Ny(){return(Ny=(0,A.A)(function*(p,l){const d=yield At(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,l));if(d.temporaryProof)throw kn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const yp={USER_NOT_FOUND:"user-not-found"};function vp(){return(vp=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),yp)})).apply(this,arguments)}class sa extends ia{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new sa({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new sa({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function xy(p,l){return _p.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function Ib(p,l){return Ny.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function wb(p,l){return vp.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=l;return g||d||v||C?new sa({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class Al{constructor(l){var d,g,v,C,P,B;const se=(0,ne.I9)((0,ne.hp)(l)),be=null!==(d=se.apiKey)&&void 0!==d?d:null,Me=null!==(g=se.oobCode)&&void 0!==g?g:null,Oe=function Cb(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=se.mode)&&void 0!==v?v:null);pe(be&&Me&&Oe,"argument-error"),this.apiKey=be,this.operation=Oe,this.code=Me,this.continueUrl=null!==(C=se.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(P=se.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(B=se.tenantId)&&void 0!==B?B:null}static parseLink(l){const d=function Ep(p){const l=(0,ne.I9)((0,ne.hp)(p)).link,d=l?(0,ne.I9)((0,ne.hp)(l)).deep_link_id:null,g=(0,ne.I9)((0,ne.hp)(p)).deep_link_id;return(g?(0,ne.I9)((0,ne.hp)(g)).link:null)||g||d||l||p}(l);try{return new Al(d)}catch{return null}}}let Ip=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return md._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Al.parseLink(g);return pe(v,"argument-error"),md._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class po{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class oa extends po{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class qa extends oa{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return pe("providerId"in d&&"signInMethod"in d,"argument-error"),Gs._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return pe(l.idToken||l.accessToken,"argument-error"),Gs._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return qa.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return qa.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:P,providerId:B}=l;if(!g&&!v&&!d&&!C||!B)return null;try{return new qa(B)._credential({idToken:d,accessToken:g,nonce:P,pendingToken:C})}catch{return null}}}let bb=(()=>{class p extends oa{constructor(){super("facebook.com")}static credential(d){return Gs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Oy=(()=>{class p extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Gs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Tb=(()=>{class p extends oa{constructor(){super("github.com")}static credential(d){return Gs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Sl extends ia{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return Bi(l,this.buildRequest())}_linkToIdToken(l,d){const g=this.buildRequest();return g.idToken=d,Bi(l,g)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,Bi(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Sl(g,C):null}static _create(l,d){return new Sl(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yd extends po{constructor(l){pe(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return yd.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return yd.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=Sl.fromJSON(l);return pe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:g}=l;if(!d||!g)return null;try{return Sl._create(g,d)}catch{return null}}}let ky=(()=>{class p extends oa{constructor(){super("twitter.com")}static credential(d,g){return Gs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Fy(p,l){return qs.apply(this,arguments)}function qs(){return(qs=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signUp",ue(p,l))})).apply(this,arguments)}class Xi{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,g,v=!1){return(0,A.A)(function*(){const C=yield Pe._fromIdTokenResponse(l,g,v),P=Sb(g);return new Xi({user:C,providerId:P,_tokenResponse:g,operationType:d})})()}static _forOperation(l,d,g){return(0,A.A)(function*(){yield l._updateTokensIfNecessary(g,!0);const v=Sb(g);return new Xi({user:l,providerId:v,_tokenResponse:g,operationType:d})})()}}function Sb(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Rl(){return(Rl=(0,A.A)(function*(p){var l;if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const d=en(p);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new Xi({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Fy(d,{returnSecureToken:!0}),v=yield Xi._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class vd extends ne.g{constructor(l,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:l.name,tenantId:null!==(C=l.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(l,d,g,v){return new vd(l,d,g,v)}}function Vy(p,l,d,g){return("reauthenticate"===l?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?vd._fromErrorAndOperation(p,C,l,g):C})}function Uy(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function jy(){return jy=(0,A.A)(function*(p,l){const d=(0,ne.Ku)(p);yield wp(!0,d,l);const{providerUserInfo:g}=yield function vl(p,l){return bi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),v=Uy(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),jy.apply(this,arguments)}function $y(p,l){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,A.A)(function*(p,l,d=!1){const g=yield Vr(p,l._linkToIdToken(p.auth,yield p.getIdToken()),d);return Xi._forOperation(p,"link",g)})).apply(this,arguments)}function wp(p,l,d){return zy.apply(this,arguments)}function zy(){return(zy=(0,A.A)(function*(p,l,d){yield Zi(l);const v=!1===p?"provider-already-linked":"no-such-provider";pe(Uy(l.providerData).has(d)===p,l.auth,v)})).apply(this,arguments)}function Rb(p,l){return Gy.apply(this,arguments)}function Gy(){return(Gy=(0,A.A)(function*(p,l,d=!1){const{auth:g}=p;if((0,xe._isFirebaseServerApp)(g.app))return Promise.reject(tt(g));const v="reauthenticate";try{const C=yield Vr(p,Vy(g,v,l,p),d);pe(C.idToken,g,"internal-error");const P=vs(C.idToken);pe(P,g,"internal-error");const{sub:B}=P;return pe(p.uid===B,g,"user-mismatch"),Xi._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&Ft(g,"user-mismatch"),C}})).apply(this,arguments)}function Pb(p,l){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,A.A)(function*(p,l,d=!1){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const g="signIn",v=yield Vy(p,g,l),C=yield Xi._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function he(p,l){return go.apply(this,arguments)}function go(){return(go=(0,A.A)(function*(p,l){return Pb(en(p),l)})).apply(this,arguments)}function Pl(p,l){return Id.apply(this,arguments)}function Id(){return(Id=(0,A.A)(function*(p,l){const d=(0,ne.Ku)(p);return yield wp(!1,d,l.providerId),$y(d,l)})).apply(this,arguments)}function Mb(p,l){return qy.apply(this,arguments)}function qy(){return(qy=(0,A.A)(function*(p,l){return Rb((0,ne.Ku)(p),l)})).apply(this,arguments)}function Ji(){return(Ji=(0,A.A)(function*(p,l){return At(p,"POST","/v1/accounts:signInWithCustomToken",ue(p,l))})).apply(this,arguments)}function mo(){return mo=(0,A.A)(function*(p,l){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const d=en(p),g=yield function Wy(p,l){return Ji.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),v=yield Xi._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),mo.apply(this,arguments)}class ws{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?wd._fromServerResponse(l,d):"totpInfo"in d?Ml._fromServerResponse(l,d):Ft(l,"internal-error")}}class wd extends ws{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new wd(d)}}class Ml extends ws{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new Ml(d)}}function Ws(p,l,d){var g;pe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),pe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(pe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(pe(d.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function Ky(p){return tn.apply(this,arguments)}function tn(){return(tn=(0,A.A)(function*(p){const l=en(p);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function Qy(){return(Qy=(0,A.A)(function*(p,l,d){const g=en(p),v={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&Ws(g,v,d),yield Tl(g,v,"getOobCode",Ry)})).apply(this,arguments)}function Cp(){return Cp=(0,A.A)(function*(p,l,d){yield hp((0,ne.Ku)(p),{oobCode:l,newPassword:d}).catch(function(){var g=(0,A.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Ky(p),v});return function(v){return g.apply(this,arguments)}}())}),Cp.apply(this,arguments)}function xl(){return xl=(0,A.A)(function*(p,l){yield function mb(p,l){return Dy.apply(this,arguments)}((0,ne.Ku)(p),{oobCode:l})}),xl.apply(this,arguments)}function xb(p,l){return bp.apply(this,arguments)}function bp(){return(bp=(0,A.A)(function*(p,l){const d=(0,ne.Ku)(p),g=yield hp(d,{oobCode:l}),v=g.requestType;switch(pe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(g.mfaInfo,d,"internal-error");default:pe(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=ws._fromServerResponse(en(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function et(){return(et=(0,A.A)(function*(p,l){const{data:d}=yield xb((0,ne.Ku)(p),l);return d.email})).apply(this,arguments)}function Wr(){return(Wr=(0,A.A)(function*(p,l,d){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const g=en(p),P=yield Tl(g,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fy).catch(se=>{throw"auth/password-does-not-meet-requirements"===se.code&&Ky(p),se}),B=yield Xi._fromIdTokenResponse(g,"signIn",P);return yield g._updateCurrentUser(B.user),B})).apply(this,arguments)}function Yy(){return(Yy=(0,A.A)(function*(p,l,d){const g=en(p),v={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function C(P,B){pe(B.handleCodeInApp,g,"argument-error"),B&&Ws(g,P,B)})(v,d),yield Tl(g,v,"getOobCode",Py)})).apply(this,arguments)}function Zy(){return(Zy=(0,A.A)(function*(p,l,d){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const g=(0,ne.Ku)(p),v=Ip.credentialWithLink(l,d||si());return pe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),he(g,v)})).apply(this,arguments)}function Xy(){return(Xy=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:createAuthUri",ue(p,l))})).apply(this,arguments)}function Jy(){return Jy=(0,A.A)(function*(p,l){const g={identifier:l,continueUri:ms()?si():"http://localhost"},{signinMethods:v}=yield function tN(p,l){return Xy.apply(this,arguments)}((0,ne.Ku)(p),g);return v||[]}),Jy.apply(this,arguments)}function ev(){return ev=(0,A.A)(function*(p,l){const d=(0,ne.Ku)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&Ws(d.auth,v,l);const{email:C}=yield function Sy(p,l){return za.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),ev.apply(this,arguments)}function Xe(){return Xe=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};d&&Ws(g.auth,C,d);const{email:P}=yield function yb(p,l){return gp.apply(this,arguments)}(g.auth,C);P!==p.email&&(yield p.reload())}),Xe.apply(this,arguments)}function tv(){return(tv=(0,A.A)(function*(p,l){return Ae(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function nv(){return nv=(0,A.A)(function*(p,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const g=(0,ne.Ku)(p),C={idToken:yield g.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},P=yield Vr(g,function nN(p,l){return tv.apply(this,arguments)}(g.auth,C));g.displayName=P.displayName||null,g.photoURL=P.photoUrl||null;const B=g.providerData.find(({providerId:se})=>"password"===se);B&&(B.displayName=g.displayName,B.photoURL=g.photoURL),yield g._updateTokensIfNecessary(P)}),nv.apply(this,arguments)}function Fb(p,l,d){return $t.apply(this,arguments)}function $t(){return $t=(0,A.A)(function*(p,l,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(C.email=l),d&&(C.password=d);const P=yield Vr(p,function pb(p,l){return fp.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary(P,!0)}),$t.apply(this,arguments)}class Ka{constructor(l,d,g={}){this.isNewUser=l,this.providerId=d,this.profile=g}}class Tp extends Ka{constructor(l,d,g,v){super(l,d,g),this.username=v}}class Lb extends Ka{constructor(l,d){super(l,"facebook.com",d)}}class Td extends Tp{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Dd extends Ka{constructor(l,d){super(l,"google.com",d)}}class Dp extends Tp{constructor(l,d,g){super(l,"twitter.com",d,g)}}function rv(p){const{user:l,_tokenResponse:d}=p;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function bd(p){var l,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const P=null===(d=null===(l=vs(p.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(P)return new Ka(C,"anonymous"!==P&&"custom"!==P?P:null)}if(!g)return null;switch(g){case"facebook.com":return new Lb(C,v);case"github.com":return new Td(C,v);case"google.com":return new Dd(C,v);case"twitter.com":return new Dp(C,v,p.screenName||null);case"custom":case"anonymous":return new Ka(C,null);default:return new Ka(C,g,v)}}(d)}class es{constructor(l,d,g){this.type=l,this.credential=d,this.user=g}static _fromIdtoken(l,d){return new es("enroll",l,d)}static _fromMfaPendingCredential(l){return new es("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,g;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return es._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(g=l.multiFactorSession)&&void 0!==g&&g.idToken)return es._fromIdtoken(l.multiFactorSession.idToken)}return null}}class kl{constructor(l,d,g){this.session=l,this.hints=d,this.signInResolver=g}static _fromError(l,d){const g=en(l),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(B=>ws._fromServerResponse(g,B));pe(v.mfaPendingCredential,g,"internal-error");const P=es._fromMfaPendingCredential(v.mfaPendingCredential);return new kl(P,C,function(){var B=(0,A.A)(function*(se){const be=yield se._process(g,P);delete v.mfaInfo,delete v.mfaPendingCredential;const Me=Object.assign(Object.assign({},v),{idToken:be.idToken,refreshToken:be.refreshToken});switch(d.operationType){case"signIn":const Oe=yield Xi._fromIdTokenResponse(g,d.operationType,Me);return yield g._updateCurrentUser(Oe.user),Oe;case"reauthenticate":return pe(d.user,g,"internal-error"),Xi._forOperation(d.user,d.operationType,Me);default:Ft(g,"internal-error")}});return function(se){return B.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,A.A)(function*(){return d.signInResolver(l)})()}}class xt{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>ws._fromServerResponse(l.auth,g)))})}static _fromUser(l){return new xt(l)}getSession(){var l=this;return(0,A.A)(function*(){return es._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var g=this;return(0,A.A)(function*(){const v=l,C=yield g.getSession(),P=yield Vr(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(P),g.user.reload()})()}unenroll(l){var d=this;return(0,A.A)(function*(){const g="string"==typeof l?l:l.uid,v=yield d.user.getIdToken();try{const C=yield Vr(d.user,function at(p,l){return Ae(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ue(p,l))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:P})=>P!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const lv=new WeakMap,Sd="__sak";class Ub{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qa=(()=>{class p extends Ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((B,se,be)=>{this.notifyListeners(B,be)});const v=d.key;g?this.detachListener():this.stopPolling();const C=()=>{const B=this.storage.getItem(v);!g&&this.localCache[v]===B||this.notifyListeners(v,B)},P=this.storage.getItem(v);!function le(){return(0,ne.lT)()&&10===document.documentMode}()||P===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,A.A)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,A.A)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,A.A)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),zn=(()=>{class p extends Ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let aN=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,A.A)(function*(){const v=d,{eventId:C,eventType:P,data:B}=v.data,se=g.handlersMap[P];if(!se?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:P});const be=Array.from(se).map(function(){var Oe=(0,A.A)(function*(Sn){return Sn(v.origin,B)});return function(Sn){return Oe.apply(this,arguments)}}()),Me=yield function uv(p){return Promise.all(p.map(function(){var l=(0,A.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return l.apply(this,arguments)}}()))}(be);v.ports[0].postMessage({status:"done",eventId:C,eventType:P,response:Me})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Rd(p="",l=10){let d="";for(let g=0;g<l;g++)d+=Math.floor(10*Math.random());return p+d}class Fl{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,g=50){var v=this;return(0,A.A)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let P,B;return new Promise((se,be)=>{const Me=Rd("",20);C.port1.start();const Oe=setTimeout(()=>{be(new Error("unsupported_event"))},g);B={messageChannel:C,onMessage(Sn){const is=Sn;if(is.data.eventId===Me)switch(is.data.status){case"ack":clearTimeout(Oe),P=setTimeout(()=>{be(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),se(is.data.response);break;default:clearTimeout(Oe),clearTimeout(P),be(new Error("invalid_response"))}}},v.handlers.add(B),C.port1.addEventListener("message",B.onMessage),v.target.postMessage({eventType:l,eventId:Me,data:d},[C.port2])}).finally(()=>{B&&v.removeMessageHandler(B)})})()}}function Fn(){return window}function Pp(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function Mp(){return(Mp=(0,A.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hv="firebaseLocalStorageDb",Md="firebaseLocalStorage",j="fbase_key";class Za{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function W(p,l){return p.transaction([Md],l?"readwrite":"readonly").objectStore(Md)}function Ll(){const p=indexedDB.open(hv,1);return new Promise((l,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Md,{keyPath:j})}catch(v){d(v)}}),p.addEventListener("success",(0,A.A)(function*(){const g=p.result;g.objectStoreNames.contains(Md)?l(g):(g.close(),yield function xd(){const p=indexedDB.deleteDatabase(hv);return new Za(p).toPromise()}(),l(yield Ll()))}))})}function Xa(p,l,d){return xp.apply(this,arguments)}function xp(){return(xp=(0,A.A)(function*(p,l,d){const g=W(p,!0).put({[j]:l,value:d});return new Za(g).toPromise()})).apply(this,arguments)}function Np(){return(Np=(0,A.A)(function*(p,l){const d=W(p,!1).get(l),g=yield new Za(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Nd(p,l){const d=W(p,!0).delete(l);return new Za(d).toPromise()}const ec=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,A.A)(function*(){return d.db||(d.db=yield Ll()),d.db})()}_withRetries(d){var g=this;return(0,A.A)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,A.A)(function*(){return Pp()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,A.A)(function*(){d.receiver=aN._getInstance(function Ya(){return Pp()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,A.A)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,A.A)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,A.A)(function*(){var g,v;if(d.activeServiceWorker=yield function $b(){return Mp.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Fl(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,A.A)(function*(){if(g.sender&&g.activeServiceWorker&&function dv(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,A.A)(function*(){try{if(!indexedDB)return!1;const d=yield Ll();return yield Xa(d,Sd,"1"),yield Nd(d,Sd),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,A.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,A.A)(function*(){return v._withPendingWrite((0,A.A)(function*(){return yield v._withRetries(C=>Xa(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,A.A)(function*(){const v=yield g._withRetries(C=>function Hb(p,l){return Np.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,A.A)(function*(){return g._withPendingWrite((0,A.A)(function*(){return yield g._withRetries(v=>Nd(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,A.A)(function*(){const g=yield d._withRetries(P=>{const B=W(P,!1).getAll();return new Za(B).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:P,value:B}of g)C.add(P),JSON.stringify(d.localCache[P])!==JSON.stringify(B)&&(d.notifyListeners(P,B),v.push(P));for(const P of Object.keys(d.localCache))d.localCache[P]&&!C.has(P)&&(d.notifyListeners(P,null),v.push(P));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,A.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),ca=1e12;class kd{constructor(l){this.auth=l,this.counter=ca,this._widgets=new Map}render(l,d){const g=this.counter;return this._widgets.set(g,new Op(l,this.auth.name,d||{})),this.counter++,g}reset(l){var d;const g=l||ca;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(l){var d;return(null===(d=this._widgets.get(l||ca))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,A.A)(function*(){var g;return null===(g=d._widgets.get(l||ca))||void 0===g||g.execute(),""})()}}class Op{constructor(l,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof l?document.getElementById(l):l;pe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cN(p){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fd=sb("rcb"),lN=new Q(3e4,6e4);class Di{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Fn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return pe(function kp(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&nr(Fn().grecaptcha)?Promise.resolve(Fn().grecaptcha):new Promise((g,v)=>{const C=Fn().setTimeout(()=>{v(Lt(l,"network-request-failed"))},lN.get());Fn()[Fd]=()=>{Fn().clearTimeout(C),delete Fn()[Fd];const B=Fn().grecaptcha;if(!B||!nr(B))return void v(Lt(l,"internal-error"));const se=B.render;B.render=(be,Me)=>{const Oe=se(be,Me);return this.counter++,Oe},this.hostLanguage=d,g(B)},bl(`${function nb(){return Cl.recaptchaV2Script}()}?${(0,ne.Am)({onload:Fd,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Lt(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=Fn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nc{load(l){return(0,A.A)(function*(){return new kd(l)})()}clearedOneInstance(){}}const qb="recaptcha",pv={theme:"light",type:"image"};class Cs{constructor(l,d,g=Object.assign({},pv)){this.parameters=g,this.type=qb,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=en(l),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;pe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nc:new Di,this.validateStartingState()}verify(){var l=this;return(0,A.A)(function*(){l.assertNotDestroyed();const d=yield l.render(),g=l.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const P=B=>{B&&(l.tokenChangeListeners.delete(P),C(B))};l.tokenChangeListeners.add(P),l.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof l)l(d);else if("string"==typeof l){const g=Fn()[l];"function"==typeof g&&g(d)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,A.A)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,A.A)(function*(){pe(ms()&&!Pp(),l.auth,"internal-error"),yield function Nt(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function yl(p){return Bs.apply(this,arguments)}(l.auth);pe(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kr{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=sa._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Vl(){return(Vl=(0,A.A)(function*(p,l,d){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const g=en(p),v=yield Vd(g,l,(0,ne.Ku)(d));return new Kr(v,C=>he(g,C))})).apply(this,arguments)}function rc(){return(rc=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p);yield wp(!1,g,"phone");const v=yield Vd(g.auth,l,(0,ne.Ku)(d));return new Kr(v,C=>Pl(g,C))})).apply(this,arguments)}function bs(){return(bs=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p);if((0,xe._isFirebaseServerApp)(g.auth.app))return Promise.reject(tt(g.auth));const v=yield Vd(g.auth,l,(0,ne.Ku)(d));return new Kr(v,C=>Mb(g,C))})).apply(this,arguments)}function Vd(p,l,d){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,A.A)(function*(p,l,d){var g;const v=yield d.verify();try{let C;if(pe("string"==typeof v,p,"argument-error"),pe(d.type===qb,p,"argument-error"),C="string"==typeof l?{phoneNumber:l}:l,"session"in C){const P=C.session;if("phoneNumber"in C)return pe("enroll"===P.type,p,"internal-error"),(yield function av(p,l){return Ae(p,"POST","/v2/accounts/mfaEnrollment:start",ue(p,l))}(p,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{pe("signin"===P.type,p,"internal-error");const B=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return pe(B,p,"missing-multi-factor-info"),(yield function aa(p,l){return Ae(p,"POST","/v2/accounts/mfaSignIn:start",ue(p,l))}(p,{mfaPendingCredential:P.credential,mfaEnrollmentId:B,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function Zx(p,l){return _d.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return P}}finally{d._reset()}}),Ul.apply(this,arguments)}function Ud(){return(Ud=(0,A.A)(function*(p,l){const d=(0,ne.Ku)(p);if((0,xe._isFirebaseServerApp)(d.auth.app))return Promise.reject(tt(d.auth));yield $y(d,l)})).apply(this,arguments)}let Qs=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=en(d)}verifyPhoneNumber(d,g){return Vd(this.auth,d,(0,ne.Ku)(g))}static credential(d,g){return sa._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?sa._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function vo(p,l){return l?Le(l):(pe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Bd extends ia{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Bi(l,this._buildIdpRequest())}_linkToIdToken(l,d){return Bi(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return Bi(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function Wb(p){return Pb(p.auth,new Bd(p),p.bypassAuthState)}function Fp(p){const{auth:l,user:d}=p;return pe(d,l,"internal-error"),Rb(d,new Bd(p),p.bypassAuthState)}function Kb(p){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,A.A)(function*(p){const{auth:l,user:d}=p;return pe(d,l,"internal-error"),$y(d,new Bd(p),p.bypassAuthState)})).apply(this,arguments)}class ji{constructor(l,d,g,v,C=!1){this.auth=l,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,A.A)(function*(g,v){l.pendingPromise={resolve:g,reject:v};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(C){l.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,A.A)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:P,error:B,type:se}=l;if(B)return void d.reject(B);const be={auth:d.auth,requestUri:g,sessionId:v,tenantId:P||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(se)(be))}catch(Me){d.reject(Me)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return Wb;case"linkViaPopup":case"linkViaRedirect":return Kb;case"reauthViaPopup":case"reauthViaRedirect":return Fp;default:Ft(this.auth,"internal-error")}}resolve(l){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qb=new Q(2e3,1e4);function Vp(){return(Vp=(0,A.A)(function*(p,l,d){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p,"operation-not-supported-in-this-environment"));const g=en(p);Nn(p,l,po);const v=vo(g,d);return new Bp(g,"signInViaPopup",l,v).executeNotNull()})).apply(this,arguments)}function Up(){return(Up=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p);if((0,xe._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth,"operation-not-supported-in-this-environment"));Nn(g.auth,l,po);const v=vo(g.auth,d);return new Bp(g.auth,"reauthViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}function jd(){return(jd=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p);Nn(g.auth,l,po);const v=vo(g.auth,d);return new Bp(g.auth,"linkViaPopup",l,v,g).executeNotNull()})).apply(this,arguments)}let Bp=(()=>{class p extends ji{constructor(d,g,v,C,P){super(d,g,C,P),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,A.A)(function*(){const g=yield d.execute();return pe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,A.A)(function*(){$n(1===d.filter.length,"Popup operations only handle one event");const g=Rd();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Lt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Qb.get())};d()}}return p.currentPopupAction=null,p})();const Xb="pendingRedirect",Bl=new Map;class fr extends ji{constructor(l,d,g=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,A.A)(function*(){let g=Bl.get(d.auth._key());if(!g){try{const C=(yield function Jb(p,l){return jp.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}Bl.set(d.auth._key(),g)}return d.bypassAuthState||Bl.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,g=this;return(0,A.A)(function*(){if("signInViaRedirect"===l.type)return d().call(g,l);if("unknown"!==l.type){if(l.eventId){const v=yield g.auth._redirectUserForId(l.eventId);if(v)return g.user=v,d().call(g,l);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,A.A)(function*(){})()}cleanUp(){}}function jp(){return(jp=(0,A.A)(function*(p,l){const d=Yn(l),g=_t(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function qt(p,l){return $d.apply(this,arguments)}function $d(){return($d=(0,A.A)(function*(p,l){return _t(p)._set(Yn(l),"true")})).apply(this,arguments)}function pr(p,l){Bl.set(p._key(),l)}function _t(p){return Le(p._redirectPersistence)}function Yn(p){return rr(Xb,p.config.apiKey,p.name)}function br(p,l,d){return function Eo(p,l,d){return gr.apply(this,arguments)}(p,l,d)}function gr(){return(gr=(0,A.A)(function*(p,l,d){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const g=en(p);Nn(p,l,po),yield g._initializationPromise;const v=vo(g,d);return yield qt(v,g),v._openRedirect(g,l,"signInViaRedirect")})).apply(this,arguments)}function yv(p,l,d){return function vv(p,l,d){return ic.apply(this,arguments)}(p,l,d)}function ic(){return(ic=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p);if(Nn(g.auth,l,po),(0,xe._isFirebaseServerApp)(g.auth.app))return Promise.reject(tt(g.auth));yield g.auth._initializationPromise;const v=vo(g.auth,d);yield qt(v,g.auth);const C=yield rT(g);return v._openRedirect(g.auth,l,"reauthViaRedirect",C)})).apply(this,arguments)}function eT(p,l,d){return function tT(p,l,d){return Io.apply(this,arguments)}(p,l,d)}function Io(){return(Io=(0,A.A)(function*(p,l,d){const g=(0,ne.Ku)(p);Nn(g.auth,l,po),yield g.auth._initializationPromise;const v=vo(g.auth,d);yield wp(!1,g,l.providerId),yield qt(v,g.auth);const C=yield rT(g);return v._openRedirect(g.auth,l,"linkViaRedirect",C)})).apply(this,arguments)}function jl(){return(jl=(0,A.A)(function*(p,l){return yield en(p)._initializationPromise,$l(p,l,!1)})).apply(this,arguments)}function $l(p,l){return sc.apply(this,arguments)}function sc(){return(sc=(0,A.A)(function*(p,l,d=!1){if((0,xe._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const g=en(p),v=vo(g,l),P=yield new fr(g,v,d).execute();return P&&!d&&(delete P.user._redirectEventId,yield g._persistUserIfCurrent(P.user),yield g._setRedirectUser(null,l)),P})).apply(this,arguments)}function rT(p){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,A.A)(function*(p){const l=Rd(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class Hd{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(l,g)&&(d=!0,this.sendToConsumer(l,g),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function la(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hp(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var g;if(l.error&&!Hp(l)){const v=(null===(g=l.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Lt(this.auth,v))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const g=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&g}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($p(l))}saveEventToCache(l){this.cachedEventUids.add($p(l)),this.lastProcessedEventTime=Date.now()}}function $p(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function Hp({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===l?.code}function Ev(p){return zl.apply(this,arguments)}function zl(){return(zl=(0,A.A)(function*(p,l={}){return Ae(p,"GET","/v1/projects",l)})).apply(this,arguments)}const zd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sT=/^https?/;function oc(){return(oc=(0,A.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield Ev(p);for(const d of l)try{if(Tr(d))return}catch{}Ft(p,"unauthorized-domain")})).apply(this,arguments)}function Tr(p){const l=si(),{protocol:d,hostname:g}=new URL(l);if(p.startsWith("chrome-extension://")){const P=new URL(p);return""===P.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&P.hostname===g}if(!sT.test(d))return!1;if(zd.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const ac=new Q(3e4,6e4);function Gd(){const p=Fn().___jsl;if(p?.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let qd=null;const cc=new Q(5e3,15e3),aT="__/auth/iframe",cT="emulator/auth/iframe",lT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ts(p){const l=p.config;pe(l.authDomain,p,"auth-domain-config-required");const d=l.emulator?ee(l,cT):`https://${p.config.authDomain}/${aT}`,g={apiKey:l.apiKey,appName:p.name,v:xe.SDK_VERSION},v=Gp.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,ne.Am)(g).slice(1)}`}function lc(){return lc=(0,A.A)(function*(p){const l=yield function Iv(p){return qd=qd||function oT(p){return new Promise((l,d)=>{var g,v,C;function P(){Gd(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{Gd(),d(Lt(p,"network-request-failed"))},timeout:ac.get()})}if(null!==(v=null===(g=Fn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)l(gapi.iframes.getContext());else{if(null===(C=Fn().gapi)||void 0===C||!C.load){const B=sb("iframefcb");return Fn()[B]=()=>{gapi.load?P():d(Lt(p,"network-request-failed"))},bl(`${function ib(){return Cl.gapiScript}()}?onload=${B}`).catch(se=>d(se))}P()}}).catch(l=>{throw qd=null,l})}(p),qd}(p),d=Fn().gapi;return pe(d,p,"internal-error"),l.open({where:document.body,url:Ts(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lT,dontclear:!0},g=>new Promise(function(){var v=(0,A.A)(function*(C,P){yield g.restyle({setHideOnLeave:!1});const B=Lt(p,"network-request-failed"),se=Fn().setTimeout(()=>{P(B)},cc.get());function be(){Fn().clearTimeout(se),C(g)}g.ping(be).then(be,()=>{P(B)})});return function(C,P){return v.apply(this,arguments)}}()))}),lc.apply(this,arguments)}const uc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bv{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fT="__/auth/handler",pT="emulator/auth/handler",gT=encodeURIComponent("fac");function qp(p,l,d,g,v,C){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,A.A)(function*(p,l,d,g,v,C){pe(p.config.authDomain,p,"auth-domain-config-required"),pe(p.config.apiKey,p,"invalid-api-key");const P={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:xe.SDK_VERSION,eventId:v};if(l instanceof po){l.setDefaultLanguage(p.languageCode),P.providerId=l.providerId||"",(0,ne.Im)(l.getCustomParameters())||(P.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Me,Oe]of Object.entries(C||{}))P[Me]=Oe}if(l instanceof oa){const Me=l.getScopes().filter(Oe=>""!==Oe);Me.length>0&&(P.scopes=Me.join(","))}p.tenantId&&(P.tid=p.tenantId);const B=P;for(const Me of Object.keys(B))void 0===B[Me]&&delete B[Me];const se=yield p._getAppCheckToken(),be=se?`#${gT}=${encodeURIComponent(se)}`:"";return`${function Kp({config:p}){return p.emulator?ee(p,pT):`https://${p.authDomain}/${fT}`}(p)}?${(0,ne.Am)(B).slice(1)}${be}`})).apply(this,arguments)}const dc="webStorageSupport",Ie=class vn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zn,this._completeRedirectFn=$l,this._overrideRedirectResult=pr}_openPopup(l,d,g,v){var C=this;return(0,A.A)(function*(){var P;$n(null===(P=C.eventManagers[l._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const B=yield qp(l,d,g,si(),v);return function Gl(p,l,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),P=Math.max((window.screen.availWidth-g)/2,0).toString();let B="";const se=Object.assign(Object.assign({},uc),{width:g.toString(),height:v.toString(),top:C,left:P}),be=(0,ne.ZQ)().toLowerCase();d&&(B=$a(be)?"_blank":d),Es(be)&&(l=l||"http://localhost",se.scrollbars="yes");const Me=Object.entries(se).reduce((Sn,[is,th])=>`${Sn}${is}=${th},`,"");if(function H(p=(0,ne.ZQ)()){var l;return Ha(p)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(be)&&"_self"!==B)return function hT(p,l){const d=document.createElement("a");d.href=p,d.target=l;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(l||"",B),new bv(null);const Oe=window.open(l||"",B,Me);pe(Oe,p,"popup-blocked");try{Oe.focus()}catch{}return new bv(Oe)}(l,B,Rd())})()}_openRedirect(l,d,g,v){var C=this;return(0,A.A)(function*(){return yield C._originValidation(l),function Pd(p){Fn().location.href=p}(yield qp(l,d,g,si(),v)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):($n(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(l);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(l){var d=this;return(0,A.A)(function*(){const g=yield function wv(p){return lc.apply(this,arguments)}(l),v=new Hd(l);return g.register("authEvent",C=>(pe(C?.authEvent,l,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:v},d.iframes[l._key()]=g,v})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(dc,{type:dc},v=>{var C;const P=null===(C=v?.[0])||void 0===C?void 0:C[dc];void 0!==P&&d(!!P),Ft(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function zp(p){return oc.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return Se()||ta()||Ha()}};class We{constructor(l){this.factorId=l}_process(l,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,g);case"signin":return this._finalizeSignIn(l,d.credential);default:return yn("unexpected MultiFactorSessionType")}}}class Ln extends We{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new Ln(l)}_finalizeEnroll(l,d,g){return function Ks(p,l){return Ae(p,"POST","/v2/accounts/mfaEnrollment:finalize",ue(p,l))}(l,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function Gb(p,l){return Ae(p,"POST","/v2/accounts/mfaSignIn:finalize",ue(p,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ns=(()=>{class p{constructor(){}static assertion(d){return Ln._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Gn="@firebase/auth";class rt{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,A.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(g=>{l(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bo(){return window}(0,ne.XA)("authIdTokenMaxAge"),function up(p){Cl=p}({loadJS:p=>new Promise((l,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=l,g.onerror=v=>{const C=Lt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function pc(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Tv(p){(0,xe._registerComponent)(new An.uA("auth",(l,{options:d})=>{const g=l.getProvider("app").getImmediate(),v=l.getProvider("heartbeat"),C=l.getProvider("app-check-internal"),{apiKey:P,authDomain:B}=g.options;pe(P&&!P.includes(":"),"invalid-api-key",{appName:g.name});const se={apiKey:P,authDomain:B,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nt(p)},be=new ra(g,v,C,se);return function ub(p,l){const d=l?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Le);l?.errorMap&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(g,l?.popupRedirectResolver)}(be,d),be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,g)=>{l.getProvider("auth-internal").initialize()})),(0,xe._registerComponent)(new An.uA("auth-internal",l=>{const d=en(l.getProvider("auth").getImmediate());return new rt(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)(Gn,"1.7.8",function ql(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,xe.registerVersion)(Gn,"1.7.8","esm2017")}("Browser");function ui(){return ui=(0,A.A)(function*(p,l,d){var g;const{BuildInfo:v}=bo();$n(l.sessionId,"AuthEvent did not contain a session ID");const C=yield function qn(p){return _c.apply(this,arguments)}(l.sessionId),P={};return Ha()?P.ibi=v.packageName:na()?P.apn=v.packageName:Ft(p,"operation-not-supported-in-this-environment"),v.displayName&&(P.appDisplayName=v.displayName),P.sessionId=C,qp(p,d,l.type,void 0,null!==(g=l.eventId)&&void 0!==g?g:void 0,P)}),ui.apply(this,arguments)}function Wl(){return(Wl=(0,A.A)(function*(p){const{BuildInfo:l}=bo(),d={};Ha()?d.iosBundleId=l.packageName:na()?d.androidPackageName=l.packageName:Ft(p,"operation-not-supported-in-this-environment"),yield Ev(p,d)})).apply(this,arguments)}function gc(){return(gc=(0,A.A)(function*(p,l,d){const{cordova:g}=bo();let v=()=>{};try{yield new Promise((C,P)=>{let B=null;function se(){var Oe;C();const Sn=null===(Oe=g.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof Sn&&Sn(),"function"==typeof d?.close&&d.close()}function be(){B||(B=window.setTimeout(()=>{P(Lt(p,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&be()}l.addPassiveListener(se),document.addEventListener("resume",be,!1),na()&&document.addEventListener("visibilitychange",Me,!1),v=()=>{l.removePassiveListener(se),document.removeEventListener("resume",be,!1),document.removeEventListener("visibilitychange",Me,!1),B&&window.clearTimeout(B)}})}finally{v()}})).apply(this,arguments)}function _c(){return(_c=(0,A.A)(function*(p){const l=function or(p){if($n(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const l=new ArrayBuffer(p.length),d=new Uint8Array(l);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Qp extends Hd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(l)),super.onEvent(l)}initialized(){var l=this;return(0,A.A)(function*(){yield l.initPromise})()}}function $i(p){return ha.apply(this,arguments)}function ha(){return(ha=(0,A.A)(function*(p){const l=yield Ql()._get(Qd(p));return l&&(yield Ql()._remove(Qd(p))),l})).apply(this,arguments)}function mT(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function Ql(){return Le(Qa)}function Qd(p){return rr("authEvent",p.config.apiKey,p.name)}function Zp(p){if(!p?.includes("?"))return{};const[l,...d]=p.split("?");return(0,ne.I9)(d.join("?"))}const hN=class dN{constructor(){this._redirectPersistence=zn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$l,this._overrideRedirectResult=pr}_initialize(l){var d=this;return(0,A.A)(function*(){const g=l._key();let v=d.eventManagers.get(g);return v||(v=new Qp(l),d.eventManagers.set(g,v),d.attachCallbackListeners(l,v)),v})()}_openPopup(l){Ft(l,"operation-not-supported-in-this-environment")}_openRedirect(l,d,g,v){var C=this;return(0,A.A)(function*(){!function mc(p){var l,d,g,v,C,P,B,se,be,Me;const Oe=bo();pe("function"==typeof(null===(l=Oe?.universalLinks)||void 0===l?void 0:l.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pe(typeof(null===(d=Oe?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pe("function"==typeof(null===(C=null===(v=null===(g=Oe?.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===C?void 0:C.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pe("function"==typeof(null===(se=null===(B=null===(P=Oe?.cordova)||void 0===P?void 0:P.plugins)||void 0===B?void 0:B.browsertab)||void 0===se?void 0:se.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pe("function"==typeof(null===(Me=null===(be=Oe?.cordova)||void 0===be?void 0:be.InAppBrowser)||void 0===Me?void 0:Me.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const P=yield C._initialize(l);yield P.initialized(),P.resetRedirect(),function Qe(){Bl.clear()}(),yield C._originValidation(l);const B=function da(p,l,d=null){return{type:l,eventId:d,urlResponse:null,sessionId:mT(),postBody:null,tenantId:p.tenantId,error:Lt(p,"no-auth-event")}}(l,g,v);yield function Kd(p,l){return Ql()._set(Qd(p),l)}(l,B);const se=yield function Wd(p,l,d){return ui.apply(this,arguments)}(l,B,d),be=yield function Kl(p){const{cordova:l}=bo();return new Promise(d=>{l.plugins.browsertab.isAvailable(g=>{let v=null;g?l.plugins.browsertab.openUrl(p):v=l.InAppBrowser.open(p,function X(p=(0,ne.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(v)})})}(se);return function Ds(p,l,d){return gc.apply(this,arguments)}(l,P,be)})()}_isIframeWebStorageSupported(l,d){throw new Error("Method not implemented.")}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function $e(p){return Wl.apply(this,arguments)}(l)),this.originValidationPromises[d]}attachCallbackListeners(l,d){const{universalLinks:g,handleOpenURL:v,BuildInfo:C}=bo(),P=setTimeout((0,A.A)(function*(){yield $i(l),d.onEvent(yT())}),500),B=function(){var Me=(0,A.A)(function*(Oe){clearTimeout(P);const Sn=yield $i(l);let is=null;Sn&&Oe?.url&&(is=function Dv(p,l){var d,g;const v=function Yp(p){const l=Zp(p),d=l.link?decodeURIComponent(l.link):void 0,g=Zp(d).link,v=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return Zp(v).link||v||g||d||p}(l);if(v.includes("/__/auth/callback")){const C=Zp(v),P=C.firebaseError?function _T(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(C.firebaseError)):null,B=null===(g=null===(d=P?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],se=B?Lt(B):null;return se?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:se,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:v,postBody:null}}return null}(Sn,Oe.url)),d.onEvent(is||yT())});return function(Sn){return Me.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,B);const se=v,be=`${C.packageName.toLowerCase()}://`;bo().handleOpenURL=function(){var Me=(0,A.A)(function*(Oe){if(Oe.toLowerCase().startsWith(be)&&B({url:Oe}),"function"==typeof se)try{se(Oe)}catch(Sn){console.error(Sn)}});return function(Oe){return Me.apply(this,arguments)}}()}};function yT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Lt("no-auth-event")}}function Yd(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function vT(p=(0,ne.ZQ)()){return!("file:"!==Yd()&&"ionic:"!==Yd()&&"capacitor:"!==Yd()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function ET(){try{const p=self.localStorage,l=Rd();if(p)return p.setItem(l,"1"),p.removeItem(l),!function vN(p=(0,ne.ZQ)()){return function Sv(){return(0,ne.lT)()&&11===document?.documentMode}()||function yN(p=(0,ne.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ne.zW)()}catch{return Rv()&&(0,ne.zW)()}return!1}function Rv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xp(){return(function _N(){return"http:"===Yd()||"https:"===Yd()}()||(0,ne.sr)()||vT())&&!function Av(){return(0,ne.lV)()||(0,ne.Ll)()}()&&ET()&&!Rv()}function Jp(){return vT()&&typeof document<"u"}function Zd(){return(Zd=(0,A.A)(function*(){return!!Jp()&&new Promise(p=>{const l=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),p(!0)})})})).apply(this,arguments)}const Ai={LOCAL:"local",NONE:"none",SESSION:"session"},yc=pe,eg="persistence";function Yl(p){return tg.apply(this,arguments)}function tg(){return(tg=(0,A.A)(function*(p){yield p._initializationPromise;const l=ng(),d=rr(eg,p.config.apiKey,p.name);l&&l.setItem(d,p._getPersistence())})).apply(this,arguments)}function ng(){var p;try{return(null===(p=function IT(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Pv=pe;class yt{constructor(){this.browserResolver=Le(Ie),this.cordovaResolver=Le(hN),this.underlyingResolver=null,this._redirectPersistence=zn,this._completeRedirectFn=$l,this._overrideRedirectResult=pr}_initialize(l){var d=this;return(0,A.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,d,g,v){var C=this;return(0,A.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openPopup(l,d,g,v)})()}_openRedirect(l,d,g,v){var C=this;return(0,A.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openRedirect(l,d,g,v)})()}_isIframeWebStorageSupported(l,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,d)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Jp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,A.A)(function*(){if(l.underlyingResolver)return;const d=yield function Ar(){return Zd.apply(this,arguments)}();l.underlyingResolver=d?l.cordovaResolver:l.browserResolver})()}}function Xd(p){return p.unwrap()}function Qr(p){return vc(p)}function vc(p){const{_tokenResponse:l}=p instanceof ne.g?p.customData:p;if(!l)return null;if(!(p instanceof ne.g)&&"temporaryProof"in l&&"phoneNumber"in l)return Qs.credentialFromResult(p);const d=l.providerId;if(!d||d===jt.PASSWORD)return null;let g;switch(d){case jt.GOOGLE:g=Oy;break;case jt.FACEBOOK:g=bb;break;case jt.GITHUB:g=Tb;break;case jt.TWITTER:g=ky;break;default:const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:P,pendingToken:B,nonce:se}=l;return C||P||v||B?B?d.startsWith("saml.")?Sl._create(d,B):Gs._fromParams({providerId:d,signInMethod:d,pendingToken:B,idToken:v,accessToken:C}):new qa(d).credential({idToken:v,accessToken:C,rawNonce:se}):null}return p instanceof ne.g?g.credentialFromError(p):g.credentialFromResult(p)}function Zn(p,l){return l.catch(d=>{throw d instanceof ne.g&&function CT(p,l){var d;const g=null===(d=l.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new ig(p,function Sp(p,l){var d;const g=(0,ne.Ku)(p),v=l;return pe(l.customData.operationType,g,"argument-error"),pe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),kl._fromError(g,v)}(p,l));else if(g){const v=vc(l),C=l;v&&(C.credential=v,C.tenantId=g.tenantId||void 0,C.email=g.email||void 0,C.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const v=d.user;return{operationType:d.operationType,credential:Qr(d),additionalUserInfo:rv(d),user:Ys.getOrCreate(v)}})}function Yr(p,l){return rg.apply(this,arguments)}function rg(){return(rg=(0,A.A)(function*(p,l){const d=yield l;return{verificationId:d.verificationId,confirm:g=>Zn(p,d.confirm(g))}})).apply(this,arguments)}class ig{constructor(l,d){this.resolver=d,this.auth=function Zl(p){return p.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return Zn(Xd(this.auth),this.resolver.resolveSignIn(l))}}class Ys{constructor(l){this._delegate=l,this.multiFactor=function Vb(p){const l=(0,ne.Ku)(p);return lv.has(l)||lv.set(l,xt._fromUser(l)),lv.get(l)}(l)}static getOrCreate(l){return Ys.USER_MAP.has(l)||Ys.USER_MAP.set(l,new Ys(l)),Ys.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var d=this;return(0,A.A)(function*(){return Zn(d.auth,Pl(d._delegate,l))})()}linkWithPhoneNumber(l,d){var g=this;return(0,A.A)(function*(){return Yr(g.auth,function Ld(p,l,d){return rc.apply(this,arguments)}(g._delegate,l,d))})()}linkWithPopup(l){var d=this;return(0,A.A)(function*(){return Zn(d.auth,function Zb(p,l,d){return jd.apply(this,arguments)}(d._delegate,l,yt))})()}linkWithRedirect(l){var d=this;return(0,A.A)(function*(){return yield Yl(en(d.auth)),eT(d._delegate,l,yt)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var d=this;return(0,A.A)(function*(){return Zn(d.auth,Mb(d._delegate,l))})()}reauthenticateWithPhoneNumber(l,d){return Yr(this.auth,function ts(p,l,d){return bs.apply(this,arguments)}(this._delegate,l,d))}reauthenticateWithPopup(l){return Zn(this.auth,function Yb(p,l,d){return Up.apply(this,arguments)}(this._delegate,l,yt))}reauthenticateWithRedirect(l){var d=this;return(0,A.A)(function*(){return yield Yl(en(d.auth)),yv(d._delegate,l,yt)})()}sendEmailVerification(l){return function kb(p,l){return ev.apply(this,arguments)}(this._delegate,l)}unlink(l){var d=this;return(0,A.A)(function*(){return yield function By(p,l){return jy.apply(this,arguments)}(d._delegate,l),d})()}updateEmail(l){return function iN(p,l){const d=(0,ne.Ku)(p);return(0,xe._isFirebaseServerApp)(d.auth.app)?Promise.reject(tt(d.auth)):Fb(d,l,null)}(this._delegate,l)}updatePassword(l){return function ye(p,l){return Fb((0,ne.Ku)(p),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function mv(p,l){return Ud.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function rN(p,l){return nv.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,d){return function Ti(p,l,d){return Xe.apply(this,arguments)}(this._delegate,l,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ys.USER_MAP=new WeakMap;const Hr=pe;let sg=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=d.options;Hr(v,"invalid-api-key",{appName:d.name}),Hr(v,"invalid-api-key",{appName:d.name});const C=typeof window<"u"?yt:void 0;this._delegate=g.initialize({options:{persistence:Mv(v,d.name),popupRedirectResolver:C}}),this._delegate._updateErrorMap(hr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function by(p,l,d){const g=en(p);pe(g._canInitEmulator,g,"emulator-config-failed"),pe(/^https?:\/\//.test(l),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=db(l),{host:P,port:B}=function hb(p){const l=db(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:Ty(g.substr(C.length+1))}}{const[C,P]=g.split(":");return{host:C,port:Ty(P)}}}(l);g.config.emulator={url:`${C}//${P}${null===B?"":`:${B}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:P,port:B,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function fb(){function p(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function ir(p,l){return xl.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return xb(this._delegate,d)}confirmPasswordReset(d,g){return function Gt(p,l,d){return Cp.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var v=this;return(0,A.A)(function*(){return Zn(v._delegate,function Cd(p,l,d){return Wr.apply(this,arguments)}(v._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Ob(p,l){return Jy.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function _o(p,l){const d=Al.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,A.A)(function*(){Hr(Xp(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function nT(p,l){return jl.apply(this,arguments)}(d._delegate,yt);return g?Zn(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function fN(p,l){en(p)._logFramework(l)}(this._delegate,d)}onAuthStateChanged(d,g,v){const{next:C,error:P,complete:B}=og(d,g,v);return this._delegate.onAuthStateChanged(C,P,B)}onIdTokenChanged(d,g,v){const{next:C,error:P,complete:B}=og(d,g,v);return this._delegate.onIdTokenChanged(C,P,B)}sendSignInLinkToEmail(d,g){return function Nb(p,l,d){return Yy.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function Xx(p,l,d){return Qy.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,A.A)(function*(){let v;switch(function wT(p,l){yc(Object.values(Ai).includes(l),p,"invalid-persistence-type"),(0,ne.lV)()?yc(l!==Ai.SESSION,p,"unsupported-persistence-type"):(0,ne.Ll)()?yc(l===Ai.NONE,p,"unsupported-persistence-type"):Rv()?yc(l===Ai.NONE||l===Ai.LOCAL&&(0,ne.zW)(),p,"unsupported-persistence-type"):yc(l===Ai.NONE||ET(),p,"unsupported-persistence-type")}(g._delegate,d),d){case Ai.SESSION:v=zn;break;case Ai.LOCAL:v=(yield Le(ec)._isAvailable())?ec:Qa;break;case Ai.NONE:v=Ce;break;default:return Ft("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Zn(this._delegate,function Ly(p){return Rl.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Zn(this._delegate,he(this._delegate,d))}signInWithCustomToken(d){return Zn(this._delegate,function Wa(p,l){return mo.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return Zn(this._delegate,function Jx(p,l,d){return(0,xe._isFirebaseServerApp)(p.app)?Promise.reject(tt(p)):he((0,ne.Ku)(p),Ip.credential(l,d)).catch(function(){var g=(0,A.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Ky(p),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return Zn(this._delegate,function eN(p,l,d){return Zy.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return Yr(this._delegate,function gv(p,l,d){return Vl.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,A.A)(function*(){return Hr(Xp(),g._delegate,"operation-not-supported-in-this-environment"),Zn(g._delegate,function _v(p,l,d){return Vp.apply(this,arguments)}(g._delegate,d,yt))})()}signInWithRedirect(d){var g=this;return(0,A.A)(function*(){return Hr(Xp(),g._delegate,"operation-not-supported-in-this-environment"),yield Yl(g._delegate),br(g._delegate,d,yt)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function on(p,l){return et.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=Ai,p})();function og(p,l,d){let g=p;"function"!=typeof p&&({next:g,error:l,complete:d}=p);const v=g;return{next:P=>v(P&&Ys.getOrCreate(P)),error:l,complete:d}}function Mv(p,l){const d=function As(p,l){const d=ng();if(!d)return[];const g=rr(eg,p,l);switch(d.getItem(g)){case Ai.NONE:return[Ce];case Ai.LOCAL:return[ec,zn];case Ai.SESSION:return[zn];default:return[]}}(p,l);if(typeof self<"u"&&!d.includes(ec)&&d.push(ec),typeof window<"u")for(const g of[Qa,zn])d.includes(g)||d.push(g);return d.includes(Ce)||d.push(Ce),d}class Ec{constructor(){this.providerId="phone",this._delegate=new Qs(Xd(Fe.A.auth()))}static credential(l,d){return Qs.credential(l,d)}verifyPhoneNumber(l,d){return this._delegate.verifyPhoneNumber(l,d)}unwrap(){return this._delegate}}Ec.PHONE_SIGN_IN_METHOD=Qs.PHONE_SIGN_IN_METHOD,Ec.PROVIDER_ID=Qs.PROVIDER_ID;const ag=pe;class Jd{constructor(l,d,g=Fe.A.app()){var v;ag(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new Cs(g.auth(),l,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cg(p){p.INTERNAL.registerComponent(new An.uA("auth-compat",l=>{const d=l.getProvider("app-compat").getImmediate(),g=l.getProvider("auth");return new sg(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ip,FacebookAuthProvider:bb,GithubAuthProvider:Tb,GoogleAuthProvider:Oy,OAuthProvider:qa,SAMLAuthProvider:yd,PhoneAuthProvider:Ec,PhoneMultiFactorGenerator:ns,RecaptchaVerifier:Jd,TwitterAuthProvider:ky,Auth:sg,AuthCredential:ia,Error:ne.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.13")}(Fe.A)},467:(Us,kr,pt)=>{function A(xe,ne,Bt,Be,An,Fr,jt){try{var fe=xe[Fr](jt),ve=fe.value}catch(Ue){return void Bt(Ue)}fe.done?ne(ve):Promise.resolve(ve).then(Be,An)}function Fe(xe){return function(){var ne=this,Bt=arguments;return new Promise(function(Be,An){var Fr=xe.apply(ne,Bt);function jt(ve){A(Fr,Be,An,jt,fe,"next",ve)}function fe(ve){A(Fr,Be,An,jt,fe,"throw",ve)}jt(void 0)})}}pt.d(kr,{A:()=>Fe})},635:(Us,kr,pt)=>{function ne(Q,ee){var oe={};for(var de in Q)Object.prototype.hasOwnProperty.call(Q,de)&&ee.indexOf(de)<0&&(oe[de]=Q[de]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var we=0;for(de=Object.getOwnPropertySymbols(Q);we<de.length;we++)ee.indexOf(de[we])<0&&Object.prototype.propertyIsEnumerable.call(Q,de[we])&&(oe[de[we]]=Q[de[we]])}return oe}function Ue(Q,ee,oe,de){return new(oe||(oe=Promise))(function(ue,Ae){function Dt(At){try{Je(de.next(At))}catch(Jt){Ae(Jt)}}function On(At){try{Je(de.throw(At))}catch(Jt){Ae(Jt)}}function Je(At){At.done?ue(At.value):function we(ue){return ue instanceof oe?ue:new oe(function(Ae){Ae(ue)})}(At.value).then(Dt,On)}Je((de=de.apply(Q,ee||[])).next())})}function dn(Q){return this instanceof dn?(this.v=Q,this):new dn(Q)}function Ft(Q,ee,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,de=oe.apply(Q,ee||[]),ue=[];return we=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Dt("next"),Dt("throw"),Dt("return",function Ae(je){return function(Hn){return Promise.resolve(Hn).then(je,Jt)}}),we[Symbol.asyncIterator]=function(){return this},we;function Dt(je,Hn){de[je]&&(we[je]=function(kn){return new Promise(function(nr,gt){ue.push([je,kn,nr,gt])>1||On(je,kn)})},Hn&&(we[je]=Hn(we[je])))}function On(je,Hn){try{!function Je(je){je.value instanceof dn?Promise.resolve(je.value.v).then(At,Jt):_s(ue[0][2],je)}(de[je](Hn))}catch(kn){_s(ue[0][3],kn)}}function At(je){On("next",je)}function Jt(je){On("throw",je)}function _s(je,Hn){je(Hn),ue.shift(),ue.length&&On(ue[0][0],ue[0][1])}}function ii(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function Ut(Q){var ee="function"==typeof Symbol&&Symbol.iterator,oe=ee&&Q[ee],de=0;if(oe)return oe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&de>=Q.length&&(Q=void 0),{value:Q&&Q[de++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),oe={},de("next"),de("throw"),de("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function de(ue){oe[ue]=Q[ue]&&function(Ae){return new Promise(function(Dt,On){!function we(ue,Ae,Dt,On){Promise.resolve(On).then(function(Je){ue({value:Je,done:Dt})},Ae)}(Dt,On,(Ae=Q[ue](Ae)).done,Ae.value)})}}}pt.d(kr,{AQ:()=>Ft,N3:()=>dn,Tt:()=>ne,sH:()=>Ue,xN:()=>ii}),"function"==typeof SuppressedError&&SuppressedError}},Us=>{Us(Us.s=1)}]);