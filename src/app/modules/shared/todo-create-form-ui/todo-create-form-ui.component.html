<div class="flex" [style.maxHeight.px]="maxHeigth">
  <span *ngIf="formType !== 'folderEdit' && formType !== 'todoEdit'"
    class="btn btn-primary" (click)="changeFormType()">
    {{btnTitle}}
  </span>
  <!-- edit item -->
  <form id="form"
      *ngIf="modalType"
      [formGroup]="editForm" 
      (ngSubmit)="onSubmit()">
      <div class="form__content">
        <input required type="text" name="text" placeholder="Edit Name" formControlName="name">
      </div>
  </form>
  <!-- create todo -->
  <form id="form"
      *ngIf="formType === 'todo'"
      [formGroup]="todoForm"
      (ngSubmit)="onSubmit()">
    <div class="form__content" [style.maxHeight.px]="maxHeigth">
      <input required type="text" name="text" placeholder="{{placeholder}}" formControlName="name" >
        <ng-container *ngTemplateOutlet="categoriesPick"></ng-container>
        <div class="devider"></div>
        <ul class="folder-list">
          <button type="button" class="btn btn__pick-item"
            (click)="onFolderPick('')"
            [ngClass]="{'btn__no-item': !!!activeFolder}">None
          </button>
          <li *ngFor="let folder of currentFoldersList">
            <button type="button" class="btn btn__pick-item"
              *ngIf="folder"
              [disabled]="this.activeCategory === null"
              [class.active]="activeFolder === folder.name"
              (click)="onFolderPick(folder.name)">{{folder.name}}
            </button>
          </li>
        </ul>
    </div>
  </form>
  <!-- create folder -->
  <form id="form"
      *ngIf="formType === 'folder'"
      [formGroup]="folderForm"
      (ngSubmit)="onSubmit()">
    <div class="form__content" [style.maxHeight.px]="maxHeigth">
      <input required type="text" name="text" placeholder="{{placeholder}}" formControlName="name" >
      <ng-container *ngTemplateOutlet="categoriesPick"></ng-container>
    </div>
  </form>
  <!-- create category -->
  <form id="form"
    *ngIf="formType === 'category'"
    [formGroup]="categoryForm"
    (ngSubmit)="onSubmit()">
    <div class="form__content" >
      <input required type="text" name="text" placeholder="{{placeholder}}" formControlName="name" >
    </div>
  </form>
  <!-- submit btn -->
  <button type="submit" 
    class="btn btn__big btn__add-todo"
    [disabled]="isValid()"
    (click)="onSubmit()">
    <app-svg-icon *ngIf="formType != 'folderEdit'"
      [svgPath]="'../../../../assets/icons/plus.svg'" 
      [width]="'20'" [height]="'20'">
    </app-svg-icon>
    <span *ngIf="modalType">edit</span>
  </button>
</div>

<ng-template #categoriesPick>
  <ul class="categories-list">
    <button type="button" class="btn btn__pick-item" *ngIf="formType === 'todo'"
      [ngClass]="{'btn__no-item': !!!activeCategory}" (click)="clearCategoryPick()" role="button">None
    </button>
    <li *ngFor="let category of categoriesList">
      <button type="button" role="text" class="btn btn__pick-item" (click)="onCategotyPick(category)"
        [class.active]="category.id === activeCategory?.id">
        {{category.name}}
      </button>
    </li>
  </ul>
</ng-template>